(function(A,Rt){typeof exports=="object"&&typeof module<"u"?Rt(exports):typeof define=="function"&&define.amd?define(["exports"],Rt):(A=typeof globalThis<"u"?globalThis:A||self,Rt(A["@walletconnect/utils"]={}))})(this,function(A){"use strict";const Rt=":";function Li(e){const[t,n]=e.split(Rt);return{namespace:t,reference:n}}function Ec(e){const{namespace:t,reference:n}=e;return[t,n].join(Rt)}function ki(e){const[t,n,r]=e.split(Rt);return{namespace:t,reference:n,address:r}}function xc(e){const{namespace:t,reference:n,address:r}=e;return[t,n,r].join(Rt)}function Mi(e,t){const n=[];return e.forEach(r=>{const i=t(r);n.includes(i)||n.push(i)}),n}function vc(e){const{address:t}=ki(e);return t}function Bc(e){const{namespace:t,reference:n}=ki(e);return Ec({namespace:t,reference:n})}function y0(e,t){const{namespace:n,reference:r}=Li(t);return xc({namespace:n,reference:r,address:e})}function m0(e){return Mi(e,vc)}function Sc(e){return Mi(e,Bc)}function E0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...i.accounts)}),n}function x0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Sc(i.accounts))}),n}function v0(e,t=[]){const n=[];return Object.keys(e).forEach(r=>{if(t.length&&!t.includes(r))return;const i=e[r];n.push(...Tr(r,i))}),n}function Tr(e,t){return e.includes(":")?[e]:t.chains||[]}var Ac=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},B0=function(){function e(t,n,r){this.name=t,this.version=n,this.os=r,this.type="browser"}return e}(),S0=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),A0=function(){function e(t,n,r,i){this.name=t,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return e}(),D0=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),_0=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),I0=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,O0=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Dc=3,U0=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",I0]],_c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function N0(e){return e?Ic(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new _0:typeof navigator<"u"?Ic(navigator.userAgent):R0()}function T0(e){return e!==""&&U0.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]},!1)}function Ic(e){var t=T0(e);if(!t)return null;var n=t[0],r=t[1];if(n==="searchbot")return new D0;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Dc&&(i=Ac(Ac([],i,!0),$0(Dc-i.length),!0)):i=[];var o=i.join("."),s=C0(e),c=O0.exec(e);return c&&c[1]?new A0(n,o,s,c[1]):new B0(n,o,s)}function C0(e){for(var t=0,n=_c.length;t<n;t++){var r=_c[t],i=r[0],o=r[1],s=o.exec(e);if(s)return i}return null}function R0(){var e=typeof process<"u"&&process.version;return e?new S0(process.version.slice(1)):null}function $0(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function F0(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var fn={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var ji=function(e,t){return ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ji(e,t)};function P0(e,t){ji(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var zi=function(){return zi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},zi.apply(this,arguments)};function L0(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function k0(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function M0(e,t){return function(n,r){t(n,r,e)}}function j0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function z0(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(u){try{f(r.next(u))}catch(d){s(d)}}function a(u){try{f(r.throw(u))}catch(d){s(d)}}function f(u){u.done?o(u.value):i(u.value).then(c,a)}f((r=r.apply(e,t||[])).next())})}function H0(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(f){return function(u){return a([f,u])}}function a(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(u){f=[6,u],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function q0(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function V0(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Hi(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oc(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function K0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Oc(arguments[t]));return e}function G0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,c=o.length;s<c;s++,i++)r[i]=o[s];return r}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function Z0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(l){return new Promise(function(g,w){o.push([h,l,g,w])>1||c(h,l)})})}function c(h,l){try{a(r[h](l))}catch(g){d(o[0][3],g)}}function a(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(f,u):d(o[0][2],h)}function f(h){c("next",h)}function u(h){c("throw",h)}function d(h,l){h(l),o.shift(),o.length&&c(o[0][0],o[0][1])}}function W0(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:Gn(e[i](s)),done:i==="return"}:o?o(s):s}:o}}function Y0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hi=="function"?Hi(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(c,a){s=e[o](s),i(c,a,s.done,s.value)})}}function i(o,s,c,a){Promise.resolve(a).then(function(f){o({value:f,done:c})},s)}}function X0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function J0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Q0(e){return e&&e.__esModule?e:{default:e}}function eh(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function th(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}var nh=Object.freeze({__proto__:null,__extends:P0,get __assign(){return zi},__rest:L0,__decorate:k0,__param:M0,__metadata:j0,__awaiter:z0,__generator:H0,__createBinding:q0,__exportStar:V0,__values:Hi,__read:Oc,__spread:K0,__spreadArrays:G0,__await:Gn,__asyncGenerator:Z0,__asyncDelegator:W0,__asyncValues:Y0,__makeTemplateObject:X0,__importStar:J0,__importDefault:Q0,__classPrivateFieldGet:eh,__classPrivateFieldSet:th}),Cr=F0(nh),qi={},Zn={},Uc;function rh(){if(Uc)return Zn;Uc=1,Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return Zn.delay=e,Zn}var un={},Vi={},ln={},Nc;function ih(){return Nc||(Nc=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.ONE_THOUSAND=ln.ONE_HUNDRED=void 0,ln.ONE_HUNDRED=100,ln.ONE_THOUSAND=1e3),ln}var Ki={},Tc;function oh(){return Tc||(Tc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(Ki)),Ki}var Cc;function Rc(){return Cc||(Cc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(ih(),e),t.__exportStar(oh(),e)}(Vi)),Vi}var $c;function sh(){if($c)return un;$c=1,Object.defineProperty(un,"__esModule",{value:!0}),un.fromMiliseconds=un.toMiliseconds=void 0;const e=Rc();function t(r){return r*e.ONE_THOUSAND}un.toMiliseconds=t;function n(r){return Math.floor(r/e.ONE_THOUSAND)}return un.fromMiliseconds=n,un}var Fc;function ch(){return Fc||(Fc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(rh(),e),t.__exportStar(sh(),e)}(qi)),qi}var Dn={},Pc;function ah(){if(Pc)return Dn;Pc=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const i=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:i})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Dn.Watch=e,Dn.default=e,Dn}var Gi={},Wn={},Lc;function fh(){if(Lc)return Wn;Lc=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.IWatch=void 0;class e{}return Wn.IWatch=e,Wn}var kc;function uh(){return kc||(kc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Cr.__exportStar(fh(),e)}(Gi)),Gi}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Cr;t.__exportStar(ch(),e),t.__exportStar(ah(),e),t.__exportStar(uh(),e),t.__exportStar(Rc(),e)})(fn);var ce={};Object.defineProperty(ce,"__esModule",{value:!0}),ce.getLocalStorage=ce.getLocalStorageOrThrow=ce.getCrypto=ce.getCryptoOrThrow=Wi=ce.getLocation=ce.getLocationOrThrow=Zi=ce.getNavigator=ce.getNavigatorOrThrow=In=ce.getDocument=ce.getDocumentOrThrow=ce.getFromWindowOrThrow=ce.getFromWindow=void 0;function dn(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}ce.getFromWindow=dn;function _n(e){const t=dn(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}ce.getFromWindowOrThrow=_n;function lh(){return _n("document")}ce.getDocumentOrThrow=lh;function dh(){return dn("document")}var In=ce.getDocument=dh;function hh(){return _n("navigator")}ce.getNavigatorOrThrow=hh;function bh(){return dn("navigator")}var Zi=ce.getNavigator=bh;function gh(){return _n("location")}ce.getLocationOrThrow=gh;function ph(){return dn("location")}var Wi=ce.getLocation=ph;function wh(){return _n("crypto")}ce.getCryptoOrThrow=wh;function yh(){return dn("crypto")}ce.getCrypto=yh;function mh(){return _n("localStorage")}ce.getLocalStorageOrThrow=mh;function Eh(){return dn("localStorage")}ce.getLocalStorage=Eh;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});var Mc=Yi.getWindowMetadata=void 0;const jc=ce;function xh(){let e,t;try{e=jc.getDocumentOrThrow(),t=jc.getLocationOrThrow()}catch{return null}function n(){const d=e.getElementsByTagName("link"),h=[];for(let l=0;l<d.length;l++){const g=d[l],w=g.getAttribute("rel");if(w&&w.toLowerCase().indexOf("icon")>-1){const x=g.getAttribute("href");if(x)if(x.toLowerCase().indexOf("https:")===-1&&x.toLowerCase().indexOf("http:")===-1&&x.indexOf("//")!==0){let I=t.protocol+"//"+t.host;if(x.indexOf("/")===0)I+=x;else{const $=t.pathname.split("/");$.pop();const B=$.join("/");I+=B+"/"+x}h.push(I)}else if(x.indexOf("//")===0){const I=t.protocol+x;h.push(I)}else h.push(x)}}return h}function r(...d){const h=e.getElementsByTagName("meta");for(let l=0;l<h.length;l++){const g=h[l],w=["itemprop","property","name"].map(x=>g.getAttribute(x)).filter(x=>x?d.includes(x):!1);if(w.length&&w){const x=g.getAttribute("content");if(x)return x}}return""}function i(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=e.title),d}function o(){return r("description","og:description","twitter:description","keywords")}const s=i(),c=o(),a=t.origin,f=n();return{description:c,url:a,icons:f,name:s}}Mc=Yi.getWindowMetadata=xh;var vh=Object.defineProperty,Bh=Object.defineProperties,Sh=Object.getOwnPropertyDescriptors,zc=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,Dh=Object.prototype.propertyIsEnumerable,Xi=(e,t,n)=>t in e?vh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hc=(e,t)=>{for(var n in t||(t={}))Ah.call(t,n)&&Xi(e,n,t[n]);if(zc)for(var n of zc(t))Dh.call(t,n)&&Xi(e,n,t[n]);return e},_h=(e,t)=>Bh(e,Sh(t)),qc=(e,t,n)=>Xi(e,typeof t!="symbol"?t+"":t,n);const Vc="ReactNative",Ue={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Rr=" ",Ih=":",Kc="/",Ji=2,Oh=1e3,Gc="js";function Qi(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function $t(){return!In()&&!!Zi()&&navigator.product===Vc}function Uh(){return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Nh(){return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function On(){return!Qi()&&!!Zi()&&!!In()}function hn(){return $t()?Ue.reactNative:Qi()?Ue.node:On()?Ue.browser:Ue.unknown}function Th(){var e;try{return $t()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Zc(e,t){const n=new URLSearchParams(e);return Object.entries(t).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!=null&&n.set(r,String(i))}),n.toString()}function Ch(e){var t,n;const r=Wc();try{return e!=null&&e.url&&r.url&&new URL(e.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),e.url=r.url),(t=e?.icons)!=null&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter(i=>i!=="")),_h(Hc(Hc({},r),e),{url:e?.url||r.url,name:e?.name||r.name,description:e?.description||r.description,icons:(n=e?.icons)!=null&&n.length&&e.icons.length>0?e.icons:r.icons})}catch(i){return console.warn("Error populating app metadata",i),e||r}}function Wc(){return Mc()||{name:"",description:"",url:"",icons:[""]}}function Rh(e,t){var n;const r=hn(),i={protocol:e,version:t,env:r};return r==="browser"&&(i.host=((n=Wi())==null?void 0:n.host)||"unknown"),i}function Yc(){if(hn()===Ue.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const e=N0();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Xc(){var e;const t=hn();return t===Ue.browser?[t,((e=Wi())==null?void 0:e.host)||"unknown"].join(":"):t}function Jc(e,t,n){const r=Yc(),i=Xc();return[[e,t].join("-"),[Gc,n].join("-"),r,i].join("/")}function $h({protocol:e,version:t,relayUrl:n,sdkVersion:r,auth:i,projectId:o,useOnCloseEvent:s,bundleId:c,packageName:a}){const f=n.split("?"),u=Jc(e,t,r),d={auth:i,ua:u,projectId:o,useOnCloseEvent:s||void 0,packageName:a||void 0,bundleId:c||void 0},h=Zc(f[1]||"",d);return f[0]+"?"+h}function Fh(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function Ph(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function Qc(e,t=Ji){return ea(e.split(Kc),t)}function Lh(e){return Qc(e).join(Rr)}function Ft(e,t){return e.filter(n=>t.includes(n)).length===e.length}function ea(e,t=Ji){return e.slice(Math.max(e.length-t,0))}function kh(e){return Object.fromEntries(e.entries())}function Mh(e){return new Map(Object.entries(e))}function jh(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r])}),n}const zh=e=>e;function ta(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Hh(e){return e.split(Rr).map(t=>ta(t)).join(Rr)}function qh(e=fn.FIVE_MINUTES,t){const n=fn.toMiliseconds(e||fn.FIVE_MINUTES);let r,i,o,s;return{resolve:c=>{o&&r&&(clearTimeout(o),r(c),s=Promise.resolve(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,a)=>{if(s)return c(s);o=setTimeout(()=>{const f=new Error(t);s=Promise.reject(f),a(f)},n),r=c,i=a})}}function Vh(e,t,n){return new Promise(async(r,i)=>{const o=setTimeout(()=>i(new Error(n)),t);try{const s=await e;r(s)}catch(s){i(s)}clearTimeout(o)})}function eo(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Kh(e){return eo("topic",e)}function Gh(e){return eo("id",e)}function Zh(e){const[t,n]=e.split(":"),r={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")r.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return r}function Wh(e,t){return fn.fromMiliseconds((t||Date.now())+fn.toMiliseconds(e))}function Yh(e){return Date.now()>=fn.toMiliseconds(e)}function Xh(e,t){return`${e}${t?`:${t}`:""}`}function Ze(e=[],t=[]){return[...new Set([...e,...t])]}async function Jh({id:e,topic:t,wcDeepLink:n}){var r;try{if(!n)return;const i=typeof n=="string"?JSON.parse(n):n,o=i?.href;if(typeof o!="string")return;const s=na(o,e,t),c=hn();if(c===Ue.browser){if(!((r=In())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ra(s)}else c===Ue.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}function na(e,t,n){const r=`requestId=${t}&sessionTopic=${n}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;if(e.startsWith("https://t.me")){const o=e.includes("?")?"&startapp=":"?startapp=";i=`${i}${o}${sa(r,!0)}`}else i=`${i}/wc?${r}`;return i}function ra(e){let t="_self";oa()?t="_top":(ia()||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"),window.open(e,t,"noreferrer noopener")}async function Qh(e,t){let n="";try{if(On()&&(n=localStorage.getItem(t),n))return n;n=await e.getItem(t)}catch(r){console.error(r)}return n}function to(e,t){return e.filter(n=>t.includes(n))}function e1(e,t){if(!e.includes(t))return null;const n=e.split(/([&,?,=])/),r=n.indexOf(t);return n[r+2]}function t1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function n1(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function ia(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function oa(){try{return window.self!==window.top}catch{return!1}}function sa(e,t=!1){const n=Buffer.from(e).toString("base64");return t?n.replace(/[=]/g,""):n}function no(e){return Buffer.from(e,"base64").toString("utf-8")}function r1(e){return new Promise(t=>setTimeout(t,e))}class i1{constructor({limit:t}){qc(this,"limit"),qc(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(t)}}has(t){return this.set.has(t)}}const $r=BigInt(2**32-1),ca=BigInt(32);function aa(e,t=!1){return t?{h:Number(e&$r),l:Number(e>>ca&$r)}:{h:Number(e>>ca&$r)|0,l:Number(e&$r)|0}}function fa(e,t=!1){const n=e.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:s,l:c}=aa(e[o],t);[r[o],i[o]]=[s,c]}return[r,i]}const ua=(e,t,n)=>e>>>n,la=(e,t,n)=>e<<32-n|t>>>n,Pt=(e,t,n)=>e>>>n|t<<32-n,Lt=(e,t,n)=>e<<32-n|t>>>n,Yn=(e,t,n)=>e<<64-n|t>>>n-32,Xn=(e,t,n)=>e>>>n-32|t<<64-n,o1=(e,t)=>t,s1=(e,t)=>e,c1=(e,t,n)=>e<<n|t>>>32-n,a1=(e,t,n)=>t<<n|e>>>32-n,f1=(e,t,n)=>t<<n-32|e>>>64-n,u1=(e,t,n)=>e<<n-32|t>>>64-n;function et(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const ro=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),io=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,l1=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),d1=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,h1=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),b1=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,Un=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Fr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function st(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function tt(e,...t){if(!Fr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Pr(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");st(e.outputLen),st(e.blockLen)}function kt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function oo(e,t){tt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Jn(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function We(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function so(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ct(e,t){return e<<32-t|e>>>t}const da=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ha(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const ht=da?e=>e:e=>ha(e);function g1(e){for(let t=0;t<e.length;t++)e[t]=ha(e[t]);return e}const Mt=da?e=>e:g1,ba=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",p1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nn(e){if(tt(e),ba)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=p1[e[n]];return t}const bt={_0:48,_9:57,A:65,F:70,a:97,f:102};function ga(e){if(e>=bt._0&&e<=bt._9)return e-bt._0;if(e>=bt.A&&e<=bt.F)return e-(bt.A-10);if(e>=bt.a&&e<=bt.f)return e-(bt.a-10)}function Lr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(ba)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=ga(e.charCodeAt(o)),c=ga(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function co(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function nt(e){return typeof e=="string"&&(e=co(e)),tt(e),e}function gt(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];tt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class kr{}function Qn(e){const t=r=>e().update(nt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function w1(e){const t=(r,i)=>e(i).update(nt(r)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}function pt(e=32){if(Un&&typeof Un.getRandomValues=="function")return Un.getRandomValues(new Uint8Array(e));if(Un&&typeof Un.randomBytes=="function")return Uint8Array.from(Un.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const y1=BigInt(0),er=BigInt(1),m1=BigInt(2),E1=BigInt(7),x1=BigInt(256),v1=BigInt(113),pa=[],wa=[],ya=[];for(let e=0,t=er,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],pa.push(2*(5*r+n)),wa.push((e+1)*(e+2)/2%64);let i=y1;for(let o=0;o<7;o++)t=(t<<er^(t>>E1)*v1)%x1,t&m1&&(i^=er<<(er<<BigInt(o))-er);ya.push(i)}const ma=fa(ya,!0),B1=ma[0],S1=ma[1],Ea=(e,t,n)=>n>32?f1(e,t,n):c1(e,t,n),xa=(e,t,n)=>n>32?u1(e,t,n):a1(e,t,n);function A1(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,a=(s+2)%10,f=n[a],u=n[a+1],d=Ea(f,u,1)^n[c],h=xa(f,u,1)^n[c+1];for(let l=0;l<50;l+=10)e[s+l]^=d,e[s+l+1]^=h}let i=e[2],o=e[3];for(let s=0;s<24;s++){const c=wa[s],a=Ea(i,o,c),f=xa(i,o,c),u=pa[s];i=e[u],o=e[u+1],e[u]=a,e[u+1]=f}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=B1[r],e[1]^=S1[r]}We(n)}class ao extends kr{constructor(t,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,st(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Jn(this.state)}clone(){return this._cloneInto()}keccak(){Mt(this.state32),A1(this.state32,this.rounds),Mt(this.state32),this.posOut=0,this.pos=0}update(t){kt(this),t=nt(t),tt(t);const{blockLen:n,state:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);for(let c=0;c<s;c++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){kt(this,!1),tt(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,o=t.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return st(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(oo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,We(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new ao(n,r,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}const D1=(e,t,n)=>Qn(()=>new ao(t,e,n)),va=D1(1,136,256/8),_1="0.1.1";function I1(){return _1}class se extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof se){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),i=n.cause instanceof se&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${i??""}`,c=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(a=>typeof a=="string").join(`
`);super(c,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${I1()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return Ba(this,t)}}function Ba(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Ba(e.cause,t):t?null:e}function O1(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function U1(e,t,n){return e&t^~e&n}function N1(e,t,n){return e&t^e&n^t&n}class Sa extends kr{constructor(t,n,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(t),this.view=so(this.buffer)}update(t){kt(this),t=nt(t),tt(t);const{view:n,buffer:r,blockLen:i}=this,o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=so(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){kt(this),oo(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,We(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let d=s;d<i;d++)n[d]=0;O1(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=so(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)c.setUint32(4*d,u[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.destroyed=s,t.finished=o,t.length=i,t.pos=c,i%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const wt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Be=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Se=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),T1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jt=new Uint32Array(64);class C1 extends Sa{constructor(t=32){super(64,t,8,!1),this.A=wt[0]|0,this.B=wt[1]|0,this.C=wt[2]|0,this.D=wt[3]|0,this.E=wt[4]|0,this.F=wt[5]|0,this.G=wt[6]|0,this.H=wt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:s,G:c,H:a}=this;return[t,n,r,i,o,s,c,a]}set(t,n,r,i,o,s,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)jt[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const h=jt[d-15],l=jt[d-2],g=ct(h,7)^ct(h,18)^h>>>3,w=ct(l,17)^ct(l,19)^l>>>10;jt[d]=w+jt[d-7]+g+jt[d-16]|0}let{A:r,B:i,C:o,D:s,E:c,F:a,G:f,H:u}=this;for(let d=0;d<64;d++){const h=ct(c,6)^ct(c,11)^ct(c,25),l=u+h+U1(c,a,f)+T1[d]+jt[d]|0,w=(ct(r,2)^ct(r,13)^ct(r,22))+N1(r,i,o)|0;u=f,f=a,a=c,c=s+l|0,s=o,o=i,i=r,r=l+w|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,c=c+this.E|0,a=a+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,i,o,s,c,a,f,u)}roundClean(){We(jt)}destroy(){this.set(0,0,0,0,0,0,0,0),We(this.buffer)}}const Aa=fa(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),R1=Aa[0],$1=Aa[1],zt=new Uint32Array(80),Ht=new Uint32Array(80);class fo extends Sa{constructor(t=64){super(128,t,16,!1),this.Ah=Se[0]|0,this.Al=Se[1]|0,this.Bh=Se[2]|0,this.Bl=Se[3]|0,this.Ch=Se[4]|0,this.Cl=Se[5]|0,this.Dh=Se[6]|0,this.Dl=Se[7]|0,this.Eh=Se[8]|0,this.El=Se[9]|0,this.Fh=Se[10]|0,this.Fl=Se[11]|0,this.Gh=Se[12]|0,this.Gl=Se[13]|0,this.Hh=Se[14]|0,this.Hl=Se[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:f,El:u,Fh:d,Fl:h,Gh:l,Gl:g,Hh:w,Hl:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x]}set(t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=l|0,this.Gl=g|0,this.Hh=w|0,this.Hl=x|0}process(t,n){for(let B=0;B<16;B++,n+=4)zt[B]=t.getUint32(n),Ht[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const E=zt[B-15]|0,U=Ht[B-15]|0,T=Pt(E,U,1)^Pt(E,U,8)^ua(E,U,7),P=Lt(E,U,1)^Lt(E,U,8)^la(E,U,7),L=zt[B-2]|0,R=Ht[B-2]|0,q=Pt(L,R,19)^Yn(L,R,61)^ua(L,R,6),z=Lt(L,R,19)^Xn(L,R,61)^la(L,R,6),m=l1(P,z,Ht[B-7],Ht[B-16]),b=d1(m,T,q,zt[B-7],zt[B-16]);zt[B]=b|0,Ht[B]=m|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:f,Dl:u,Eh:d,El:h,Fh:l,Fl:g,Gh:w,Gl:x,Hh:I,Hl:$}=this;for(let B=0;B<80;B++){const E=Pt(d,h,14)^Pt(d,h,18)^Yn(d,h,41),U=Lt(d,h,14)^Lt(d,h,18)^Xn(d,h,41),T=d&l^~d&w,P=h&g^~h&x,L=h1($,U,P,$1[B],Ht[B]),R=b1(L,I,E,T,R1[B],zt[B]),q=L|0,z=Pt(r,i,28)^Yn(r,i,34)^Yn(r,i,39),m=Lt(r,i,28)^Xn(r,i,34)^Xn(r,i,39),b=r&o^r&c^o&c,v=i&s^i&a^s&a;I=w|0,$=x|0,w=l|0,x=g|0,l=d|0,g=h|0,{h:d,l:h}=et(f|0,u|0,R|0,q|0),f=c|0,u=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const p=ro(q,m,v);r=io(p,R,z,b),i=p|0}({h:r,l:i}=et(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=et(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=et(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l:u}=et(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l:h}=et(this.Eh|0,this.El|0,d|0,h|0),{h:l,l:g}=et(this.Fh|0,this.Fl|0,l|0,g|0),{h:w,l:x}=et(this.Gh|0,this.Gl|0,w|0,x|0),{h:I,l:$}=et(this.Hh|0,this.Hl|0,I|0,$|0),this.set(r,i,o,s,c,a,f,u,d,h,l,g,w,x,I,$)}roundClean(){We(zt,Ht)}destroy(){We(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class F1 extends fo{constructor(){super(48),this.Ah=Be[0]|0,this.Al=Be[1]|0,this.Bh=Be[2]|0,this.Bl=Be[3]|0,this.Ch=Be[4]|0,this.Cl=Be[5]|0,this.Dh=Be[6]|0,this.Dl=Be[7]|0,this.Eh=Be[8]|0,this.El=Be[9]|0,this.Fh=Be[10]|0,this.Fl=Be[11]|0,this.Gh=Be[12]|0,this.Gl=Be[13]|0,this.Hh=Be[14]|0,this.Hl=Be[15]|0}}const Ae=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class P1 extends fo{constructor(){super(32),this.Ah=Ae[0]|0,this.Al=Ae[1]|0,this.Bh=Ae[2]|0,this.Bl=Ae[3]|0,this.Ch=Ae[4]|0,this.Cl=Ae[5]|0,this.Dh=Ae[6]|0,this.Dl=Ae[7]|0,this.Eh=Ae[8]|0,this.El=Ae[9]|0,this.Fh=Ae[10]|0,this.Fl=Ae[11]|0,this.Gh=Ae[12]|0,this.Gl=Ae[13]|0,this.Hh=Ae[14]|0,this.Hl=Ae[15]|0}}const at=Qn(()=>new C1),Da=Qn(()=>new fo),_a=Qn(()=>new F1),L1=Qn(()=>new P1),Mr=at;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uo=BigInt(0),jr=BigInt(1);function tr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function qt(e){if(!tr(e))throw new Error("Uint8Array expected")}function nr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function zr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Ia(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?uo:BigInt("0x"+e)}const Oa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",k1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bn(e){if(qt(e),Oa)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=k1[e[n]];return t}const yt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ua(e){if(e>=yt._0&&e<=yt._9)return e-yt._0;if(e>=yt.A&&e<=yt.F)return e-(yt.A-10);if(e>=yt.a&&e<=yt.f)return e-(yt.a-10)}function Hr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Oa)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=Ua(e.charCodeAt(o)),c=Ua(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Ne(e){return Ia(bn(e))}function Na(e){return qt(e),Ia(bn(Uint8Array.from(e).reverse()))}function he(e,t){return Hr(e.toString(16).padStart(t*2,"0"))}function Ta(e,t){return he(e,t).reverse()}function De(e,t,n){let r;if(typeof t=="string")try{r=Hr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(tr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function le(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];qt(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}function lo(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const ho=e=>typeof e=="bigint"&&uo<=e;function bo(e,t,n){return ho(e)&&ho(t)&&ho(n)&&t<=e&&e<n}function Tn(e,t,n,r){if(!bo(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function rr(e){let t;for(t=0;e>uo;e>>=jr,t+=1);return t}function M1(e,t){return e>>BigInt(t)&jr}const gn=e=>(jr<<BigInt(e))-jr,go=e=>new Uint8Array(e),Ca=e=>Uint8Array.from(e);function j1(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=go(e),i=go(e),o=0;const s=()=>{r.fill(1),i.fill(0),o=0},c=(...d)=>n(i,r,...d),a=(d=go(0))=>{i=c(Ca([0]),d),r=c(),d.length!==0&&(i=c(Ca([1]),d),r=c())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<t;){r=c();const l=r.slice();h.push(l),d+=r.length}return le(...h)};return(d,h)=>{s(),a(d);let l;for(;!(l=h(f()));)a();return s(),l}}const z1={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||tr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function ir(e,t,n={}){const r=(i,o,s)=>{const c=z1[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const Ra=()=>{throw new Error("not implemented")};function po(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}function H1(e,t){if(Ma(e)>t)throw new lb({givenSize:Ma(e),maxSize:t})}const mt={zero:48,nine:57,A:65,F:70,a:97,f:102};function $a(e){if(e>=mt.zero&&e<=mt.nine)return e-mt.zero;if(e>=mt.A&&e<=mt.F)return e-(mt.A-10);if(e>=mt.a&&e<=mt.f)return e-(mt.a-10)}function q1(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new db({size:e.length,targetSize:r,type:"Bytes"});const i=new Uint8Array(r);for(let o=0;o<r;o++){const s=n==="right";i[s?o:r-o-1]=e[s?o:e.length-o-1]}return i}function wo(e,t){if(xt(e)>t)throw new tb({givenSize:xt(e),maxSize:t})}function V1(e,t){if(typeof t=="number"&&t>0&&t>xt(e)-1)throw new ka({offset:t,position:"start",size:xt(e)})}function K1(e,t,n){if(typeof t=="number"&&typeof n=="number"&&xt(e)!==n-t)throw new ka({offset:n,position:"end",size:xt(e)})}function Fa(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new nb({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const G1="#__bigint";function yo(e,t,n){return JSON.stringify(e,(r,i)=>typeof t=="function"?t(r,i):typeof i=="bigint"?i.toString()+G1:i,n)}const Z1=new TextEncoder,W1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Y1(e,t={}){const{strict:n=!1}=t;if(!e)throw new Pa(e);if(typeof e!="string")throw new Pa(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new La(e);if(!e.startsWith("0x"))throw new La(e)}function mo(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Eo(e){return e instanceof Uint8Array?or(e):Array.isArray(e)?or(new Uint8Array(e)):e}function X1(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(wo(n,t.size),Vr(n,t.size)):n}function or(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=W1[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(wo(r,t.size),xo(r,t.size)):r}function qr(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof o=="bigint"&&n?-o-1n:0;if(o&&i>o||i<s){const f=typeof e=="bigint"?"n":"";throw new eb({max:o?`${o}${f}`:void 0,min:`${s}${f}`,signed:n,size:r,value:`${e}${f}`})}const a=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?Vr(a,r):a}function J1(e,t={}){return or(Z1.encode(e),t)}function Vr(e,t){return Fa(e,{dir:"left",size:t})}function xo(e,t){return Fa(e,{dir:"right",size:t})}function Et(e,t,n,r={}){const{strict:i}=r;V1(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return i&&K1(o,t,n),o}function xt(e){return Math.ceil((e.length-2)/2)}function Q1(e,t={}){const{strict:n=!1}=t;try{return Y1(e,{strict:n}),!0}catch{return!1}}class eb extends se{constructor({max:t,min:n,signed:r,size:i,value:o}){super(`Number \`${o}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Pa extends se{constructor(t){super(`Value \`${typeof t=="object"?yo(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class La extends se{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class tb extends se{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class ka extends se{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class nb extends se{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}const rb=new TextEncoder;function ib(e){if(!(e instanceof Uint8Array)){if(!e)throw new Kr(e);if(typeof e!="object")throw new Kr(e);if(!("BYTES_PER_ELEMENT"in e))throw new Kr(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Kr(e)}}function ob(e){return e instanceof Uint8Array?e:typeof e=="string"?cb(e):sb(e)}function sb(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function cb(e,t={}){const{size:n}=t;let r=e;n&&(wo(e,n),r=xo(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const o=i.length/2,s=new Uint8Array(o);for(let c=0,a=0;c<o;c++){const f=$a(i.charCodeAt(a++)),u=$a(i.charCodeAt(a++));if(f===void 0||u===void 0)throw new se(`Invalid byte sequence ("${i[a-2]}${i[a-1]}" in "${i}").`);s[c]=f*16+u}return s}function ab(e,t={}){const{size:n}=t,r=rb.encode(e);return typeof n=="number"?(H1(r,n),fb(r,n)):r}function fb(e,t){return q1(e,{dir:"right",size:t})}function Ma(e){return e.length}function ub(e){try{return ib(e),!0}catch{return!1}}class Kr extends se{constructor(t){super(`Value \`${typeof t=="object"?yo(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class lb extends se{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class db extends se{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function ja(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=va(ob(e));return n==="Bytes"?r:or(r)}class hb extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const vo={checksum:new hb(8192)}.checksum;function za(e,t={}){const{compressed:n}=t,{prefix:r,x:i,y:o}=e;if(n===!1||typeof i=="bigint"&&typeof o=="bigint"){if(r!==4)throw new qa({prefix:r,cause:new mb});return}if(n===!0||typeof i=="bigint"&&typeof o>"u"){if(r!==3&&r!==2)throw new qa({prefix:r,cause:new yb});return}throw new wb({publicKey:e})}function bb(e){const t=(()=>{if(Q1(e))return Ha(e);if(ub(e))return gb(e);const{prefix:n,x:r,y:i}=e;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return za(t),t}function gb(e){return Ha(or(e))}function Ha(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new Eb({publicKey:e});if(e.length===130){const r=BigInt(Et(e,0,32)),i=BigInt(Et(e,32,64));return{prefix:4,x:r,y:i}}if(e.length===132){const r=Number(Et(e,0,1)),i=BigInt(Et(e,1,33)),o=BigInt(Et(e,33,65));return{prefix:r,x:i,y:o}}const t=Number(Et(e,0,1)),n=BigInt(Et(e,1,33));return{prefix:t,x:n}}function pb(e,t={}){za(e);const{prefix:n,x:r,y:i}=e,{includePrefix:o=!0}=t;return mo(o?qr(n,{size:1}):"0x",qr(r,{size:32}),typeof i=="bigint"?qr(i,{size:32}):"0x")}class wb extends se{constructor({publicKey:t}){super(`Value \`${yo(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class qa extends se{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class yb extends se{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class mb extends se{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class Eb extends se{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${xt(Eo(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}const xb=/^0x[a-fA-F0-9]{40}$/;function Bo(e,t={}){const{strict:n=!0}=t;if(!xb.test(e))throw new Ka({address:e,cause:new Sb});if(n){if(e.toLowerCase()===e)return;if(Va(e)!==e)throw new Ka({address:e,cause:new Ab})}}function Va(e){if(vo.has(e))return vo.get(e);Bo(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=ja(ab(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const i=`0x${r.join("")}`;return vo.set(e,i),i}function vb(e,t={}){const{checksum:n=!1}=t;return Bo(e),n?Va(e):e}function Bb(e,t={}){const n=ja(`0x${pb(e).slice(4)}`).substring(26);return vb(`0x${n}`,t)}class Ka extends se{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Sb extends se{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Ab extends se{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Db=/^(.*)\[([0-9]*)\]$/,_b=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ib=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function So(e,t){if(e.length!==t.length)throw new Ub({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],o=t[r];n.push(So.encode(i,o))}return mo(...n)}(function(e){function t(n,r,i=!1){if(n==="address"){const a=r;return Bo(a),Vr(a.toLowerCase(),i?32:0)}if(n==="string")return J1(r);if(n==="bytes")return r;if(n==="bool")return Vr(X1(r),i?32:1);const o=n.match(Ib);if(o){const[a,f,u="256"]=o,d=Number.parseInt(u,10)/8;return qr(r,{size:i?32:d,signed:f==="int"})}const s=n.match(_b);if(s){const[a,f]=s;if(Number.parseInt(f,10)!==(r.length-2)/2)throw new Ob({expectedSize:Number.parseInt(f,10),value:r});return xo(r,i?32:0)}const c=n.match(Db);if(c&&Array.isArray(r)){const[a,f]=c,u=[];for(let d=0;d<r.length;d++)u.push(t(f,r[d],!0));return u.length===0?"0x":mo(...u)}throw new Nb(n)}e.encode=t})(So||(So={}));class Ob extends se{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${xt(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Ub extends se{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Nb extends se{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Ga extends kr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Pr(t);const r=nt(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),We(o)}update(t){return kt(this),this.iHash.update(t),this}digestInto(t){kt(this),tt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:c}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sr=(e,t,n)=>new Ga(e,t).update(n).digest();sr.create=(e,t)=>new Ga(e,t);const Pe=BigInt(0),Te=BigInt(1),pn=BigInt(2),Tb=BigInt(3),Za=BigInt(4),Wa=BigInt(5),Ya=BigInt(8);function Ce(e,t){const n=e%t;return n>=Pe?n:t+n}function Ye(e,t,n){let r=e;for(;t-- >Pe;)r*=r,r%=n;return r}function Ao(e,t){if(e===Pe)throw new Error("invert: expected non-zero number");if(t<=Pe)throw new Error("invert: expected positive modulus, got "+t);let n=Ce(e,t),r=t,i=Pe,o=Te;for(;n!==Pe;){const c=r/n,a=r%n,f=i-o*c;r=n,n=a,i=o,o=f}if(r!==Te)throw new Error("invert: does not exist");return Ce(i,t)}function Xa(e,t){const n=(e.ORDER+Te)/Za,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Cb(e,t){const n=(e.ORDER-Wa)/Ya,r=e.mul(t,pn),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,pn),i),c=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function Rb(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Te,n=0;for(;t%pn===Pe;)t/=pn,n++;let r=pn;const i=Vt(e);for(;Zr(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Xa;let o=i.pow(r,t);const s=(t+Te)/pn;return function(a,f){if(a.is0(f))return f;if(Zr(a,f)!==1)throw new Error("Cannot find square root");let u=n,d=a.mul(a.ONE,o),h=a.pow(f,t),l=a.pow(f,s);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let g=1,w=a.sqr(h);for(;!a.eql(w,a.ONE);)if(g++,w=a.sqr(w),g===u)throw new Error("Cannot find square root");const x=Te<<BigInt(u-g-1),I=a.pow(d,x);u=g,d=a.sqr(I),h=a.mul(h,d),l=a.mul(l,I)}return l}}function $b(e){return e%Za===Tb?Xa:e%Ya===Wa?Cb:Rb(e)}const Fb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ja(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Fb.reduce((r,i)=>(r[i]="function",r),t);return ir(e,n)}function Gr(e,t,n){if(n<Pe)throw new Error("invalid exponent, negatives unsupported");if(n===Pe)return e.ONE;if(n===Te)return t;let r=e.ONE,i=t;for(;n>Pe;)n&Te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Te;return r}function wn(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function Zr(e,t){const n=(e.ORDER-Te)/pn,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Qa(e,t){t!==void 0&&st(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vt(e,t,n=!1,r={}){if(e<=Pe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=Qa(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:gn(i),ZERO:Pe,ONE:Te,create:a=>Ce(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return Pe<=a&&a<e},is0:a=>a===Pe,isOdd:a=>(a&Te)===Te,neg:a=>Ce(-a,e),eql:(a,f)=>a===f,sqr:a=>Ce(a*a,e),add:(a,f)=>Ce(a+f,e),sub:(a,f)=>Ce(a-f,e),mul:(a,f)=>Ce(a*f,e),pow:(a,f)=>Gr(c,a,f),div:(a,f)=>Ce(a*Ao(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>Ao(a,e),sqrt:r.sqrt||(a=>(s||(s=$b(e)),s(c,a))),toBytes:a=>n?Ta(a,o):he(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?Na(a):Ne(a)},invertBatch:a=>wn(c,a),cmov:(a,f,u)=>u?f:a});return Object.freeze(c)}function ef(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Do(e){const t=ef(e);return t+Math.ceil(t/2)}function tf(e,t,n=!1){const r=e.length,i=ef(t),o=Do(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?Na(e):Ne(e),c=Ce(s,t-Te)+Te;return n?Ta(c,i):he(c,i)}const nf=BigInt(0),_o=BigInt(1);function Io(e,t){const n=t.negate();return e?n:t}function rf(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Oo(e,t){rf(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=gn(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function of(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=_o);const f=t*r,u=f+Math.abs(c)-1,d=c===0,h=c<0,l=t%2!==0;return{nextN:a,offset:u,isZero:d,isNeg:h,isNegF:l,offsetF:f}}function Pb(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Lb(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Uo=new WeakMap,sf=new WeakMap;function No(e){return sf.get(e)||1}function kb(e,t){return{constTimeNegate:Io,hasPrecomputes(n){return No(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>nf;)r&_o&&(i=i.add(o)),o=o.double(),r>>=_o;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=Oo(r,t),s=[];let c=n,a=c;for(let f=0;f<i;f++){a=c,s.push(a);for(let u=1;u<o;u++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){let o=e.ZERO,s=e.BASE;const c=Oo(n,t);for(let a=0;a<c.windows;a++){const{nextN:f,offset:u,isZero:d,isNeg:h,isNegF:l,offsetF:g}=of(i,a,c);i=f,d?s=s.add(Io(l,r[g])):o=o.add(Io(h,r[u]))}return{p:o,f:s}},wNAFUnsafe(n,r,i,o=e.ZERO){const s=Oo(n,t);for(let c=0;c<s.windows&&i!==nf;c++){const{nextN:a,offset:f,isZero:u,isNeg:d}=of(i,c,s);if(i=a,!u){const h=r[f];o=o.add(d?h.negate():h)}}return o},getPrecomputes(n,r,i){let o=Uo.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Uo.set(r,i(o))),o},wNAFCached(n,r,i){const o=No(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=No(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){rf(r,t),sf.set(n,r),Uo.delete(n)}}}function Mb(e,t,n,r){Pb(n,e),Lb(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=rr(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=gn(a),u=new Array(Number(f)+1).fill(s),d=Math.floor((t.BITS-1)/a)*a;let h=s;for(let l=d;l>=0;l-=a){u.fill(s);for(let w=0;w<o;w++){const x=r[w],I=Number(x>>BigInt(l)&f);u[I]=u[I].add(n[w])}let g=s;for(let w=u.length-1,x=s;w>0;w--)x=x.add(u[w]),g=g.add(x);if(h=h.add(g),l!==0)for(let w=0;w<a;w++)h=h.double()}return h}function cf(e){return Ja(e.Fp),ir(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Qa(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function af(e){e.lowS!==void 0&&nr("lowS",e.lowS),e.prehash!==void 0&&nr("prehash",e.prehash)}function jb(e){const t=cf(e);ir(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class zb extends Error{constructor(t=""){super(t)}}const vt={Err:zb,_tlv:{encode:(e,t)=>{const{Err:n}=vt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=zr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?zr(i.length/2|128):"";return zr(e)+o+i+t},decode(e,t){const{Err:n}=vt;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=vt;if(e<rt)throw new t("integer: negative integers are not allowed");let n=zr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=vt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ne(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=vt,i=De("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=vt,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}};function To(e,t){return bn(he(e,t))}const rt=BigInt(0),oe=BigInt(1),Kt=BigInt(2),cr=BigInt(3),Co=BigInt(4);function Ro(e){const t=jb(e),{Fp:n}=t,r=Vt(t.n,t.nBitLength),i=t.toBytes||((B,E,U)=>{const T=E.toAffine();return le(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),o=t.fromBytes||(B=>{const E=B.subarray(1),U=n.fromBytes(E.subarray(0,n.BYTES)),T=n.fromBytes(E.subarray(n.BYTES,2*n.BYTES));return{x:U,y:T}});function s(B){const{a:E,b:U}=t,T=n.sqr(B),P=n.mul(T,B);return n.add(n.add(P,n.mul(B,E)),U)}function c(B,E){const U=n.sqr(E),T=s(B);return n.eql(U,T)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,cr),Co),f=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,f)))throw new Error("bad curve params: a or b");function u(B){return bo(B,oe,t.n)}function d(B){const{allowedPrivateKeyLengths:E,nByteLength:U,wrapPrivateKey:T,n:P}=t;if(E&&typeof B!="bigint"){if(tr(B)&&(B=bn(B)),typeof B!="string"||!E.includes(B.length))throw new Error("invalid private key");B=B.padStart(U*2,"0")}let L;try{L=typeof B=="bigint"?B:Ne(De("private key",B,U))}catch{throw new Error("invalid private key, expected hex or "+U+" bytes, got "+typeof B)}return T&&(L=Ce(L,P)),Tn("private key",L,oe,P),L}function h(B){if(!(B instanceof w))throw new Error("ProjectivePoint expected")}const l=po((B,E)=>{const{px:U,py:T,pz:P}=B;if(n.eql(P,n.ONE))return{x:U,y:T};const L=B.is0();E==null&&(E=L?n.ONE:n.inv(P));const R=n.mul(U,E),q=n.mul(T,E),z=n.mul(P,E);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(z,n.ONE))throw new Error("invZ was invalid");return{x:R,y:q}}),g=po(B=>{if(B.is0()){if(t.allowInfinityPoint&&!n.is0(B.py))return;throw new Error("bad point: ZERO")}const{x:E,y:U}=B.toAffine();if(!n.isValid(E)||!n.isValid(U))throw new Error("bad point: x or y not FE");if(!c(E,U))throw new Error("bad point: equation left != right");if(!B.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor(E,U,T){if(E==null||!n.isValid(E))throw new Error("x required");if(U==null||!n.isValid(U)||n.is0(U))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required");this.px=E,this.py=U,this.pz=T,Object.freeze(this)}static fromAffine(E){const{x:U,y:T}=E||{};if(!E||!n.isValid(U)||!n.isValid(T))throw new Error("invalid affine point");if(E instanceof w)throw new Error("projective point not allowed");const P=L=>n.eql(L,n.ZERO);return P(U)&&P(T)?w.ZERO:new w(U,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const U=wn(n,E.map(T=>T.pz));return E.map((T,P)=>T.toAffine(U[P])).map(w.fromAffine)}static fromHex(E){const U=w.fromAffine(o(De("pointHex",E)));return U.assertValidity(),U}static fromPrivateKey(E){return w.BASE.multiply(d(E))}static msm(E,U){return Mb(w,r,E,U)}_setWindowSize(E){$.setWindowSize(this,E)}assertValidity(){g(this)}hasEvenY(){const{y:E}=this.toAffine();if(n.isOdd)return!n.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){h(E);const{px:U,py:T,pz:P}=this,{px:L,py:R,pz:q}=E,z=n.eql(n.mul(U,q),n.mul(L,P)),m=n.eql(n.mul(T,q),n.mul(R,P));return z&&m}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:E,b:U}=t,T=n.mul(U,cr),{px:P,py:L,pz:R}=this;let q=n.ZERO,z=n.ZERO,m=n.ZERO,b=n.mul(P,P),v=n.mul(L,L),p=n.mul(R,R),y=n.mul(P,L);return y=n.add(y,y),m=n.mul(P,R),m=n.add(m,m),q=n.mul(E,m),z=n.mul(T,p),z=n.add(q,z),q=n.sub(v,z),z=n.add(v,z),z=n.mul(q,z),q=n.mul(y,q),m=n.mul(T,m),p=n.mul(E,p),y=n.sub(b,p),y=n.mul(E,y),y=n.add(y,m),m=n.add(b,b),b=n.add(m,b),b=n.add(b,p),b=n.mul(b,y),z=n.add(z,b),p=n.mul(L,R),p=n.add(p,p),b=n.mul(p,y),q=n.sub(q,b),m=n.mul(p,v),m=n.add(m,m),m=n.add(m,m),new w(q,z,m)}add(E){h(E);const{px:U,py:T,pz:P}=this,{px:L,py:R,pz:q}=E;let z=n.ZERO,m=n.ZERO,b=n.ZERO;const v=t.a,p=n.mul(t.b,cr);let y=n.mul(U,L),S=n.mul(T,R),D=n.mul(P,q),_=n.add(U,T),O=n.add(L,R);_=n.mul(_,O),O=n.add(y,S),_=n.sub(_,O),O=n.add(U,P);let C=n.add(L,q);return O=n.mul(O,C),C=n.add(y,D),O=n.sub(O,C),C=n.add(T,P),z=n.add(R,q),C=n.mul(C,z),z=n.add(S,D),C=n.sub(C,z),b=n.mul(v,O),z=n.mul(p,D),b=n.add(z,b),z=n.sub(S,b),b=n.add(S,b),m=n.mul(z,b),S=n.add(y,y),S=n.add(S,y),D=n.mul(v,D),O=n.mul(p,O),S=n.add(S,D),D=n.sub(y,D),D=n.mul(v,D),O=n.add(O,D),y=n.mul(S,O),m=n.add(m,y),y=n.mul(C,O),z=n.mul(_,z),z=n.sub(z,y),y=n.mul(_,S),b=n.mul(C,b),b=n.add(b,y),new w(z,m,b)}subtract(E){return this.add(E.negate())}is0(){return this.equals(w.ZERO)}wNAF(E){return $.wNAFCached(this,E,w.normalizeZ)}multiplyUnsafe(E){const{endo:U,n:T}=t;Tn("scalar",E,rt,T);const P=w.ZERO;if(E===rt)return P;if(this.is0()||E===oe)return this;if(!U||$.hasPrecomputes(this))return $.wNAFCachedUnsafe(this,E,w.normalizeZ);let{k1neg:L,k1:R,k2neg:q,k2:z}=U.splitScalar(E),m=P,b=P,v=this;for(;R>rt||z>rt;)R&oe&&(m=m.add(v)),z&oe&&(b=b.add(v)),v=v.double(),R>>=oe,z>>=oe;return L&&(m=m.negate()),q&&(b=b.negate()),b=new w(n.mul(b.px,U.beta),b.py,b.pz),m.add(b)}multiply(E){const{endo:U,n:T}=t;Tn("scalar",E,oe,T);let P,L;if(U){const{k1neg:R,k1:q,k2neg:z,k2:m}=U.splitScalar(E);let{p:b,f:v}=this.wNAF(q),{p,f:y}=this.wNAF(m);b=$.constTimeNegate(R,b),p=$.constTimeNegate(z,p),p=new w(n.mul(p.px,U.beta),p.py,p.pz),P=b.add(p),L=v.add(y)}else{const{p:R,f:q}=this.wNAF(E);P=R,L=q}return w.normalizeZ([P,L])[0]}multiplyAndAddUnsafe(E,U,T){const P=w.BASE,L=(q,z)=>z===rt||z===oe||!q.equals(P)?q.multiplyUnsafe(z):q.multiply(z),R=L(this,U).add(L(E,T));return R.is0()?void 0:R}toAffine(E){return l(this,E)}isTorsionFree(){const{h:E,isTorsionFree:U}=t;if(E===oe)return!0;if(U)return U(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:U}=t;return E===oe?this:U?U(w,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return nr("isCompressed",E),this.assertValidity(),i(w,this,E)}toHex(E=!0){return nr("isCompressed",E),bn(this.toRawBytes(E))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const{endo:x,nBitLength:I}=t,$=kb(w,x?Math.ceil(I/2):I);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:s,isWithinCurveOrder:u}}function Hb(e){const t=cf(e);return ir(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qb(e){const t=Hb(e),{Fp:n,n:r,nByteLength:i,nBitLength:o}=t,s=n.BYTES+1,c=2*n.BYTES+1;function a(p){return Ce(p,r)}function f(p){return Ao(p,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:l}=Ro({...t,toBytes(p,y,S){const D=y.toAffine(),_=n.toBytes(D.x),O=le;return nr("isCompressed",S),S?O(Uint8Array.from([y.hasEvenY()?2:3]),_):O(Uint8Array.from([4]),_,n.toBytes(D.y))},fromBytes(p){const y=p.length,S=p[0],D=p.subarray(1);if(y===s&&(S===2||S===3)){const _=Ne(D);if(!bo(_,oe,n.ORDER))throw new Error("Point is not on curve");const O=h(_);let C;try{C=n.sqrt(O)}catch(k){const F=k instanceof Error?": "+k.message:"";throw new Error("Point is not on curve"+F)}const M=(C&oe)===oe;return(S&1)===1!==M&&(C=n.neg(C)),{x:_,y:C}}else if(y===c&&S===4){const _=n.fromBytes(D.subarray(0,n.BYTES)),O=n.fromBytes(D.subarray(n.BYTES,2*n.BYTES));return{x:_,y:O}}else{const _=s,O=c;throw new Error("invalid Point, expected length of "+_+", or uncompressed "+O+", got "+y)}}});function g(p){const y=r>>oe;return p>y}function w(p){return g(p)?a(-p):p}const x=(p,y,S)=>Ne(p.slice(y,S));class I{constructor(y,S,D){Tn("r",y,oe,r),Tn("s",S,oe,r),this.r=y,this.s=S,D!=null&&(this.recovery=D),Object.freeze(this)}static fromCompact(y){const S=i;return y=De("compactSignature",y,S*2),new I(x(y,0,S),x(y,S,2*S))}static fromDER(y){const{r:S,s:D}=vt.toSig(De("DER",y));return new I(S,D)}assertValidity(){}addRecoveryBit(y){return new I(this.r,this.s,y)}recoverPublicKey(y){const{r:S,s:D,recovery:_}=this,O=P(De("msgHash",y));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const C=_===2||_===3?S+t.n:S;if(C>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(_&1)===0?"02":"03",N=u.fromHex(M+To(C,n.BYTES)),k=f(C),F=a(-O*k),j=a(D*k),H=u.BASE.multiplyAndAddUnsafe(N,F,j);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Hr(this.toDERHex())}toDERHex(){return vt.hexFromSig(this)}toCompactRawBytes(){return Hr(this.toCompactHex())}toCompactHex(){const y=i;return To(this.r,y)+To(this.s,y)}}const $={isValidPrivateKey(p){try{return d(p),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const p=Do(t.n);return tf(t.randomBytes(p),t.n)},precompute(p=8,y=u.BASE){return y._setWindowSize(p),y.multiply(BigInt(3)),y}};function B(p,y=!0){return u.fromPrivateKey(p).toRawBytes(y)}function E(p){if(typeof p=="bigint")return!1;if(p instanceof u)return!0;const S=De("key",p).length,D=n.BYTES,_=D+1,O=2*D+1;if(!(t.allowedPrivateKeyLengths||i===_))return S===_||S===O}function U(p,y,S=!0){if(E(p)===!0)throw new Error("first arg must be private key");if(E(y)===!1)throw new Error("second arg must be public key");return u.fromHex(y).multiply(d(p)).toRawBytes(S)}const T=t.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const y=Ne(p),S=p.length*8-o;return S>0?y>>BigInt(S):y},P=t.bits2int_modN||function(p){return a(T(p))},L=gn(o);function R(p){return Tn("num < 2^"+o,p,rt,L),he(p,i)}function q(p,y,S=z){if(["recovered","canonical"].some(K=>K in S))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:_}=t;let{lowS:O,prehash:C,extraEntropy:M}=S;O==null&&(O=!0),p=De("msgHash",p),af(S),C&&(p=De("prehashed msgHash",D(p)));const N=P(p),k=d(y),F=[R(k),R(N)];if(M!=null&&M!==!1){const K=M===!0?_(n.BYTES):M;F.push(De("extraEntropy",K))}const j=le(...F),H=N;function Z(K){const W=T(K);if(!l(W))return;const Q=f(W),ee=u.BASE.multiply(W).toAffine(),ie=a(ee.x);if(ie===rt)return;const ae=a(Q*a(H+ie*k));if(ae===rt)return;let fe=(ee.x===ie?0:2)|Number(ee.y&oe),Ct=ae;return O&&g(ae)&&(Ct=w(ae),fe^=1),new I(ie,Ct,fe)}return{seed:j,k2sig:Z}}const z={lowS:t.lowS,prehash:!1},m={lowS:t.lowS,prehash:!1};function b(p,y,S=z){const{seed:D,k2sig:_}=q(p,y,S),O=t;return j1(O.hash.outputLen,O.nByteLength,O.hmac)(D,_)}u.BASE._setWindowSize(8);function v(p,y,S,D=m){const _=p;y=De("msgHash",y),S=De("publicKey",S);const{lowS:O,prehash:C,format:M}=D;if(af(D),"strict"in D)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const N=typeof _=="string"||tr(_),k=!N&&!M&&typeof _=="object"&&_!==null&&typeof _.r=="bigint"&&typeof _.s=="bigint";if(!N&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,j;try{if(k&&(F=new I(_.r,_.s)),N){try{M!=="compact"&&(F=I.fromDER(_))}catch(fe){if(!(fe instanceof vt.Err))throw fe}!F&&M!=="der"&&(F=I.fromCompact(_))}j=u.fromHex(S)}catch{return!1}if(!F||O&&F.hasHighS())return!1;C&&(y=t.hash(y));const{r:H,s:Z}=F,K=P(y),W=f(Z),Q=a(K*W),ee=a(H*W),ie=u.BASE.multiplyAndAddUnsafe(j,Q,ee)?.toAffine();return ie?a(ie.x)===H:!1}return{CURVE:t,getPublicKey:B,getSharedSecret:U,sign:b,verify:v,ProjectivePoint:u,Signature:I,utils:$}}function Vb(e,t){const n=e.ORDER;let r=rt;for(let g=n-oe;g%Kt===rt;g/=Kt)r+=oe;const i=r,o=Kt<<i-oe-oe,s=o*Kt,c=(n-oe)/s,a=(c-oe)/Kt,f=s-oe,u=o,d=e.pow(t,c),h=e.pow(t,(c+oe)/Kt);let l=(g,w)=>{let x=d,I=e.pow(w,f),$=e.sqr(I);$=e.mul($,w);let B=e.mul(g,$);B=e.pow(B,a),B=e.mul(B,I),I=e.mul(B,w),$=e.mul(B,g);let E=e.mul($,I);B=e.pow(E,u);let U=e.eql(B,e.ONE);I=e.mul($,h),B=e.mul(E,x),$=e.cmov(I,$,U),E=e.cmov(B,E,U);for(let T=i;T>oe;T--){let P=T-Kt;P=Kt<<P-oe;let L=e.pow(E,P);const R=e.eql(L,e.ONE);I=e.mul($,x),x=e.mul(x,x),L=e.mul(E,x),$=e.cmov(I,$,R),E=e.cmov(L,E,R)}return{isValid:U,value:$}};if(e.ORDER%Co===cr){const g=(e.ORDER-cr)/Co,w=e.sqrt(e.neg(t));l=(x,I)=>{let $=e.sqr(I);const B=e.mul(x,I);$=e.mul($,B);let E=e.pow($,g);E=e.mul(E,B);const U=e.mul(E,w),T=e.mul(e.sqr(E),I),P=e.eql(T,x);let L=e.cmov(U,E,P);return{isValid:P,value:L}}}return l}function ff(e,t){if(Ja(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=Vb(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,o,s,c,a,f,u,d;i=e.sqr(r),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),c=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),c=e.mul(c,t.A),o=e.sqr(s),f=e.sqr(c),a=e.mul(f,t.A),o=e.add(o,a),o=e.mul(o,s),f=e.mul(f,c),a=e.mul(f,t.B),o=e.add(o,a),u=e.mul(i,s);const{isValid:h,value:l}=n(o,f);d=e.mul(i,r),d=e.mul(d,l),u=e.cmov(u,s,h),d=e.cmov(d,l,h);const g=e.isOdd(r)===e.isOdd(d);d=e.cmov(e.neg(d),d,g);const w=wn(e,[c],!0)[0];return u=e.mul(u,w),{x:u,y:d}}}function Kb(e){return{hash:e,hmac:(t,...n)=>sr(e,t,gt(...n)),randomBytes:pt}}function Wr(e,t){const n=r=>qb({...e,...Kb(r)});return{...n(t),create:n}}const Gb=Ne;function Gt(e,t){if(ar(e),ar(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function Zb(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function ar(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Wb(e,t,n,r){qt(e),qt(t),ar(n),t.length>255&&(t=r(le(lo("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:o}=r,s=Math.ceil(n/i);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const c=le(t,Gt(t.length,1)),a=Gt(0,o),f=Gt(n,2),u=new Array(s),d=r(le(a,e,f,Gt(0,1),c));u[0]=r(le(d,Gt(1,1),c));for(let l=1;l<=s;l++){const g=[Zb(d,u[l-1]),Gt(l+1,1),c];u[l]=r(le(...g))}return le(...u).slice(0,n)}function Yb(e,t,n,r,i){if(qt(e),qt(t),ar(n),t.length>255){const o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update(lo("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(Gt(n,2)).update(t).update(Gt(t.length,1)).digest()}function uf(e,t,n){ir(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:i,m:o,hash:s,expand:c,DST:a}=n;qt(e),ar(t);const f=typeof a=="string"?lo(a):a,u=r.toString(2).length,d=Math.ceil((u+i)/8),h=t*o*d;let l;if(c==="xmd")l=Wb(e,f,h,s);else if(c==="xof")l=Yb(e,f,h,i,s);else if(c==="_internal_pass")l=e;else throw new Error('expand must be "xmd" or "xof"');const g=new Array(t);for(let w=0;w<t;w++){const x=new Array(o);for(let I=0;I<o;I++){const $=d*(I+w*o),B=l.subarray($,$+d);x[I]=Ce(Gb(B),r)}g[w]=x}return g}function lf(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,i)=>{const[o,s,c,a]=n.map(d=>d.reduce((h,l)=>e.add(e.mul(h,r),l))),[f,u]=wn(e,[s,a],!0);return r=e.mul(o,f),i=e.mul(i,e.mul(c,u)),{x:r,y:i}}}function df(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(o){return e.fromAffine(t(o))}function i(o){const s=o.clearCofactor();return s.equals(e.ZERO)?e.ZERO:(s.assertValidity(),s)}return{defaults:n,hashToCurve(o,s){const c=uf(o,2,{...n,DST:n.DST,...s}),a=r(c[0]),f=r(c[1]);return i(a.add(f))},encodeToCurve(o,s){const c=uf(o,1,{...n,DST:n.encodeDST,...s});return i(r(c[0]))},mapToCurve(o){if(!Array.isArray(o))throw new Error("expected array of bigints");for(const s of o)if(typeof s!="bigint")throw new Error("expected array of bigints");return i(r(o))}}}const hf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xb=BigInt(0),Jb=BigInt(1),$o=BigInt(2),gf=(e,t)=>(e+t/$o)/t;function Qb(e){const t=hf,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,d=Ye(u,n,t)*u%t,h=Ye(d,n,t)*u%t,l=Ye(h,$o,t)*f%t,g=Ye(l,i,t)*l%t,w=Ye(g,o,t)*g%t,x=Ye(w,c,t)*w%t,I=Ye(x,a,t)*x%t,$=Ye(I,c,t)*w%t,B=Ye($,n,t)*u%t,E=Ye(B,s,t)*g%t,U=Ye(E,r,t)*f%t,T=Ye(U,$o,t);if(!Fo.eql(Fo.sqr(T),e))throw new Error("Cannot find square root");return T}const Fo=Vt(hf,void 0,void 0,{sqrt:Qb}),e2=Wr({a:Xb,b:BigInt(7),Fp:Fo,n:bf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=bf,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Jb*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,s=BigInt("0x100000000000000000000000000000000"),c=gf(o*e,t),a=gf(-r*e,t);let f=Ce(e-c*n-a*i,t),u=Ce(-c*r-a*o,t);const d=f>s,h=u>s;if(d&&(f=t-f),h&&(u=t-u),f>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:f,k2neg:h,k2:u}}}},at);function t2(e){if(e.length!==130&&e.length!==132)throw new r2({signature:e});const t=BigInt(Et(e,0,32)),n=BigInt(Et(e,32,64)),r=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return n2(i)}catch{throw new i2({value:i})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function n2(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new o2({value:e})}class r2 extends se{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${xt(Eo(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class i2 extends se{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class o2 extends se{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}Object.freeze({1:0n,2:1n,3:2n,4:3n,5:4n,6:5n,7:6n,8:7n,9:8n,A:9n,B:10n,C:11n,D:12n,E:13n,F:14n,G:15n,H:16n,J:17n,K:18n,L:19n,M:20n,N:21n,P:22n,Q:23n,R:24n,S:25n,T:26n,U:27n,V:28n,W:29n,X:30n,Y:31n,Z:32n,a:33n,b:34n,c:35n,d:36n,e:37n,f:38n,g:39n,h:40n,i:41n,j:42n,k:43n,m:44n,n:45n,o:46n,p:47n,q:48n,r:49n,s:50n,t:51n,u:52n,v:53n,w:54n,x:55n,y:56n,z:57n}),Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]),{...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))};const s2=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),be=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),V=new Uint32Array(32);function Zt(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=V[2*e],f=V[2*e+1],u=V[2*t],d=V[2*t+1],h=V[2*n],l=V[2*n+1],g=V[2*r],w=V[2*r+1],x=ro(a,u,s);f=io(x,f,d,c),a=x|0,{Dh:w,Dl:g}={Dh:w^f,Dl:g^a},{Dh:w,Dl:g}={Dh:o1(w,g),Dl:s1(w)},{h:l,l:h}=et(l,h,w,g),{Bh:d,Bl:u}={Bh:d^l,Bl:u^h},{Bh:d,Bl:u}={Bh:Pt(d,u,24),Bl:Lt(d,u,24)},V[2*e]=a,V[2*e+1]=f,V[2*t]=u,V[2*t+1]=d,V[2*n]=h,V[2*n+1]=l,V[2*r]=g,V[2*r+1]=w}function Wt(e,t,n,r,i,o){const s=i[o],c=i[o+1];let a=V[2*e],f=V[2*e+1],u=V[2*t],d=V[2*t+1],h=V[2*n],l=V[2*n+1],g=V[2*r],w=V[2*r+1],x=ro(a,u,s);f=io(x,f,d,c),a=x|0,{Dh:w,Dl:g}={Dh:w^f,Dl:g^a},{Dh:w,Dl:g}={Dh:Pt(w,g,16),Dl:Lt(w,g,16)},{h:l,l:h}=et(l,h,w,g),{Bh:d,Bl:u}={Bh:d^l,Bl:u^h},{Bh:d,Bl:u}={Bh:Yn(d,u,63),Bl:Xn(d,u,63)},V[2*e]=a,V[2*e+1]=f,V[2*t]=u,V[2*t+1]=d,V[2*n]=h,V[2*n+1]=l,V[2*r]=g,V[2*r+1]=w}function c2(e,t={},n,r,i){if(st(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:s,personalization:c}=t;if(o!==void 0&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(s!==void 0&&s.length!==r)throw new Error("salt must be undefined or "+r);if(c!==void 0&&c.length!==i)throw new Error("personalization must be undefined or "+i)}class a2 extends kr{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,st(t),st(n),this.blockLen=t,this.outputLen=n,this.buffer=new Uint8Array(t),this.buffer32=Jn(this.buffer)}update(t){kt(this),t=nt(t),tt(t);const{blockLen:n,buffer:r,buffer32:i}=this,o=t.length,s=t.byteOffset,c=t.buffer;for(let a=0;a<o;){this.pos===n&&(Mt(i),this.compress(i,0,!1),Mt(i),this.pos=0);const f=Math.min(n-this.pos,o-a),u=s+a;if(f===n&&!(u%4)&&a+f<o){const d=new Uint32Array(c,u,Math.floor((o-a)/4));Mt(d);for(let h=0;a+n<o;h+=i.length,a+=n)this.length+=n,this.compress(d,h,!1);Mt(d);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,this.length+=f,a+=f}return this}digestInto(t){kt(this),oo(t,this);const{pos:n,buffer32:r}=this;this.finished=!0,We(this.buffer.subarray(n)),Mt(r),this.compress(r,0,!0),Mt(r);const i=Jn(t);this.get().forEach((o,s)=>i[s]=ht(o))}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){const{buffer:n,length:r,finished:i,destroyed:o,outputLen:s,pos:c}=this;return t||(t=new this.constructor({dkLen:s})),t.set(...this.get()),t.buffer.set(n),t.destroyed=o,t.finished=i,t.length=r,t.pos=c,t.outputLen=s,t}clone(){return this._cloneInto()}}class f2 extends a2{constructor(t={}){const n=t.dkLen===void 0?64:t.dkLen;super(128,n),this.v0l=be[0]|0,this.v0h=be[1]|0,this.v1l=be[2]|0,this.v1h=be[3]|0,this.v2l=be[4]|0,this.v2h=be[5]|0,this.v3l=be[6]|0,this.v3h=be[7]|0,this.v4l=be[8]|0,this.v4h=be[9]|0,this.v5l=be[10]|0,this.v5h=be[11]|0,this.v6l=be[12]|0,this.v6h=be[13]|0,this.v7l=be[14]|0,this.v7h=be[15]|0,c2(n,t,64,16,16);let{key:r,personalization:i,salt:o}=t,s=0;if(r!==void 0&&(r=nt(r),s=r.length),this.v0l^=this.outputLen|s<<8|65536|1<<24,o!==void 0){o=nt(o);const c=Jn(o);this.v4l^=ht(c[0]),this.v4h^=ht(c[1]),this.v5l^=ht(c[2]),this.v5h^=ht(c[3])}if(i!==void 0){i=nt(i);const c=Jn(i);this.v6l^=ht(c[0]),this.v6h^=ht(c[1]),this.v7l^=ht(c[2]),this.v7h^=ht(c[3])}if(r!==void 0){const c=new Uint8Array(this.blockLen);c.set(r),this.update(c)}}get(){let{v0l:t,v0h:n,v1l:r,v1h:i,v2l:o,v2h:s,v3l:c,v3h:a,v4l:f,v4h:u,v5l:d,v5h:h,v6l:l,v6h:g,v7l:w,v7h:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x]}set(t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x){this.v0l=t|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=o|0,this.v2h=s|0,this.v3l=c|0,this.v3h=a|0,this.v4l=f|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=l|0,this.v6h=g|0,this.v7l=w|0,this.v7h=x|0}compress(t,n,r){this.get().forEach((a,f)=>V[f]=a),V.set(be,16);let{h:i,l:o}=aa(BigInt(this.length));V[24]=be[8]^o,V[25]=be[9]^i,r&&(V[28]=~V[28],V[29]=~V[29]);let s=0;const c=s2;for(let a=0;a<12;a++)Zt(0,4,8,12,t,n+2*c[s++]),Wt(0,4,8,12,t,n+2*c[s++]),Zt(1,5,9,13,t,n+2*c[s++]),Wt(1,5,9,13,t,n+2*c[s++]),Zt(2,6,10,14,t,n+2*c[s++]),Wt(2,6,10,14,t,n+2*c[s++]),Zt(3,7,11,15,t,n+2*c[s++]),Wt(3,7,11,15,t,n+2*c[s++]),Zt(0,5,10,15,t,n+2*c[s++]),Wt(0,5,10,15,t,n+2*c[s++]),Zt(1,6,11,12,t,n+2*c[s++]),Wt(1,6,11,12,t,n+2*c[s++]),Zt(2,7,8,13,t,n+2*c[s++]),Wt(2,7,8,13,t,n+2*c[s++]),Zt(3,4,9,14,t,n+2*c[s++]),Wt(3,4,9,14,t,n+2*c[s++]);this.v0l^=V[0]^V[16],this.v0h^=V[1]^V[17],this.v1l^=V[2]^V[18],this.v1h^=V[3]^V[19],this.v2l^=V[4]^V[20],this.v2h^=V[5]^V[21],this.v3l^=V[6]^V[22],this.v3h^=V[7]^V[23],this.v4l^=V[8]^V[24],this.v4h^=V[9]^V[25],this.v5l^=V[10]^V[26],this.v5h^=V[11]^V[27],this.v6l^=V[12]^V[28],this.v6h^=V[13]^V[29],this.v7l^=V[14]^V[30],this.v7h^=V[15]^V[31],We(V)}destroy(){this.destroyed=!0,We(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const u2=w1(e=>new f2(e));wt.slice();const l2=BigInt(0),Yr=BigInt(1),pf=BigInt(2),Cn=BigInt(3);function d2(e){const t=[];for(;e>Yr;e>>=Yr)(e&Yr)===l2?t.unshift(0):(e&Cn)===Cn?(t.unshift(-1),e+=Yr):t.unshift(1);return t}function h2(e){const{Fp:t,Fr:n,Fp2:r,Fp6:i,Fp12:o}=e.fields,s=e.params.xNegative,c=e.params.twistType,a=Ro({n:n.ORDER,...e.G1}),f=Object.assign(a,df(a.ProjectivePoint,e.G1.mapToCurve,{...e.htfDefaults,...e.G1.htfDefaults})),u=Ro({n:n.ORDER,...e.G2}),d=Object.assign(u,df(u.ProjectivePoint,e.G2.mapToCurve,{...e.htfDefaults,...e.G2.htfDefaults}));let h;if(c==="multiplicative")h=(N,k,F,j,H,Z)=>o.mul014(j,N,r.mul(k,H),r.mul(F,Z));else if(c==="divisive")h=(N,k,F,j,H,Z)=>o.mul034(j,r.mul(F,Z),r.mul(k,H),N);else throw new Error("bls: unknown twist type");const l=r.div(r.ONE,r.mul(r.ONE,pf));function g(N,k,F,j){const H=r.sqr(F),Z=r.sqr(j),K=r.mulByB(r.mul(Z,Cn)),W=r.mul(K,Cn),Q=r.sub(r.sub(r.sqr(r.add(F,j)),Z),H),ee=r.sub(K,H),ie=r.mul(r.sqr(k),Cn),ae=r.neg(Q);return N.push([ee,ie,ae]),k=r.mul(r.mul(r.mul(r.sub(H,W),k),F),l),F=r.sub(r.sqr(r.mul(r.add(H,W),l)),r.mul(r.sqr(K),Cn)),j=r.mul(H,Q),{Rx:k,Ry:F,Rz:j}}function w(N,k,F,j,H,Z){const K=r.sub(F,r.mul(Z,j)),W=r.sub(k,r.mul(H,j)),Q=r.sub(r.mul(K,H),r.mul(W,Z)),ee=r.neg(K),ie=W;N.push([Q,ee,ie]);const ae=r.sqr(W),fe=r.mul(ae,W),Ct=r.mul(ae,k),Pi=r.add(r.sub(fe,r.mul(Ct,pf)),r.mul(r.sqr(K),j));return k=r.mul(W,Pi),F=r.sub(r.mul(r.sub(Ct,Pi),K),r.mul(fe,F)),j=r.mul(j,fe),{Rx:k,Ry:F,Rz:j}}const x=d2(e.params.ateLoopSize),I=po(N=>{const k=N,{x:F,y:j}=k.toAffine(),H=F,Z=j,K=r.neg(j);let W=H,Q=Z,ee=r.ONE;const ie=[];for(const ae of x){const fe=[];({Rx:W,Ry:Q,Rz:ee}=g(fe,W,Q,ee)),ae&&({Rx:W,Ry:Q,Rz:ee}=w(fe,W,Q,ee,H,ae===-1?K:Z)),ie.push(fe)}if(e.postPrecompute){const ae=ie[ie.length-1];e.postPrecompute(W,Q,ee,H,Z,w.bind(null,ae))}return ie});function $(N,k=!1){let F=o.ONE;if(N.length){const j=N[0][0].length;for(let H=0;H<j;H++){F=o.sqr(F);for(const[Z,K,W]of N)for(const[Q,ee,ie]of Z[H])F=h(Q,ee,ie,F,K,W)}}return s&&(F=o.conjugate(F)),k?o.finalExponentiate(F):F}function B(N,k=!0){const F=[];f.ProjectivePoint.normalizeZ(N.map(({g1:j})=>j)),d.ProjectivePoint.normalizeZ(N.map(({g2:j})=>j));for(const{g1:j,g2:H}of N){if(j.equals(f.ProjectivePoint.ZERO)||H.equals(d.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");j.assertValidity(),H.assertValidity();const Z=j.toAffine();F.push([I(H),Z.x,Z.y])}return $(F,k)}function E(N,k,F=!0){return B([{g1:N,g2:k}],F)}const U={randomPrivateKey:()=>{const N=Do(n.ORDER);return tf(e.randomBytes(N),n.ORDER)},calcPairingPrecomputes:I},{ShortSignature:T}=e.G1,{Signature:P}=e.G2;function L(N){return N instanceof f.ProjectivePoint?N:f.ProjectivePoint.fromHex(N)}function R(N,k){return N instanceof f.ProjectivePoint?N:f.hashToCurve(De("point",N),k)}function q(N){return N instanceof d.ProjectivePoint?N:P.fromHex(N)}function z(N,k){return N instanceof d.ProjectivePoint?N:d.hashToCurve(De("point",N),k)}function m(N){return f.ProjectivePoint.fromPrivateKey(N).toRawBytes(!0)}function b(N){return d.ProjectivePoint.fromPrivateKey(N).toRawBytes(!0)}function v(N,k,F){const j=z(N,F);j.assertValidity();const H=j.multiply(f.normPrivateKeyToScalar(k));return N instanceof d.ProjectivePoint?H:P.toRawBytes(H)}function p(N,k,F){const j=R(N,F);j.assertValidity();const H=j.multiply(f.normPrivateKeyToScalar(k));return N instanceof f.ProjectivePoint?H:T.toRawBytes(H)}function y(N,k,F,j){const H=L(F),Z=z(k,j),K=f.ProjectivePoint.BASE,W=q(N),Q=B([{g1:H.negate(),g2:Z},{g1:K,g2:W}]);return o.eql(Q,o.ONE)}function S(N,k,F,j){const H=q(F),Z=R(k,j),K=d.ProjectivePoint.BASE,W=L(N),Q=B([{g1:Z,g2:H},{g1:W,g2:K.negate()}]);return o.eql(Q,o.ONE)}function D(N){if(!Array.isArray(N)||N.length===0)throw new Error("expected non-empty array")}function _(N){D(N);const F=N.map(L).reduce((j,H)=>j.add(H),f.ProjectivePoint.ZERO);return N[0]instanceof f.ProjectivePoint?(F.assertValidity(),F):F.toRawBytes(!0)}function O(N){D(N);const F=N.map(q).reduce((j,H)=>j.add(H),d.ProjectivePoint.ZERO);return N[0]instanceof d.ProjectivePoint?(F.assertValidity(),F):P.toRawBytes(F)}function C(N){D(N);const F=N.map(L).reduce((j,H)=>j.add(H),f.ProjectivePoint.ZERO);return N[0]instanceof f.ProjectivePoint?(F.assertValidity(),F):T.toRawBytes(F)}function M(N,k,F,j){if(D(k),F.length!==k.length)throw new Error("amount of public keys and messages should be equal");const H=q(N),Z=k.map(ee=>z(ee,j)),K=F.map(L),W=new Map;for(let ee=0;ee<K.length;ee++){const ie=K[ee],ae=Z[ee];let fe=W.get(ae);fe===void 0&&(fe=[],W.set(ae,fe)),fe.push(ie)}const Q=[];try{for(const[ee,ie]of W){const ae=ie.reduce((fe,Ct)=>fe.add(Ct));Q.push({g1:ae,g2:ee})}return Q.push({g1:f.ProjectivePoint.BASE.negate(),g2:H}),o.eql(B(Q),o.ONE)}catch{return!1}}return f.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:m,getPublicKeyForShortSignatures:b,sign:v,signShortSignature:p,verify:y,verifyBatch:M,verifyShortSignature:S,aggregatePublicKeys:_,aggregateSignatures:O,aggregateShortSignatures:C,millerLoopBatch:$,pairing:E,pairingBatch:B,G1:f,G2:d,Signature:P,ShortSignature:T,fields:{Fr:n,Fp:t,Fp2:r,Fp6:i,Fp12:o},params:{ateLoopSize:e.params.ateLoopSize,r:e.params.r,G1b:e.G1.b,G2b:e.G2.b},utils:U}}const b2=BigInt(0),Rn=BigInt(1),Bt=BigInt(2),wf=BigInt(3);function Po(e,t,n,r,i=1,o){const s=BigInt(o===void 0?r:o),c=n**BigInt(r),a=[];for(let f=0;f<i;f++){const u=BigInt(f+1),d=[];for(let h=0,l=Rn;h<r;h++){const g=(u*l-u)/s%c;d.push(e.pow(t,g)),l*=n}a.push(d)}return a}function g2(e,t,n){const r=t.pow(n,(e.ORDER-Rn)/wf),i=t.pow(n,(e.ORDER-Rn)/Bt);function o(h,l){const g=t.mul(t.frobeniusMap(h,1),r),w=t.mul(t.frobeniusMap(l,1),i);return[g,w]}const s=t.pow(n,(e.ORDER**Bt-Rn)/wf),c=t.pow(n,(e.ORDER**Bt-Rn)/Bt);if(!t.eql(c,t.neg(t.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function a(h,l){return[t.mul(h,s),t.neg(l)]}const f=h=>(l,g)=>{const w=g.toAffine(),x=h(w.x,w.y);return l.fromAffine({x:x[0],y:x[1]})},u=f(o),d=f(a);return{psi:o,psi2:a,G2psi:u,G2psi2:d,PSI_X:r,PSI_Y:i,PSI2_X:s,PSI2_Y:c}}function p2(e){const{ORDER:t}=e,n=Vt(t),r=n.create(e.NONRESIDUE||BigInt(-1)),i=n.div(n.ONE,Bt),o=Po(n,r,n.ORDER,2)[0],s=({c0:m,c1:b},{c0:v,c1:p})=>({c0:n.add(m,v),c1:n.add(b,p)}),c=({c0:m,c1:b},{c0:v,c1:p})=>({c0:n.sub(m,v),c1:n.sub(b,p)}),a=({c0:m,c1:b},v)=>{if(typeof v=="bigint")return{c0:n.mul(m,v),c1:n.mul(b,v)};const{c0:p,c1:y}=v;let S=n.mul(m,p),D=n.mul(b,y);const _=n.sub(S,D),O=n.sub(n.mul(n.add(m,b),n.add(p,y)),n.add(S,D));return{c0:_,c1:O}},f=({c0:m,c1:b})=>{const v=n.add(m,b),p=n.sub(m,b),y=n.add(m,m);return{c0:n.mul(v,p),c1:n.mul(y,b)}},u=m=>{if(m.length!==2)throw new Error("invalid tuple");const b=m.map(v=>n.create(v));return{c0:b[0],c1:b[1]}},d=t*t,h=u(e.FP2_NONRESIDUE),l={ORDER:d,isLE:n.isLE,NONRESIDUE:h,BITS:rr(d),BYTES:Math.ceil(rr(d)/8),MASK:gn(rr(d)),ZERO:{c0:n.ZERO,c1:n.ZERO},ONE:{c0:n.ONE,c1:n.ZERO},create:m=>m,isValid:({c0:m,c1:b})=>typeof m=="bigint"&&typeof b=="bigint",is0:({c0:m,c1:b})=>n.is0(m)&&n.is0(b),eql:({c0:m,c1:b},{c0:v,c1:p})=>n.eql(m,v)&&n.eql(b,p),neg:({c0:m,c1:b})=>({c0:n.neg(m),c1:n.neg(b)}),pow:(m,b)=>Gr(l,m,b),invertBatch:m=>wn(l,m),add:s,sub:c,mul:a,sqr:f,addN:s,subN:c,mulN:a,sqrN:f,div:(m,b)=>l.mul(m,typeof b=="bigint"?n.inv(n.create(b)):l.inv(b)),inv:({c0:m,c1:b})=>{const v=n.inv(n.create(m*m+b*b));return{c0:n.mul(v,n.create(m)),c1:n.mul(v,n.create(-b))}},sqrt:m=>{if(e.Fp2sqrt)return e.Fp2sqrt(m);const{c0:b,c1:v}=m;if(n.is0(v))return Zr(n,b)===1?l.create({c0:n.sqrt(b),c1:n.ZERO}):l.create({c0:n.ZERO,c1:n.sqrt(n.div(b,r))});const p=n.sqrt(n.sub(n.sqr(b),n.mul(n.sqr(v),r)));let y=n.mul(n.add(p,b),i);Zr(n,y)===-1&&(y=n.sub(y,p));const D=n.sqrt(y),_=l.create({c0:D,c1:n.div(n.mul(v,i),D)});if(!l.eql(l.sqr(_),m))throw new Error("Cannot find square root");const O=_,C=l.neg(O),{re:M,im:N}=l.reim(O),{re:k,im:F}=l.reim(C);return N>F||N===F&&M>k?O:C},isOdd:m=>{const{re:b,im:v}=l.reim(m),p=b%Bt,y=b===b2,S=v%Bt;return BigInt(p||y&&S)==Rn},fromBytes(m){if(m.length!==l.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:n.fromBytes(m.subarray(0,n.BYTES)),c1:n.fromBytes(m.subarray(n.BYTES))}},toBytes:({c0:m,c1:b})=>le(n.toBytes(m),n.toBytes(b)),cmov:({c0:m,c1:b},{c0:v,c1:p},y)=>({c0:n.cmov(m,v,y),c1:n.cmov(b,p,y)}),reim:({c0:m,c1:b})=>({re:m,im:b}),mulByNonresidue:({c0:m,c1:b})=>l.mul({c0:m,c1:b},h),mulByB:e.Fp2mulByB,fromBigTuple:u,frobeniusMap:({c0:m,c1:b},v)=>({c0:m,c1:n.mul(b,o[v%2])})},g=({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>({c0:l.add(m,p),c1:l.add(b,y),c2:l.add(v,S)}),w=({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>({c0:l.sub(m,p),c1:l.sub(b,y),c2:l.sub(v,S)}),x=({c0:m,c1:b,c2:v},p)=>{if(typeof p=="bigint")return{c0:l.mul(m,p),c1:l.mul(b,p),c2:l.mul(v,p)};const{c0:y,c1:S,c2:D}=p,_=l.mul(m,y),O=l.mul(b,S),C=l.mul(v,D);return{c0:l.add(_,l.mulByNonresidue(l.sub(l.mul(l.add(b,v),l.add(S,D)),l.add(O,C)))),c1:l.add(l.sub(l.mul(l.add(m,b),l.add(y,S)),l.add(_,O)),l.mulByNonresidue(C)),c2:l.sub(l.add(O,l.mul(l.add(m,v),l.add(y,D))),l.add(_,C))}},I=({c0:m,c1:b,c2:v})=>{let p=l.sqr(m),y=l.mul(l.mul(m,b),Bt),S=l.mul(l.mul(b,v),Bt),D=l.sqr(v);return{c0:l.add(l.mulByNonresidue(S),p),c1:l.add(l.mulByNonresidue(D),y),c2:l.sub(l.sub(l.add(l.add(y,l.sqr(l.add(l.sub(m,b),v))),S),p),D)}},[$,B]=Po(l,h,n.ORDER,6,2,3),E={ORDER:l.ORDER,isLE:l.isLE,BITS:3*l.BITS,BYTES:3*l.BYTES,MASK:gn(3*l.BITS),ZERO:{c0:l.ZERO,c1:l.ZERO,c2:l.ZERO},ONE:{c0:l.ONE,c1:l.ZERO,c2:l.ZERO},create:m=>m,isValid:({c0:m,c1:b,c2:v})=>l.isValid(m)&&l.isValid(b)&&l.isValid(v),is0:({c0:m,c1:b,c2:v})=>l.is0(m)&&l.is0(b)&&l.is0(v),neg:({c0:m,c1:b,c2:v})=>({c0:l.neg(m),c1:l.neg(b),c2:l.neg(v)}),eql:({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S})=>l.eql(m,p)&&l.eql(b,y)&&l.eql(v,S),sqrt:Ra,div:(m,b)=>E.mul(m,typeof b=="bigint"?n.inv(n.create(b)):E.inv(b)),pow:(m,b)=>Gr(E,m,b),invertBatch:m=>wn(E,m),add:g,sub:w,mul:x,sqr:I,addN:g,subN:w,mulN:x,sqrN:I,inv:({c0:m,c1:b,c2:v})=>{let p=l.sub(l.sqr(m),l.mulByNonresidue(l.mul(v,b))),y=l.sub(l.mulByNonresidue(l.sqr(v)),l.mul(m,b)),S=l.sub(l.sqr(b),l.mul(m,v)),D=l.inv(l.add(l.mulByNonresidue(l.add(l.mul(v,y),l.mul(b,S))),l.mul(m,p)));return{c0:l.mul(D,p),c1:l.mul(D,y),c2:l.mul(D,S)}},fromBytes:m=>{if(m.length!==E.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:l.fromBytes(m.subarray(0,l.BYTES)),c1:l.fromBytes(m.subarray(l.BYTES,2*l.BYTES)),c2:l.fromBytes(m.subarray(2*l.BYTES))}},toBytes:({c0:m,c1:b,c2:v})=>le(l.toBytes(m),l.toBytes(b),l.toBytes(v)),cmov:({c0:m,c1:b,c2:v},{c0:p,c1:y,c2:S},D)=>({c0:l.cmov(m,p,D),c1:l.cmov(b,y,D),c2:l.cmov(v,S,D)}),fromBigSix:m=>{if(!Array.isArray(m)||m.length!==6)throw new Error("invalid Fp6 usage");return{c0:l.fromBigTuple(m.slice(0,2)),c1:l.fromBigTuple(m.slice(2,4)),c2:l.fromBigTuple(m.slice(4,6))}},frobeniusMap:({c0:m,c1:b,c2:v},p)=>({c0:l.frobeniusMap(m,p),c1:l.mul(l.frobeniusMap(b,p),$[p%6]),c2:l.mul(l.frobeniusMap(v,p),B[p%6])}),mulByFp2:({c0:m,c1:b,c2:v},p)=>({c0:l.mul(m,p),c1:l.mul(b,p),c2:l.mul(v,p)}),mulByNonresidue:({c0:m,c1:b,c2:v})=>({c0:l.mulByNonresidue(v),c1:m,c2:b}),mul1:({c0:m,c1:b,c2:v},p)=>({c0:l.mulByNonresidue(l.mul(v,p)),c1:l.mul(m,p),c2:l.mul(b,p)}),mul01({c0:m,c1:b,c2:v},p,y){let S=l.mul(m,p),D=l.mul(b,y);return{c0:l.add(l.mulByNonresidue(l.sub(l.mul(l.add(b,v),y),D)),S),c1:l.sub(l.sub(l.mul(l.add(p,y),l.add(m,b)),S),D),c2:l.add(l.sub(l.mul(l.add(m,v),p),S),D)}}},U=Po(l,h,n.ORDER,12,1,6)[0],T=({c0:m,c1:b},{c0:v,c1:p})=>({c0:E.add(m,v),c1:E.add(b,p)}),P=({c0:m,c1:b},{c0:v,c1:p})=>({c0:E.sub(m,v),c1:E.sub(b,p)}),L=({c0:m,c1:b},v)=>{if(typeof v=="bigint")return{c0:E.mul(m,v),c1:E.mul(b,v)};let{c0:p,c1:y}=v,S=E.mul(m,p),D=E.mul(b,y);return{c0:E.add(S,E.mulByNonresidue(D)),c1:E.sub(E.mul(E.add(m,b),E.add(p,y)),E.add(S,D))}},R=({c0:m,c1:b})=>{let v=E.mul(m,b);return{c0:E.sub(E.sub(E.mul(E.add(E.mulByNonresidue(b),m),E.add(m,b)),v),E.mulByNonresidue(v)),c1:E.add(v,v)}};function q(m,b){const v=l.sqr(m),p=l.sqr(b);return{first:l.add(l.mulByNonresidue(p),v),second:l.sub(l.sub(l.sqr(l.add(m,b)),v),p)}}const z={ORDER:l.ORDER,isLE:E.isLE,BITS:2*E.BITS,BYTES:2*E.BYTES,MASK:gn(2*E.BITS),ZERO:{c0:E.ZERO,c1:E.ZERO},ONE:{c0:E.ONE,c1:E.ZERO},create:m=>m,isValid:({c0:m,c1:b})=>E.isValid(m)&&E.isValid(b),is0:({c0:m,c1:b})=>E.is0(m)&&E.is0(b),neg:({c0:m,c1:b})=>({c0:E.neg(m),c1:E.neg(b)}),eql:({c0:m,c1:b},{c0:v,c1:p})=>E.eql(m,v)&&E.eql(b,p),sqrt:Ra,inv:({c0:m,c1:b})=>{let v=E.inv(E.sub(E.sqr(m),E.mulByNonresidue(E.sqr(b))));return{c0:E.mul(m,v),c1:E.neg(E.mul(b,v))}},div:(m,b)=>z.mul(m,typeof b=="bigint"?n.inv(n.create(b)):z.inv(b)),pow:(m,b)=>Gr(z,m,b),invertBatch:m=>wn(z,m),add:T,sub:P,mul:L,sqr:R,addN:T,subN:P,mulN:L,sqrN:R,fromBytes:m=>{if(m.length!==z.BYTES)throw new Error("fromBytes invalid length="+m.length);return{c0:E.fromBytes(m.subarray(0,E.BYTES)),c1:E.fromBytes(m.subarray(E.BYTES))}},toBytes:({c0:m,c1:b})=>le(E.toBytes(m),E.toBytes(b)),cmov:({c0:m,c1:b},{c0:v,c1:p},y)=>({c0:E.cmov(m,v,y),c1:E.cmov(b,p,y)}),fromBigTwelve:m=>({c0:E.fromBigSix(m.slice(0,6)),c1:E.fromBigSix(m.slice(6,12))}),frobeniusMap(m,b){const{c0:v,c1:p,c2:y}=E.frobeniusMap(m.c1,b),S=U[b%12];return{c0:E.frobeniusMap(m.c0,b),c1:E.create({c0:l.mul(v,S),c1:l.mul(p,S),c2:l.mul(y,S)})}},mulByFp2:({c0:m,c1:b},v)=>({c0:E.mulByFp2(m,v),c1:E.mulByFp2(b,v)}),conjugate:({c0:m,c1:b})=>({c0:m,c1:E.neg(b)}),mul014:({c0:m,c1:b},v,p,y)=>{let S=E.mul01(m,v,p),D=E.mul1(b,y);return{c0:E.add(E.mulByNonresidue(D),S),c1:E.sub(E.sub(E.mul01(E.add(b,m),v,l.add(p,y)),S),D)}},mul034:({c0:m,c1:b},v,p,y)=>{const S=E.create({c0:l.mul(m.c0,v),c1:l.mul(m.c1,v),c2:l.mul(m.c2,v)}),D=E.mul01(b,p,y),_=E.mul01(E.add(m,b),l.add(v,p),y);return{c0:E.add(E.mulByNonresidue(D),S),c1:E.sub(_,E.add(S,D))}},_cyclotomicSquare:e.Fp12cyclotomicSquare,_cyclotomicExp:e.Fp12cyclotomicExp,finalExponentiate:e.Fp12finalExponentiate};return{Fp:n,Fp2:l,Fp6:E,Fp4Square:q,Fp12:z}}const Re=BigInt(0),Xr=BigInt(1),pe=BigInt(2),Jr=BigInt(3),fr=BigInt(4),Yt=BigInt("0xd201000000010000"),w2=rr(Yt),{Fp:G,Fp2:Y,Fp6:Lo,Fp4Square:ko,Fp12:te}=p2({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Xr,Xr],Fp2mulByB:({c0:e,c1:t})=>{const n=G.mul(e,fr),r=G.mul(t,fr);return{c0:G.sub(n,r),c1:G.add(n,r)}},Fp12cyclotomicSquare:({c0:e,c1:t})=>{const{c0:n,c1:r,c2:i}=e,{c0:o,c1:s,c2:c}=t,{first:a,second:f}=ko(n,s),{first:u,second:d}=ko(o,i),{first:h,second:l}=ko(r,c),g=Y.mulByNonresidue(l);return{c0:Lo.create({c0:Y.add(Y.mul(Y.sub(a,n),pe),a),c1:Y.add(Y.mul(Y.sub(u,r),pe),u),c2:Y.add(Y.mul(Y.sub(h,i),pe),h)}),c1:Lo.create({c0:Y.add(Y.mul(Y.add(g,o),pe),g),c1:Y.add(Y.mul(Y.add(f,s),pe),f),c2:Y.add(Y.mul(Y.add(d,c),pe),d)})}},Fp12cyclotomicExp(e,t){let n=te.ONE;for(let r=w2-1;r>=0;r--)n=te._cyclotomicSquare(n),M1(t,r)&&(n=te.mul(n,e));return n},Fp12finalExponentiate:e=>{const t=Yt,n=te.div(te.frobeniusMap(e,6),e),r=te.mul(te.frobeniusMap(n,2),n),i=te.conjugate(te._cyclotomicExp(r,t)),o=te.mul(te.conjugate(te._cyclotomicSquare(r)),i),s=te.conjugate(te._cyclotomicExp(o,t)),c=te.conjugate(te._cyclotomicExp(s,t)),a=te.mul(te.conjugate(te._cyclotomicExp(c,t)),te._cyclotomicSquare(i)),f=te.conjugate(te._cyclotomicExp(a,t)),u=te.frobeniusMap(te.mul(i,c),2),d=te.frobeniusMap(te.mul(s,r),3),h=te.frobeniusMap(te.mul(a,te.conjugate(r)),1),l=te.mul(te.mul(f,te.conjugate(o)),r);return te.mul(te.mul(te.mul(u,d),h),l)}}),yf=Vt(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),y2=lf(Y,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(e=>e.map(t=>Y.fromBigTuple(t.map(BigInt))))),m2=lf(G,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))),E2=ff(Y,{A:Y.create({c0:G.create(Re),c1:G.create(BigInt(240))}),B:Y.create({c0:G.create(BigInt(1012)),c1:G.create(BigInt(1012))}),Z:Y.create({c0:G.create(BigInt(-2)),c1:G.create(BigInt(-1))})}),x2=ff(G,{A:G.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:G.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:G.create(BigInt(11))}),{G2psi:mf,G2psi2:v2}=g2(G,Y,Y.div(Y.ONE,Y.NONRESIDUE)),Mo=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:G.ORDER,m:2,k:128,expand:"xmd",hash:at}),Qr=ur(G.toBytes(Re),{infinity:!0,compressed:!0});function ei(e){e=e.slice();const t=e[0]&224,n=!!(t>>7&1),r=!!(t>>6&1),i=!!(t>>5&1);return e[0]&=31,{compressed:n,infinity:r,sort:i,value:e}}function ur(e,t){if(e[0]&224)throw new Error("setMask: non-empty mask");return t.compressed&&(e[0]|=128),t.infinity&&(e[0]|=64),t.sort&&(e[0]|=32),e}function Ef(e){e.assertValidity();const t=e.equals(it.G1.ProjectivePoint.ZERO),{x:n,y:r}=e.toAffine();if(t)return Qr.slice();const i=G.ORDER,o=!!(r*pe/i);return ur(he(n,G.BYTES),{compressed:!0,sort:o})}function xf(e){e.assertValidity();const t=G.BYTES;if(e.equals(it.G2.ProjectivePoint.ZERO))return le(Qr,he(Re,t));const{x:n,y:r}=e.toAffine(),{re:i,im:o}=Y.reim(n),{re:s,im:c}=Y.reim(r),f=!!((c>Re?c*pe:s*pe)/G.ORDER&Xr),u=i;return le(ur(he(o,t),{sort:f,compressed:!0}),he(u,t))}const it=h2({fields:{Fp:G,Fp2:Y,Fp6:Lo,Fp12:te,Fr:yf},G1:{Fp:G,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:G.ZERO,b:fr,htfDefaults:{...Mo,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(e,t)=>{const n=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),r=new e(G.mul(t.px,n),t.py,t.pz);return t.multiplyUnsafe(Yt).negate().multiplyUnsafe(Yt).equals(r)},clearCofactor:(e,t)=>t.multiplyUnsafe(Yt).add(t),mapToCurve:e=>{const{x:t,y:n}=x2(G.create(e[0]));return m2(t,n)},fromBytes:e=>{const{compressed:t,infinity:n,sort:r,value:i}=ei(e);if(i.length===48&&t){const o=G.ORDER,s=Ne(i),c=G.create(s&G.MASK);if(n){if(c!==Re)throw new Error("G1: non-empty compressed point at infinity");return{x:Re,y:Re}}const a=G.add(G.pow(c,Jr),G.create(it.params.G1b));let f=G.sqrt(a);if(!f)throw new Error("invalid compressed G1 point");return f*pe/o!==BigInt(r)&&(f=G.neg(f)),{x:G.create(c),y:G.create(f)}}else if(i.length===96&&!t){const o=Ne(i.subarray(0,G.BYTES)),s=Ne(i.subarray(G.BYTES));if(n){if(o!==Re||s!==Re)throw new Error("G1: non-empty point at infinity");return it.G1.ProjectivePoint.ZERO.toAffine()}return{x:G.create(o),y:G.create(s)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(e,t,n)=>{const r=t.equals(e.ZERO),{x:i,y:o}=t.toAffine();if(n){if(r)return Qr.slice();const s=G.ORDER,c=!!(o*pe/s);return ur(he(i,G.BYTES),{compressed:!0,sort:c})}else return r?le(new Uint8Array([64]),new Uint8Array(2*G.BYTES-1)):le(he(i,G.BYTES),he(o,G.BYTES))},ShortSignature:{fromHex(e){const{infinity:t,sort:n,value:r}=ei(De("signatureHex",e,48)),i=G.ORDER,o=Ne(r);if(t)return it.G1.ProjectivePoint.ZERO;const s=G.create(o&G.MASK),c=G.add(G.pow(s,Jr),G.create(it.params.G1b));let a=G.sqrt(c);if(!a)throw new Error("invalid compressed G1 point");const f=BigInt(n);a*pe/i!==f&&(a=G.neg(a));const u=it.G1.ProjectivePoint.fromAffine({x:s,y:a});return u.assertValidity(),u},toRawBytes(e){return Ef(e)},toHex(e){return bn(Ef(e))}}},G2:{Fp:Y,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:Y.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:Y.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:Y.ZERO,b:Y.fromBigTuple([fr,fr]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...Mo},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:e=>{const{x:t,y:n}=E2(Y.fromBigTuple(e));return y2(t,n)},isTorsionFree:(e,t)=>t.multiplyUnsafe(Yt).negate().equals(mf(e,t)),clearCofactor:(e,t)=>{const n=Yt;let r=t.multiplyUnsafe(n).negate(),i=mf(e,t),o=t.double();return o=v2(e,o),o=o.subtract(i),i=r.add(i),i=i.multiplyUnsafe(n).negate(),o=o.add(i),o=o.subtract(r),o.subtract(t)},fromBytes:e=>{const{compressed:t,infinity:n,sort:r,value:i}=ei(e);if(!t&&!n&&r||!t&&n&&r||r&&n&&t)throw new Error("invalid encoding flag: "+(e[0]&224));const o=G.BYTES,s=(c,a,f)=>Ne(c.slice(a,f));if(i.length===96&&t){const c=it.params.G2b,a=G.ORDER;if(n){if(i.reduce((w,x)=>w!==0?x+1:x,0)>0)throw new Error("invalid compressed G2 point");return{x:Y.ZERO,y:Y.ZERO}}const f=s(i,0,o),u=s(i,o,2*o),d=Y.create({c0:G.create(u),c1:G.create(f)}),h=Y.add(Y.pow(d,Jr),c);let l=Y.sqrt(h);const g=l.c1===Re?l.c0*pe/a:l.c1*pe/a?Xr:Re;return l=r&&g>0?l:Y.neg(l),{x:d,y:l}}else if(i.length===192&&!t){if(n){if(i.reduce((d,h)=>d!==0?h+1:h,0)>0)throw new Error("invalid uncompressed G2 point");return{x:Y.ZERO,y:Y.ZERO}}const c=s(i,0,o),a=s(i,o,2*o),f=s(i,2*o,3*o),u=s(i,3*o,4*o);return{x:Y.fromBigTuple([a,c]),y:Y.fromBigTuple([u,f])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(e,t,n)=>{const{BYTES:r,ORDER:i}=G,o=t.equals(e.ZERO),{x:s,y:c}=t.toAffine();if(n){if(o)return le(Qr,he(Re,r));const a=!!(c.c1===Re?c.c0*pe/i:c.c1*pe/i);return le(ur(he(s.c1,r),{compressed:!0,sort:a}),he(s.c0,r))}else{if(o)return le(new Uint8Array([64]),new Uint8Array(4*r-1));const{re:a,im:f}=Y.reim(s),{re:u,im:d}=Y.reim(c);return le(he(f,r),he(a,r),he(d,r),he(u,r))}},Signature:{fromHex(e){const{infinity:t,sort:n,value:r}=ei(De("signatureHex",e)),i=G.ORDER,o=r.length/2;if(o!==48&&o!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const s=Ne(r.slice(0,o)),c=Ne(r.slice(o));if(t)return it.G2.ProjectivePoint.ZERO;const a=G.create(s&G.MASK),f=G.create(c),u=Y.create({c0:f,c1:a}),d=Y.add(Y.pow(u,Jr),it.params.G2b);let h=Y.sqrt(d);if(!h)throw new Error("Failed to find a square root");const{re:l,im:g}=Y.reim(h),w=BigInt(n),x=g>Re&&g*pe/i!==w,I=g===Re&&l*pe/i!==w;(x||I)&&(h=Y.neg(h));const $=it.G2.ProjectivePoint.fromAffine({x:u,y:h});return $.assertValidity(),$},toRawBytes(e){return xf(e)},toHex(e){return bn(xf(e))}}},params:{ateLoopSize:Yt,r:yf.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:Mo,hash:at,randomBytes:pt});BigInt(0),BigInt(1),BigInt(2),BigInt(8),BigInt(0),BigInt(1),BigInt(2),BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),BigInt(0),BigInt(1),BigInt(2),BigInt(3),BigInt(5),BigInt(8);const jo=BigInt(0),zo=BigInt(1);function ti(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function yn(e,t,n=""){const r=Fr(e),i=e?.length,o=t!==void 0;if(!r||o&&i!==t){const s=n&&`"${n}" `,c=o?` of length ${t}`:"",a=r?`length=${i}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+c+", got "+a)}return e}function ni(e){const t=e.toString(16);return t.length&1?"0"+t:t}function vf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?jo:BigInt("0x"+e)}function ri(e){return vf(Nn(e))}function ii(e){return tt(e),vf(Nn(Uint8Array.from(e).reverse()))}function Ho(e,t){return Lr(e.toString(16).padStart(t*2,"0"))}function qo(e,t){return Ho(e,t).reverse()}function _e(e,t,n){let r;if(typeof t=="string")try{r=Lr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Fr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const Vo=e=>typeof e=="bigint"&&jo<=e;function B2(e,t,n){return Vo(e)&&Vo(t)&&Vo(n)&&t<=e&&e<n}function Ko(e,t,n,r){if(!B2(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Bf(e){let t;for(t=0;e>jo;e>>=zo,t+=1);return t}const lr=e=>(zo<<BigInt(e))-zo;function S2(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=l=>new Uint8Array(l),i=l=>Uint8Array.of(l);let o=r(e),s=r(e),c=0;const a=()=>{o.fill(1),s.fill(0),c=0},f=(...l)=>n(s,o,...l),u=(l=r(0))=>{s=f(i(0),l),o=f(),l.length!==0&&(s=f(i(1),l),o=f())},d=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const g=[];for(;l<t;){o=f();const w=o.slice();g.push(w),l+=o.length}return gt(...g)};return(l,g)=>{a(),u(l);let w;for(;!(w=g(d()));)u();return a(),w}}function oi(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,o,s){const c=e[i];if(s&&c===void 0)return;const a=typeof c;if(a!==o||c===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${a}`)}Object.entries(t).forEach(([i,o])=>r(i,o,!1)),Object.entries(n).forEach(([i,o])=>r(i,o,!0))}function Sf(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const Le=BigInt(0),$e=BigInt(1),mn=BigInt(2),Af=BigInt(3),Df=BigInt(4),_f=BigInt(5),A2=BigInt(7),If=BigInt(8),D2=BigInt(9),Of=BigInt(16);function je(e,t){const n=e%t;return n>=Le?n:t+n}function ue(e,t,n){let r=e;for(;t-- >Le;)r*=r,r%=n;return r}function Uf(e,t){if(e===Le)throw new Error("invert: expected non-zero number");if(t<=Le)throw new Error("invert: expected positive modulus, got "+t);let n=je(e,t),r=t,i=Le,o=$e;for(;n!==Le;){const c=r/n,a=r%n,f=i-o*c;r=n,n=a,i=o,o=f}if(r!==$e)throw new Error("invert: does not exist");return je(i,t)}function Go(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Nf(e,t){const n=(e.ORDER+$e)/Df,r=e.pow(t,n);return Go(e,r,t),r}function _2(e,t){const n=(e.ORDER-_f)/If,r=e.mul(t,mn),i=e.pow(r,n),o=e.mul(t,i),s=e.mul(e.mul(o,mn),i),c=e.mul(o,e.sub(s,e.ONE));return Go(e,c,t),c}function I2(e){const t=St(e),n=Tf(e),r=n(t,t.neg(t.ONE)),i=n(t,r),o=n(t,t.neg(r)),s=(e+A2)/Of;return(c,a)=>{let f=c.pow(a,s),u=c.mul(f,r);const d=c.mul(f,i),h=c.mul(f,o),l=c.eql(c.sqr(u),a),g=c.eql(c.sqr(d),a);f=c.cmov(f,u,l),u=c.cmov(h,d,g);const w=c.eql(c.sqr(u),a),x=c.cmov(f,u,w);return Go(c,x,a),x}}function Tf(e){if(e<Af)throw new Error("sqrt is not defined for small field");let t=e-$e,n=0;for(;t%mn===Le;)t/=mn,n++;let r=mn;const i=St(e);for(;Rf(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Nf;let o=i.pow(r,t);const s=(t+$e)/mn;return function(a,f){if(a.is0(f))return f;if(Rf(a,f)!==1)throw new Error("Cannot find square root");let u=n,d=a.mul(a.ONE,o),h=a.pow(f,t),l=a.pow(f,s);for(;!a.eql(h,a.ONE);){if(a.is0(h))return a.ZERO;let g=1,w=a.sqr(h);for(;!a.eql(w,a.ONE);)if(g++,w=a.sqr(w),g===u)throw new Error("Cannot find square root");const x=$e<<BigInt(u-g-1),I=a.pow(d,x);u=g,d=a.sqr(I),h=a.mul(h,d),l=a.mul(l,I)}return l}}function O2(e){return e%Df===Af?Nf:e%If===_f?_2:e%Of===D2?I2(e):Tf(e)}const U2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function N2(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=U2.reduce((r,i)=>(r[i]="function",r),t);return oi(e,n),e}function T2(e,t,n){if(n<Le)throw new Error("invalid exponent, negatives unsupported");if(n===Le)return e.ONE;if(n===$e)return t;let r=e.ONE,i=t;for(;n>Le;)n&$e&&(r=e.mul(r,i)),i=e.sqr(i),n>>=$e;return r}function Cf(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,c,a)=>e.is0(c)?s:(r[a]=s,e.mul(s,c)),e.ONE),o=e.inv(i);return t.reduceRight((s,c,a)=>e.is0(c)?s:(r[a]=e.mul(s,r[a]),e.mul(s,c)),o),r}function Rf(e,t){const n=(e.ORDER-$e)/mn,r=e.pow(t,n),i=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function $f(e,t){t!==void 0&&st(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function St(e,t,n=!1,r={}){if(e<=Le)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,o,s=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const h=t;h.BITS&&(i=h.BITS),h.sqrt&&(o=h.sqrt),typeof h.isLE=="boolean"&&(n=h.isLE),typeof h.modFromBytes=="boolean"&&(s=h.modFromBytes),c=h.allowedLengths}else typeof t=="number"&&(i=t),r.sqrt&&(o=r.sqrt);const{nBitLength:a,nByteLength:f}=$f(e,i);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:f,MASK:lr(a),ZERO:Le,ONE:$e,allowedLengths:c,create:h=>je(h,e),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Le<=h&&h<e},is0:h=>h===Le,isValidNot0:h=>!d.is0(h)&&d.isValid(h),isOdd:h=>(h&$e)===$e,neg:h=>je(-h,e),eql:(h,l)=>h===l,sqr:h=>je(h*h,e),add:(h,l)=>je(h+l,e),sub:(h,l)=>je(h-l,e),mul:(h,l)=>je(h*l,e),pow:(h,l)=>T2(d,h,l),div:(h,l)=>je(h*Uf(l,e),e),sqrN:h=>h*h,addN:(h,l)=>h+l,subN:(h,l)=>h-l,mulN:(h,l)=>h*l,inv:h=>Uf(h,e),sqrt:o||(h=>(u||(u=O2(e)),u(d,h))),toBytes:h=>n?qo(h,f):Ho(h,f),fromBytes:(h,l=!0)=>{if(c){if(!c.includes(h.length)||h.length>f)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);const w=new Uint8Array(f);w.set(h,n?0:w.length-h.length),h=w}if(h.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+h.length);let g=n?ii(h):ri(h);if(s&&(g=je(g,e)),!l&&!d.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:h=>Cf(d,h),cmov:(h,l,g)=>g?l:h});return Object.freeze(d)}function Ff(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Pf(e){const t=Ff(e);return t+Math.ceil(t/2)}function C2(e,t,n=!1){const r=e.length,i=Ff(t),o=Pf(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=n?ii(e):ri(e),c=je(s,t-$e)+$e;return n?qo(c,i):Ho(c,i)}const $n=BigInt(0),En=BigInt(1);function si(e,t){const n=t.negate();return e?n:t}function Zo(e,t){const n=Cf(e.Fp,t.map(r=>r.Z));return t.map((r,i)=>e.fromAffine(r.toAffine(n[i])))}function Lf(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Wo(e,t){Lf(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,o=lr(e),s=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function kf(e,t,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let c=Number(e&i),a=e>>s;c>r&&(c-=o,a+=En);const f=t*r,u=f+Math.abs(c)-1,d=c===0,h=c<0,l=t%2!==0;return{nextN:a,offset:u,isZero:d,isNeg:h,isNegF:l,offsetF:f}}function R2(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function $2(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Yo=new WeakMap,Mf=new WeakMap;function Xo(e){return Mf.get(e)||1}function jf(e){if(e!==$n)throw new Error("invalid wNAF")}class F2{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let i=t;for(;n>$n;)n&En&&(r=r.add(i)),i=i.double(),n>>=En;return r}precomputeWindow(t,n){const{windows:r,windowSize:i}=Wo(n,this.bits),o=[];let s=t,c=s;for(let a=0;a<r;a++){c=s,o.push(c);for(let f=1;f<i;f++)c=c.add(s),o.push(c);s=c.double()}return o}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Wo(t,this.bits);for(let c=0;c<s.windows;c++){const{nextN:a,offset:f,isZero:u,isNeg:d,isNegF:h,offsetF:l}=kf(r,c,s);r=a,u?o=o.add(si(h,n[l])):i=i.add(si(d,n[f]))}return jf(r),{p:i,f:o}}wNAFUnsafe(t,n,r,i=this.ZERO){const o=Wo(t,this.bits);for(let s=0;s<o.windows&&r!==$n;s++){const{nextN:c,offset:a,isZero:f,isNeg:u}=kf(r,s,o);if(r=c,!f){const d=n[a];i=i.add(u?d.negate():d)}}return jf(r),i}getPrecomputes(t,n,r){let i=Yo.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(i=r(i)),Yo.set(n,i))),i}cached(t,n,r){const i=Xo(t);return this.wNAF(i,this.getPrecomputes(i,t,r),n)}unsafe(t,n,r,i){const o=Xo(t);return o===1?this._unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,r),n,i)}createCache(t,n){Lf(n,this.bits),Mf.set(t,n),Yo.delete(t)}hasCache(t){return Xo(t)!==1}}function P2(e,t,n,r){let i=t,o=e.ZERO,s=e.ZERO;for(;n>$n||r>$n;)n&En&&(o=o.add(i)),r&En&&(s=s.add(i)),i=i.double(),n>>=En,r>>=En;return{p1:o,p2:s}}function L2(e,t,n,r){R2(n,e),$2(r,t);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,c=Bf(BigInt(i));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const f=lr(a),u=new Array(Number(f)+1).fill(s),d=Math.floor((t.BITS-1)/a)*a;let h=s;for(let l=d;l>=0;l-=a){u.fill(s);for(let w=0;w<o;w++){const x=r[w],I=Number(x>>BigInt(l)&f);u[I]=u[I].add(n[w])}let g=s;for(let w=u.length-1,x=s;w>0;w--)x=x.add(u[w]),g=g.add(x);if(h=h.add(g),l!==0)for(let w=0;w<a;w++)h=h.double()}return h}function zf(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return N2(t),t}else return St(e,{isLE:n})}function k2(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const f=t[a];if(!(typeof f=="bigint"&&f>$n))throw new Error(`CURVE.${a} must be positive bigint`)}const i=zf(t.p,n.Fp,r),o=zf(t.n,n.Fn,r),c=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const a of c)if(!i.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:o}}const Hf=(e,t)=>(e+(e>=0?t:-t)/qf)/t;function M2(e,t,n){const[[r,i],[o,s]]=t,c=Hf(s*e,n),a=Hf(-i*e,n);let f=e-c*r-a*o,u=-c*i-a*s;const d=f<Dt,h=u<Dt;d&&(f=-f),h&&(u=-u);const l=lr(Math.ceil(Bf(n)/2))+Fn;if(f<Dt||f>=l||u<Dt||u>=l)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:d,k1:f,k2neg:h,k2:u}}function Jo(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Qo(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return ti(n.lowS,"lowS"),ti(n.prehash,"prehash"),n.format!==void 0&&Jo(n.format),n}class j2 extends Error{constructor(t=""){super(t)}}const At={Err:j2,_tlv:{encode:(e,t)=>{const{Err:n}=At;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=ni(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?ni(i.length/2|128):"";return ni(e)+o+i+t},decode(e,t){const{Err:n}=At;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const a=i&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const f=t.subarray(r,r+a);if(f.length!==a)throw new n("tlv.decode: length bytes not complete");if(f[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of f)s=s<<8|u;if(r+=a,s<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+s);if(c.length!==s)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=At;if(e<Dt)throw new t("integer: negative integers are not allowed");let n=ni(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=At;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return ri(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=At,i=_e("signature",e),{v:o,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,o),{v:f,l:u}=r.decode(2,a);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(f)}},hexFromSig(e){const{_tlv:t,_int:n}=At,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),o=r+i;return t.encode(48,o)}},Dt=BigInt(0),Fn=BigInt(1),qf=BigInt(2),ci=BigInt(3),z2=BigInt(4);function Pn(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let i=_e("private key",t);try{r=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function H2(e,t={}){const n=k2("weierstrass",e,t),{Fp:r,Fn:i}=n;let o=n.CURVE;const{h:s,n:c}=o;oi(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:a}=t;if(a&&(!r.is0(o.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const f=Kf(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(m,b,v){const{x:p,y}=b.toAffine(),S=r.toBytes(p);if(ti(v,"isCompressed"),v){u();const D=!r.isOdd(y);return gt(Vf(D),S)}else return gt(Uint8Array.of(4),S,r.toBytes(y))}function h(m){yn(m,void 0,"Point");const{publicKey:b,publicKeyUncompressed:v}=f,p=m.length,y=m[0],S=m.subarray(1);if(p===b&&(y===2||y===3)){const D=r.fromBytes(S);if(!r.isValid(D))throw new Error("bad point: is not on curve, wrong x");const _=w(D);let O;try{O=r.sqrt(_)}catch(N){const k=N instanceof Error?": "+N.message:"";throw new Error("bad point: is not on curve, sqrt error"+k)}u();const C=r.isOdd(O);return(y&1)===1!==C&&(O=r.neg(O)),{x:D,y:O}}else if(p===v&&y===4){const D=r.BYTES,_=r.fromBytes(S.subarray(0,D)),O=r.fromBytes(S.subarray(D,D*2));if(!x(_,O))throw new Error("bad point: is not on curve");return{x:_,y:O}}else throw new Error(`bad point: got length ${p}, expected compressed=${b} or uncompressed=${v}`)}const l=t.toBytes||d,g=t.fromBytes||h;function w(m){const b=r.sqr(m),v=r.mul(b,m);return r.add(r.add(v,r.mul(m,o.a)),o.b)}function x(m,b){const v=r.sqr(b),p=w(m);return r.eql(v,p)}if(!x(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const I=r.mul(r.pow(o.a,ci),z2),$=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(I,$)))throw new Error("bad curve params: a or b");function B(m,b,v=!1){if(!r.isValid(b)||v&&r.is0(b))throw new Error(`bad point coordinate ${m}`);return b}function E(m){if(!(m instanceof R))throw new Error("ProjectivePoint expected")}function U(m){if(!a||!a.basises)throw new Error("no endo");return M2(m,a.basises,i.ORDER)}const T=Sf((m,b)=>{const{X:v,Y:p,Z:y}=m;if(r.eql(y,r.ONE))return{x:v,y:p};const S=m.is0();b==null&&(b=S?r.ONE:r.inv(y));const D=r.mul(v,b),_=r.mul(p,b),O=r.mul(y,b);if(S)return{x:r.ZERO,y:r.ZERO};if(!r.eql(O,r.ONE))throw new Error("invZ was invalid");return{x:D,y:_}}),P=Sf(m=>{if(m.is0()){if(t.allowInfinityPoint&&!r.is0(m.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:v}=m.toAffine();if(!r.isValid(b)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!x(b,v))throw new Error("bad point: equation left != right");if(!m.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function L(m,b,v,p,y){return v=new R(r.mul(v.X,m),v.Y,v.Z),b=si(p,b),v=si(y,v),b.add(v)}class R{constructor(b,v,p){this.X=B("x",b),this.Y=B("y",v,!0),this.Z=B("z",p),Object.freeze(this)}static CURVE(){return o}static fromAffine(b){const{x:v,y:p}=b||{};if(!b||!r.isValid(v)||!r.isValid(p))throw new Error("invalid affine point");if(b instanceof R)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(p)?R.ZERO:new R(v,p,r.ONE)}static fromBytes(b){const v=R.fromAffine(g(yn(b,void 0,"point")));return v.assertValidity(),v}static fromHex(b){return R.fromBytes(_e("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,v=!0){return z.createCache(this,b),v||this.multiply(ci),this}assertValidity(){P(this)}hasEvenY(){const{y:b}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(b)}equals(b){E(b);const{X:v,Y:p,Z:y}=this,{X:S,Y:D,Z:_}=b,O=r.eql(r.mul(v,_),r.mul(S,y)),C=r.eql(r.mul(p,_),r.mul(D,y));return O&&C}negate(){return new R(this.X,r.neg(this.Y),this.Z)}double(){const{a:b,b:v}=o,p=r.mul(v,ci),{X:y,Y:S,Z:D}=this;let _=r.ZERO,O=r.ZERO,C=r.ZERO,M=r.mul(y,y),N=r.mul(S,S),k=r.mul(D,D),F=r.mul(y,S);return F=r.add(F,F),C=r.mul(y,D),C=r.add(C,C),_=r.mul(b,C),O=r.mul(p,k),O=r.add(_,O),_=r.sub(N,O),O=r.add(N,O),O=r.mul(_,O),_=r.mul(F,_),C=r.mul(p,C),k=r.mul(b,k),F=r.sub(M,k),F=r.mul(b,F),F=r.add(F,C),C=r.add(M,M),M=r.add(C,M),M=r.add(M,k),M=r.mul(M,F),O=r.add(O,M),k=r.mul(S,D),k=r.add(k,k),M=r.mul(k,F),_=r.sub(_,M),C=r.mul(k,N),C=r.add(C,C),C=r.add(C,C),new R(_,O,C)}add(b){E(b);const{X:v,Y:p,Z:y}=this,{X:S,Y:D,Z:_}=b;let O=r.ZERO,C=r.ZERO,M=r.ZERO;const N=o.a,k=r.mul(o.b,ci);let F=r.mul(v,S),j=r.mul(p,D),H=r.mul(y,_),Z=r.add(v,p),K=r.add(S,D);Z=r.mul(Z,K),K=r.add(F,j),Z=r.sub(Z,K),K=r.add(v,y);let W=r.add(S,_);return K=r.mul(K,W),W=r.add(F,H),K=r.sub(K,W),W=r.add(p,y),O=r.add(D,_),W=r.mul(W,O),O=r.add(j,H),W=r.sub(W,O),M=r.mul(N,K),O=r.mul(k,H),M=r.add(O,M),O=r.sub(j,M),M=r.add(j,M),C=r.mul(O,M),j=r.add(F,F),j=r.add(j,F),H=r.mul(N,H),K=r.mul(k,K),j=r.add(j,H),H=r.sub(F,H),H=r.mul(N,H),K=r.add(K,H),F=r.mul(j,K),C=r.add(C,F),F=r.mul(W,K),O=r.mul(Z,O),O=r.sub(O,F),F=r.mul(Z,j),M=r.mul(W,M),M=r.add(M,F),new R(O,C,M)}subtract(b){return this.add(b.negate())}is0(){return this.equals(R.ZERO)}multiply(b){const{endo:v}=t;if(!i.isValidNot0(b))throw new Error("invalid scalar: out of range");let p,y;const S=D=>z.cached(this,D,_=>Zo(R,_));if(v){const{k1neg:D,k1:_,k2neg:O,k2:C}=U(b),{p:M,f:N}=S(_),{p:k,f:F}=S(C);y=N.add(F),p=L(v.beta,M,k,D,O)}else{const{p:D,f:_}=S(b);p=D,y=_}return Zo(R,[p,y])[0]}multiplyUnsafe(b){const{endo:v}=t,p=this;if(!i.isValid(b))throw new Error("invalid scalar: out of range");if(b===Dt||p.is0())return R.ZERO;if(b===Fn)return p;if(z.hasCache(this))return this.multiply(b);if(v){const{k1neg:y,k1:S,k2neg:D,k2:_}=U(b),{p1:O,p2:C}=P2(R,p,S,_);return L(v.beta,O,C,y,D)}else return z.unsafe(p,b)}multiplyAndAddUnsafe(b,v,p){const y=this.multiplyUnsafe(v).add(b.multiplyUnsafe(p));return y.is0()?void 0:y}toAffine(b){return T(this,b)}isTorsionFree(){const{isTorsionFree:b}=t;return s===Fn?!0:b?b(R,this):z.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:b}=t;return s===Fn?this:b?b(R,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(b=!0){return ti(b,"isCompressed"),this.assertValidity(),l(R,this,b)}toHex(b=!0){return Nn(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return Zo(R,b)}static msm(b,v){return L2(R,i,b,v)}static fromPrivateKey(b){return R.BASE.multiply(Pn(i,b))}}R.BASE=new R(o.Gx,o.Gy,r.ONE),R.ZERO=new R(r.ZERO,r.ONE,r.ZERO),R.Fp=r,R.Fn=i;const q=i.BITS,z=new F2(R,t.endo?Math.ceil(q/2):q);return R.BASE.precompute(8),R}function Vf(e){return Uint8Array.of(e?2:3)}function Kf(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function q2(e,t={}){const{Fn:n}=e,r=t.randomBytes||pt,i=Object.assign(Kf(e.Fp,n),{seed:Pf(n.ORDER)});function o(l){try{return!!Pn(n,l)}catch{return!1}}function s(l,g){const{publicKey:w,publicKeyUncompressed:x}=i;try{const I=l.length;return g===!0&&I!==w||g===!1&&I!==x?!1:!!e.fromBytes(l)}catch{return!1}}function c(l=r(i.seed)){return C2(yn(l,i.seed,"seed"),n.ORDER)}function a(l,g=!0){return e.BASE.multiply(Pn(n,l)).toBytes(g)}function f(l){const g=c(l);return{secretKey:g,publicKey:a(g)}}function u(l){if(typeof l=="bigint")return!1;if(l instanceof e)return!0;const{secretKey:g,publicKey:w,publicKeyUncompressed:x}=i;if(n.allowedLengths||g===w)return;const I=_e("key",l).length;return I===w||I===x}function d(l,g,w=!0){if(u(l)===!0)throw new Error("first arg must be private key");if(u(g)===!1)throw new Error("second arg must be public key");const x=Pn(n,l);return e.fromHex(g).multiply(x).toBytes(w)}return Object.freeze({getPublicKey:a,getSharedSecret:d,keygen:f,Point:e,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:l=>Pn(n,l),precompute(l=8,g=e.BASE){return g.precompute(l,!1)}},lengths:i})}function V2(e,t,n={}){Pr(t),oi(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||pt,i=n.hmac||((v,...p)=>sr(t,v,gt(...p))),{Fp:o,Fn:s}=e,{ORDER:c,BITS:a}=s,{keygen:f,getPublicKey:u,getSharedSecret:d,utils:h,lengths:l}=q2(e,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},w="compact";function x(v){const p=c>>Fn;return v>p}function I(v,p){if(!s.isValidNot0(p))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return p}function $(v,p){Jo(p);const y=l.signature,S=p==="compact"?y:p==="recovered"?y+1:void 0;return yn(v,S,`${p} signature`)}class B{constructor(p,y,S){this.r=I("r",p),this.s=I("s",y),S!=null&&(this.recovery=S),Object.freeze(this)}static fromBytes(p,y=w){$(p,y);let S;if(y==="der"){const{r:C,s:M}=At.toSig(yn(p));return new B(C,M)}y==="recovered"&&(S=p[0],y="compact",p=p.subarray(1));const D=s.BYTES,_=p.subarray(0,D),O=p.subarray(D,D*2);return new B(s.fromBytes(_),s.fromBytes(O),S)}static fromHex(p,y){return this.fromBytes(Lr(p),y)}addRecoveryBit(p){return new B(this.r,this.s,p)}recoverPublicKey(p){const y=o.ORDER,{r:S,s:D,recovery:_}=this;if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");if(c*qf<y&&_>1)throw new Error("recovery id is ambiguous for h>1 curve");const C=_===2||_===3?S+c:S;if(!o.isValid(C))throw new Error("recovery id 2 or 3 invalid");const M=o.toBytes(C),N=e.fromBytes(gt(Vf((_&1)===0),M)),k=s.inv(C),F=U(_e("msgHash",p)),j=s.create(-F*k),H=s.create(D*k),Z=e.BASE.multiplyUnsafe(j).add(N.multiplyUnsafe(H));if(Z.is0())throw new Error("point at infinify");return Z.assertValidity(),Z}hasHighS(){return x(this.s)}toBytes(p=w){if(Jo(p),p==="der")return Lr(At.hexFromSig(this));const y=s.toBytes(this.r),S=s.toBytes(this.s);if(p==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return gt(Uint8Array.of(this.recovery),y,S)}return gt(y,S)}toHex(p){return Nn(this.toBytes(p))}assertValidity(){}static fromCompact(p){return B.fromBytes(_e("sig",p),"compact")}static fromDER(p){return B.fromBytes(_e("sig",p),"der")}normalizeS(){return this.hasHighS()?new B(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Nn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Nn(this.toBytes("compact"))}}const E=n.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const y=ri(p),S=p.length*8-a;return S>0?y>>BigInt(S):y},U=n.bits2int_modN||function(p){return s.create(E(p))},T=lr(a);function P(v){return Ko("num < 2^"+a,v,Dt,T),s.toBytes(v)}function L(v,p){return yn(v,void 0,"message"),p?yn(t(v),void 0,"prehashed message"):v}function R(v,p,y){if(["recovered","canonical"].some(j=>j in y))throw new Error("sign() legacy options not supported");const{lowS:S,prehash:D,extraEntropy:_}=Qo(y,g);v=L(v,D);const O=U(v),C=Pn(s,p),M=[P(C),P(O)];if(_!=null&&_!==!1){const j=_===!0?r(l.secretKey):_;M.push(_e("extraEntropy",j))}const N=gt(...M),k=O;function F(j){const H=E(j);if(!s.isValidNot0(H))return;const Z=s.inv(H),K=e.BASE.multiply(H).toAffine(),W=s.create(K.x);if(W===Dt)return;const Q=s.create(Z*s.create(k+W*C));if(Q===Dt)return;let ee=(K.x===W?0:2)|Number(K.y&Fn),ie=Q;return S&&x(Q)&&(ie=s.neg(Q),ee^=1),new B(W,ie,ee)}return{seed:N,k2sig:F}}function q(v,p,y={}){v=_e("message",v);const{seed:S,k2sig:D}=R(v,p,y);return S2(t.outputLen,s.BYTES,i)(S,D)}function z(v){let p;const y=typeof v=="string"||Fr(v),S=!y&&v!==null&&typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!y&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(S)p=new B(v.r,v.s);else if(y){try{p=B.fromBytes(_e("sig",v),"der")}catch(D){if(!(D instanceof At.Err))throw D}if(!p)try{p=B.fromBytes(_e("sig",v),"compact")}catch{return!1}}return p||!1}function m(v,p,y,S={}){const{lowS:D,prehash:_,format:O}=Qo(S,g);if(y=_e("publicKey",y),p=L(_e("message",p),_),"strict"in S)throw new Error("options.strict was renamed to lowS");const C=O===void 0?z(v):B.fromBytes(_e("sig",v),O);if(C===!1)return!1;try{const M=e.fromBytes(y);if(D&&C.hasHighS())return!1;const{r:N,s:k}=C,F=U(p),j=s.inv(k),H=s.create(F*j),Z=s.create(N*j),K=e.BASE.multiplyUnsafe(H).add(M.multiplyUnsafe(Z));return K.is0()?!1:s.create(K.x)===N}catch{return!1}}function b(v,p,y={}){const{prehash:S}=Qo(y,g);return p=L(p,S),B.fromBytes(v,"recovered").recoverPublicKey(p).toBytes()}return Object.freeze({keygen:f,getPublicKey:u,getSharedSecret:d,utils:h,lengths:l,Point:e,sign:q,verify:m,recoverPublicKey:b,Signature:B,hash:t})}function K2(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=St(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),o={Fp:n,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:o}}function G2(e){const{CURVE:t,curveOpts:n}=K2(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function Z2(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,$f(n.Fn.ORDER,n.Fn.BITS))})}function W2(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:i}=G2(e),o=H2(t,n),s=V2(o,r,i);return Z2(e,s)}function ai(e,t){const n=r=>W2({...e,hash:r});return{...n(t),create:n}}co("HashToScalar-");const es={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Y2={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Gf=BigInt(2);function X2(e){const t=es.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),c=BigInt(44),a=BigInt(88),f=e*e*e%t,u=f*f*e%t,d=ue(u,n,t)*u%t,h=ue(d,n,t)*u%t,l=ue(h,Gf,t)*f%t,g=ue(l,i,t)*l%t,w=ue(g,o,t)*g%t,x=ue(w,c,t)*w%t,I=ue(x,a,t)*x%t,$=ue(I,c,t)*w%t,B=ue($,n,t)*u%t,E=ue(B,s,t)*g%t,U=ue(E,r,t)*f%t,T=ue(U,Gf,t);if(!ts.eql(ts.sqr(T),e))throw new Error("Cannot find square root");return T}const ts=St(es.p,{sqrt:X2}),J2=ai({...es,Fp:ts,lowS:!0,endo:Y2},at);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ln(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ns(e,...t){if(!Ln(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Zf(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function rs(e){if(typeof e!="function")throw new Error("function expected");return!0}function Xt(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function kn(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function fi(e){if(!Array.isArray(e))throw new Error("array expected")}function ui(e,t){if(!Zf(!0,t))throw new Error(`${e}: array of strings expected`)}function is(e,t){if(!Zf(!1,t))throw new Error(`${e}: array of numbers expected`)}function ke(...e){const t=o=>o,n=(o,s)=>c=>o(s(c)),r=e.map(o=>o.encode).reduceRight(n,t),i=e.map(o=>o.decode).reduce(n,t);return{encode:r,decode:i}}function ze(e){const t=typeof e=="string"?e.split(""):e,n=t.length;ui("alphabet",t);const r=new Map(t.map((i,o)=>[i,o]));return{encode:i=>(fi(i),i.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${e}`);return t[o]})),decode:i=>(fi(i),i.map(o=>{Xt("alphabet.decode",o);const s=r.get(o);if(s===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${e}`);return s}))}}function He(e=""){return Xt("join",e),{encode:t=>(ui("join.decode",t),t.join(e)),decode:t=>(Xt("join.decode",t),t.split(e))}}function li(e,t="="){return kn(e),Xt("padding",t),{encode(n){for(ui("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){ui("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function Wf(e){return rs(e),{encode:t=>t,decode:t=>e(t)}}function Yf(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(fi(e),!e.length)return[];let r=0;const i=[],o=Array.from(e,c=>{if(kn(c),c<0||c>=t)throw new Error(`invalid integer: ${c}`);return c}),s=o.length;for(;;){let c=0,a=!0;for(let f=r;f<s;f++){const u=o[f],d=t*c,h=d+u;if(!Number.isSafeInteger(h)||d/t!==c||h-u!==d)throw new Error("convertRadix: carry overflow");const l=h/n;c=h%n;const g=Math.floor(l);if(o[f]=g,!Number.isSafeInteger(g)||g*n+c!==h)throw new Error("convertRadix: carry overflow");if(a)g?a=!1:r=f;else continue}if(i.push(c),a)break}for(let c=0;c<e.length-1&&e[c]===0;c++)i.push(0);return i.reverse()}const Xf=(e,t)=>t===0?e:Xf(t,e%t),di=(e,t)=>e+(t-Xf(e,t)),hi=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function os(e,t,n,r){if(fi(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(di(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${di(t,n)}`);let i=0,o=0;const s=hi[t],c=hi[n]-1,a=[];for(const f of e){if(kn(f),f>=s)throw new Error(`convertRadix2: invalid data word=${f} from=${t}`);if(i=i<<t|f,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=n;o-=n)a.push((i>>o-n&c)>>>0);const u=hi[o];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-o&c,!r&&o>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&o>0&&a.push(i>>>0),a}function Q2(e){kn(e);const t=2**8;return{encode:n=>{if(!Ln(n))throw new Error("radix.encode input should be Uint8Array");return Yf(Array.from(n),t,e)},decode:n=>(is("radix.decode",n),Uint8Array.from(Yf(n,e,t)))}}function Xe(e,t=!1){if(kn(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(di(8,e)>32||di(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Ln(n))throw new Error("radix2.encode input should be Uint8Array");return os(Array.from(n),8,e,!t)},decode:n=>(is("radix2.decode",n),Uint8Array.from(os(n,e,8,t)))}}function Jf(e){return rs(e),function(...t){try{return e.apply(null,t)}catch{}}}function eg(e,t){return kn(e),rs(t),{encode(n){if(!Ln(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!Ln(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=n.slice(-e),o=t(r).slice(0,e);for(let s=0;s<e;s++)if(o[s]!==i[s])throw new Error("Invalid checksum");return r}}}const tg=ke(Xe(5),ze("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),li(5),He("")),Qf=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",eu=(e,t)=>{Xt("base64",e);const n=t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,r=t?"base64url":"base64";if(e.length>0&&!n.test(e))throw new Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:r,lastChunkHandling:"strict"})},ss=e=>ke(Q2(58),ze(e),He("")),ng=ss("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),rg=e=>ke(eg(4,t=>e(e(t))),ng),cs=ke(ze("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),He("")),tu=[996825010,642813549,513874426,1027748829,705979059];function dr(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<tu.length;r++)(t>>r&1)===1&&(n^=tu[r]);return n}function nu(e,t,n=1){const r=e.length;let i=1;for(let o=0;o<r;o++){const s=e.charCodeAt(o);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);i=dr(i)^s>>5}i=dr(i);for(let o=0;o<r;o++)i=dr(i)^e.charCodeAt(o)&31;for(let o of t)i=dr(i)^o;for(let o=0;o<6;o++)i=dr(i);return i^=n,cs.encode(os([i%hi[30]],30,5,!1))}function ru(e){const t=e==="bech32"?1:734539939,n=Xe(5),r=n.decode,i=n.encode,o=Jf(r);function s(d,h,l=90){Xt("bech32.encode prefix",d),Ln(h)&&(h=Array.from(h)),is("bech32.encode",h);const g=d.length;if(g===0)throw new TypeError(`Invalid prefix length ${g}`);const w=g+7+h.length;if(l!==!1&&w>l)throw new TypeError(`Length ${w} exceeds limit ${l}`);const x=d.toLowerCase(),I=nu(x,h,t);return`${x}1${cs.encode(h)}${I}`}function c(d,h=90){Xt("bech32.decode input",d);const l=d.length;if(l<8||h!==!1&&l>h)throw new TypeError(`invalid string length: ${l} (${d}). Expected (8..${h})`);const g=d.toLowerCase();if(d!==g&&d!==d.toUpperCase())throw new Error("String must be lowercase or uppercase");const w=g.lastIndexOf("1");if(w===0||w===-1)throw new Error('Letter "1" must be present between prefix and data only');const x=g.slice(0,w),I=g.slice(w+1);if(I.length<6)throw new Error("Data must be at least 6 characters long");const $=cs.decode(I).slice(0,-6),B=nu(x,$,t);if(!I.endsWith(B))throw new Error(`Invalid checksum in ${d}: expected "${B}"`);return{prefix:x,words:$}}const a=Jf(c);function f(d){const{prefix:h,words:l}=c(d,!1);return{prefix:h,words:l,bytes:r(l)}}function u(d,h){return s(d,i(h))}return{encode:s,decode:c,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:o,toWords:i}}const ig=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",og={encode(e){return ns(e),e.toHex()},decode(e){return Xt("hex",e),Uint8Array.fromHex(e)}};J2.ProjectivePoint,rg(at),co("Bitcoin seed");function sg(e){return Bb(cg(e))}function cg(e){const{payload:t,signature:n}=e,{r,s:i,yParity:o}=n,c=new e2.Signature(BigInt(r),BigInt(i)).addRecoveryBit(o).recoverPublicKey(Eo(t).substring(2));return bb(c)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function iu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function as(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function fs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ye(e,...t){if(!iu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Mn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function us(e,t){ye(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function qe(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function _t(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ou(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const ag=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fg(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Jt(e){if(typeof e=="string")e=fg(e);else if(iu(e))e=bi(e);else throw new Error("Uint8Array expected, got "+typeof e);return e}function ug(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function lg(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const dg=(e,t)=>{function n(r,...i){if(ye(r),!ag)throw new Error("Non little-endian hardware is not yet supported");if(e.nonceLength!==void 0){const u=i[0];if(!u)throw new Error("nonce / iv required");e.varSizeNonce?ye(u):ye(u,e.nonceLength)}const o=e.tagLength;o&&i[1]!==void 0&&ye(i[1]);const s=t(r,...i),c=(u,d)=>{if(d!==void 0){if(u!==2)throw new Error("cipher output not supported");ye(d)}};let a=!1;return{encrypt(u,d){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,ye(u),c(s.encrypt.length,d),s.encrypt(u,d)},decrypt(u,d){if(ye(u),o&&u.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(s.decrypt.length,d),s.decrypt(u,d)}}}return Object.assign(n,e),n};function su(e,t,n=!0){if(t===void 0)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!bg(t))throw new Error("invalid output, must be aligned");return t}function cu(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}function hg(e,t,n){as(n);const r=new Uint8Array(16),i=ou(r);return cu(i,0,BigInt(t),n),cu(i,8,BigInt(e),n),r}function bg(e){return e.byteOffset%4===0}function bi(e){return Uint8Array.from(e)}const It=16,ls=new Uint8Array(16),ft=qe(ls),gg=225,pg=(e,t,n,r)=>{const i=r&1;return{s3:n<<31|r>>>1,s2:t<<31|n>>>1,s1:e<<31|t>>>1,s0:e>>>1^gg<<24&-(i&1)}},Je=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function wg(e){e.reverse();const t=e[15]&1;let n=0;for(let r=0;r<e.length;r++){const i=e[r];e[r]=i>>>1|n,n=(i&1)<<7}return e[0]^=-t&225,e}const yg=e=>e>64*1024?8:e>1024?4:2;class au{constructor(t,n){this.blockLen=It,this.outputLen=It,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,t=Jt(t),ye(t,16);const r=ou(t);let i=r.getUint32(0,!1),o=r.getUint32(4,!1),s=r.getUint32(8,!1),c=r.getUint32(12,!1);const a=[];for(let g=0;g<128;g++)a.push({s0:Je(i),s1:Je(o),s2:Je(s),s3:Je(c)}),{s0:i,s1:o,s2:s,s3:c}=pg(i,o,s,c);const f=yg(n||1024);if(![1,2,4,8].includes(f))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=f;const d=128/f,h=this.windowSize=2**f,l=[];for(let g=0;g<d;g++)for(let w=0;w<h;w++){let x=0,I=0,$=0,B=0;for(let E=0;E<f;E++){if(!(w>>>f-E-1&1))continue;const{s0:T,s1:P,s2:L,s3:R}=a[f*g+E];x^=T,I^=P,$^=L,B^=R}l.push({s0:x,s1:I,s2:$,s3:B})}this.t=l}_updateBlock(t,n,r,i){t^=this.s0,n^=this.s1,r^=this.s2,i^=this.s3;const{W:o,t:s,windowSize:c}=this;let a=0,f=0,u=0,d=0;const h=(1<<o)-1;let l=0;for(const g of[t,n,r,i])for(let w=0;w<4;w++){const x=g>>>8*w&255;for(let I=8/o-1;I>=0;I--){const $=x>>>o*I&h,{s0:B,s1:E,s2:U,s3:T}=s[l*c+$];a^=B,f^=E,u^=U,d^=T,l+=1}}this.s0=a,this.s1=f,this.s2=u,this.s3=d}update(t){Mn(this),t=Jt(t),ye(t);const n=qe(t),r=Math.floor(t.length/It),i=t.length%It;for(let o=0;o<r;o++)this._updateBlock(n[o*4+0],n[o*4+1],n[o*4+2],n[o*4+3]);return i&&(ls.set(t.subarray(r*It)),this._updateBlock(ft[0],ft[1],ft[2],ft[3]),_t(ft)),this}destroy(){const{t}=this;for(const n of t)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(t){Mn(this),us(t,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=qe(t);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,t}digest(){const t=new Uint8Array(It);return this.digestInto(t),this.destroy(),t}}class mg extends au{constructor(t,n){t=Jt(t),ye(t);const r=wg(bi(t));super(r,n),_t(r)}update(t){t=Jt(t),Mn(this);const n=qe(t),r=t.length%It,i=Math.floor(t.length/It);for(let o=0;o<i;o++)this._updateBlock(Je(n[o*4+3]),Je(n[o*4+2]),Je(n[o*4+1]),Je(n[o*4+0]));return r&&(ls.set(t.subarray(i*It)),this._updateBlock(Je(ft[3]),Je(ft[2]),Je(ft[1]),Je(ft[0])),_t(ft)),this}digestInto(t){Mn(this),us(t,this),this.finished=!0;const{s0:n,s1:r,s2:i,s3:o}=this,s=qe(t);return s[0]=n,s[1]=r,s[2]=i,s[3]=o,t.reverse()}}function fu(e){const t=(r,i)=>e(i,r.length).update(Jt(r)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(r,i)=>e(r,i),t}fu((e,t)=>new au(e,t)),fu((e,t)=>new mg(e,t));const uu=Vt(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Eg=uu.create(BigInt("-3")),xg=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b");Wr({a:Eg,b:xg,Fp:uu,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},at);const lu=Vt(BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff")),vg=lu.create(BigInt("-3")),Bg=BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef");Wr({a:vg,b:Bg,Fp:lu,n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f"),h:BigInt(1),lowS:!1},_a);const du=Vt(BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")),Sg=du.create(BigInt("-3")),Ag=BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00");Wr({a:Sg,b:Ag,Fp:du,n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650"),h:BigInt(1),lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Da);var Dg={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(a,f,u){this.fn=a,this.context=f,this.once=u||!1}function o(a,f,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var l=new i(u,d||a,h),g=n?n+f:f;return a._events[g]?a._events[g].fn?a._events[g]=[a._events[g],l]:a._events[g].push(l):(a._events[g]=l,a._eventsCount++),a}function s(a,f){--a._eventsCount===0?a._events=new r:delete a._events[f]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],u,d;if(this._eventsCount===0)return f;for(d in u=this._events)t.call(u,d)&&f.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(u)):f},c.prototype.listeners=function(f){var u=n?n+f:f,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,l=d.length,g=new Array(l);h<l;h++)g[h]=d[h].fn;return g},c.prototype.listenerCount=function(f){var u=n?n+f:f,d=this._events[u];return d?d.fn?1:d.length:0},c.prototype.emit=function(f,u,d,h,l,g){var w=n?n+f:f;if(!this._events[w])return!1;var x=this._events[w],I=arguments.length,$,B;if(x.fn){switch(x.once&&this.removeListener(f,x.fn,void 0,!0),I){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,u),!0;case 3:return x.fn.call(x.context,u,d),!0;case 4:return x.fn.call(x.context,u,d,h),!0;case 5:return x.fn.call(x.context,u,d,h,l),!0;case 6:return x.fn.call(x.context,u,d,h,l,g),!0}for(B=1,$=new Array(I-1);B<I;B++)$[B-1]=arguments[B];x.fn.apply(x.context,$)}else{var E=x.length,U;for(B=0;B<E;B++)switch(x[B].once&&this.removeListener(f,x[B].fn,void 0,!0),I){case 1:x[B].fn.call(x[B].context);break;case 2:x[B].fn.call(x[B].context,u);break;case 3:x[B].fn.call(x[B].context,u,d);break;case 4:x[B].fn.call(x[B].context,u,d,h);break;default:if(!$)for(U=1,$=new Array(I-1);U<I;U++)$[U-1]=arguments[U];x[B].fn.apply(x[B].context,$)}}return!0},c.prototype.on=function(f,u,d){return o(this,f,u,d,!1)},c.prototype.once=function(f,u,d){return o(this,f,u,d,!0)},c.prototype.removeListener=function(f,u,d,h){var l=n?n+f:f;if(!this._events[l])return this;if(!u)return s(this,l),this;var g=this._events[l];if(g.fn)g.fn===u&&(!h||g.once)&&(!d||g.context===d)&&s(this,l);else{for(var w=0,x=[],I=g.length;w<I;w++)(g[w].fn!==u||h&&!g[w].once||d&&g[w].context!==d)&&x.push(g[w]);x.length?this._events[l]=x.length===1?x[0]:x:s(this,l)}return this},c.prototype.removeAllListeners=function(f){var u;return f?(u=n?n+f:f,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(Dg);function _g(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let f=0;f<t.length;f++)t[f]=255;for(let f=0;f<e.length;f++){const u=e.charAt(f),d=u.charCodeAt(0);if(t[d]!==255)throw new TypeError(u+" is ambiguous");t[d]=f}const n=e.length,r=e.charAt(0),i=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let u=0,d=0,h=0;const l=f.length;for(;h!==l&&f[h]===0;)h++,u++;const g=(l-h)*o+1>>>0,w=new Uint8Array(g);for(;h!==l;){let $=f[h],B=0;for(let E=g-1;($!==0||B<d)&&E!==-1;E--,B++)$+=256*w[E]>>>0,w[E]=$%n>>>0,$=$/n>>>0;if($!==0)throw new Error("Non-zero carry");d=B,h++}let x=g-d;for(;x!==g&&w[x]===0;)x++;let I=r.repeat(u);for(;x<g;++x)I+=e.charAt(w[x]);return I}function c(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;f[u]===r;)d++,u++;const l=(f.length-u)*i+1>>>0,g=new Uint8Array(l);for(;u<f.length;){const $=f.charCodeAt(u);if($>255)return;let B=t[$];if(B===255)return;let E=0;for(let U=l-1;(B!==0||E<h)&&U!==-1;U--,E++)B+=n*g[U]>>>0,g[U]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");h=E,u++}let w=l-h;for(;w!==l&&g[w]===0;)w++;const x=new Uint8Array(d+(l-w));let I=d;for(;w!==l;)x[I++]=g[w++];return x}function a(f){const u=c(f);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:c,decode:a}}var Ig="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",hr=_g(Ig);function Og(e){const t=e.length;let n=0,r=0;for(;r<t;){let i=e.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<t){const o=e.charCodeAt(r);(o&64512)===56320&&(++r,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function Ug(e,t,n){const r=e.length;let i=n,o=0;for(;o<r;){let s=e.charCodeAt(o++);if((s&4294967168)===0){t[i++]=s;continue}else if((s&4294965248)===0)t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){const c=e.charCodeAt(o);(c&64512)===56320&&(++o,s=((s&1023)<<10)+(c&1023)+65536)}(s&4294901760)===0?(t[i++]=s>>12&15|224,t[i++]=s>>6&63|128):(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128,t[i++]=s>>6&63|128)}t[i++]=s&63|128}}const Ng=new TextEncoder,Tg=50;function Cg(e,t,n){Ng.encodeInto(e,t.subarray(n))}function Rg(e,t,n){e.length>Tg?Cg(e,t,n):Ug(e,t,n)}const $g=4096;function hu(e,t,n){let r=t;const i=r+n,o=[];let s="";for(;r<i;){const c=e[r++];if((c&128)===0)o.push(c);else if((c&224)===192){const a=e[r++]&63;o.push((c&31)<<6|a)}else if((c&240)===224){const a=e[r++]&63,f=e[r++]&63;o.push((c&31)<<12|a<<6|f)}else if((c&248)===240){const a=e[r++]&63,f=e[r++]&63,u=e[r++]&63;let d=(c&7)<<18|a<<12|f<<6|u;d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|d&1023),o.push(d)}else o.push(c);o.length>=$g&&(s+=String.fromCharCode(...o),o.length=0)}return o.length>0&&(s+=String.fromCharCode(...o)),s}const Fg=new TextDecoder,Pg=200;function Lg(e,t,n){const r=e.subarray(t,t+n);return Fg.decode(r)}function kg(e,t,n){return n>Pg?Lg(e,t,n):hu(e,t,n)}class gi{constructor(t,n){this.type=t,this.data=n}}class Ve extends Error{constructor(t){super(t);const n=Object.create(Ve.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Ve.name})}}const br=4294967295;function Mg(e,t,n){const r=n/4294967296,i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function bu(e,t,n){const r=Math.floor(n/4294967296),i=n;e.setUint32(t,r),e.setUint32(t+4,i)}function gu(e,t){const n=e.getInt32(t),r=e.getUint32(t+4);return n*4294967296+r}function jg(e,t){const n=e.getUint32(t),r=e.getUint32(t+4);return n*4294967296+r}const zg=-1,Hg=4294967296-1,qg=17179869184-1;function Vg({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=qg)if(t===0&&e<=Hg){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,r=e&4294967295,i=new Uint8Array(8),o=new DataView(i.buffer);return o.setUint32(0,t<<2|n&3),o.setUint32(4,r),i}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),bu(r,4,e),n}}function Kg(e){const t=e.getTime(),n=Math.floor(t/1e3),r=(t-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function Gg(e){if(e instanceof Date){const t=Kg(e);return Vg(t)}else return null}function Zg(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),r=t.getUint32(4),i=(n&3)*4294967296+r,o=n>>>2;return{sec:i,nsec:o}}case 12:{const n=gu(t,4),r=t.getUint32(0);return{sec:n,nsec:r}}default:throw new Ve(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function Wg(e){const t=Zg(e);return new Date(t.sec*1e3+t.nsec/1e6)}const Yg={type:zg,encode:Gg,decode:Wg};class pi{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Yg)}register({type:t,encode:n,decode:r}){if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{const i=-1-t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(t,n){for(let r=0;r<this.builtInEncoders.length;r++){const i=this.builtInEncoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=-1-r;return new gi(s,o)}}}for(let r=0;r<this.encoders.length;r++){const i=this.encoders[r];if(i!=null){const o=i(t,n);if(o!=null){const s=r;return new gi(s,o)}}}return t instanceof gi?t:null}decode(t,n,r){const i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(t,n,r):new gi(n,t)}}pi.defaultCodec=new pi;function Xg(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function ds(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Xg(e)?new Uint8Array(e):Uint8Array.from(e)}const Jg=100,Qg=2048;class hs{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??pi.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??Jg,this.initialBufferSize=t?.initialBufferSize??Qg,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new hs({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered)return this.clone().encodeSharedRef(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered)return this.clone().encode(t);try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);t==null?this.encodeNil():typeof t=="boolean"?this.encodeBoolean(t):typeof t=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):typeof t=="string"?this.encodeString(t):this.useBigInt64&&typeof t=="bigint"?this.encodeBigInt64(t):this.encodeObject(t,n)}ensureBufferSizeToWrite(t){const n=this.pos+t;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(t){const n=new ArrayBuffer(t),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(t){t===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else if(t<4294967296)this.writeU8(219),this.writeU32(t);else throw new Error(`Too long string: ${t} bytes in UTF-8`)}encodeString(t){const r=Og(t);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Rg(t,this.bytes,this.pos),this.pos+=r}encodeObject(t,n){const r=this.extensionCodec.tryToEncode(t,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(t))this.encodeArray(t,n);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else if(typeof t=="object")this.encodeMap(t,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`)}encodeBinary(t){const n=t.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=ds(t);this.writeU8a(r)}encodeArray(t,n){const r=t.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const i of t)this.doEncode(i,n+1)}countWithoutUndefined(t,n){let r=0;for(const i of n)t[i]!==void 0&&r++;return r}encodeMap(t,n){const r=Object.keys(t);this.sortKeys&&r.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(t,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const o of r){const s=t[o];this.ignoreUndefined&&s===void 0||(this.encodeString(o),this.doEncode(s,n+1))}}encodeExtension(t){if(typeof t.data=="function"){const r=t.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(t.type),this.writeU8a(r);return}const n=t.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const n=t.length;this.ensureBufferSizeToWrite(n),this.bytes.set(t,this.pos),this.pos+=n}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),Mg(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),bu(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}function ep(e,t){return new hs(t).encodeSharedRef(e)}function bs(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}const tp=16,np=16;class rp{constructor(t=tp,n=np){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,n,r){const i=this.caches[r-1];e:for(const o of i){const s=o.bytes;for(let c=0;c<r;c++)if(s[c]!==t[n+c])continue e;return o.str}return null}store(t,n){const r=this.caches[t.length-1],i={bytes:t,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(t,n,r){const i=this.find(t,n,r);if(i!=null)return this.hit++,i;this.miss++;const o=hu(t,n,r),s=Uint8Array.prototype.slice.call(t,n,n+r);return this.store(s,o),o}}const gs="array",gr="map_key",pu="map_value",ip=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ve("The type of key must be string or number but "+typeof e)};class op{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const n=this.getUninitializedStateFromPool();n.type=gs,n.position=0,n.size=t,n.array=new Array(t)}pushMapState(t){const n=this.getUninitializedStateFromPool();n.type=gr,n.readCount=0,n.size=t,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===gs){const r=t;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(t.type===gr||t.type===pu){const r=t;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const pr=-1,ps=new DataView(new ArrayBuffer(0)),sp=new Uint8Array(ps.buffer);try{ps.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const wu=new RangeError("Insufficient data"),cp=new rp;class ws{constructor(t){this.totalPos=0,this.pos=0,this.view=ps,this.bytes=sp,this.headByte=pr,this.stack=new op,this.entered=!1,this.extensionCodec=t?.extensionCodec??pi.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??br,this.maxBinLength=t?.maxBinLength??br,this.maxArrayLength=t?.maxArrayLength??br,this.maxMapLength=t?.maxMapLength??br,this.maxExtLength=t?.maxExtLength??br,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:cp,this.mapKeyConverter=t?.mapKeyConverter??ip}clone(){return new ws({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=pr,this.stack.reset()}setBuffer(t){const n=ds(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===pr&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),r=ds(t),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,r;for await(const c of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(c);try{r=this.doDecodeSync(),n=!0}catch(a){if(!(a instanceof RangeError))throw a}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:i,pos:o,totalPos:s}=this;throw new RangeError(`Insufficient data in parsing ${bs(i)} at ${s} (${o} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let r=n,i=-1;for await(const o of t){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(s){if(!(s instanceof RangeError))throw s}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const i=t-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t<160){const i=t-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{const i=t-160;n=this.decodeString(i,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const i=this.lookU8();n=this.decodeString(i,1)}else if(t===218){const i=this.lookU16();n=this.decodeString(i,2)}else if(t===219){const i=this.lookU32();n=this.decodeString(i,4)}else if(t===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(t===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(t===196){const i=this.lookU8();n=this.decodeBinary(i,1)}else if(t===197){const i=this.lookU16();n=this.decodeBinary(i,2)}else if(t===198){const i=this.lookU32();n=this.decodeBinary(i,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const i=this.lookU8();n=this.decodeExtension(i,1)}else if(t===200){const i=this.lookU16();n=this.decodeExtension(i,2)}else if(t===201){const i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Ve(`Unrecognized type byte: ${bs(t)}`);this.complete();const r=this.stack;for(;r.length>0;){const i=r.top();if(i.type===gs)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===gr){if(n==="__proto__")throw new Ve("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=pu;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=gr;continue e}}return n}}readHeadByte(){return this.headByte===pr&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=pr}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ve(`Unrecognized array type byte: ${bs(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ve(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ve(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new Ve(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw wu;const r=this.pos+n;let i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?i=this.keyDecoder.decode(this.bytes,r,t):i=kg(this.bytes,r,t),this.pos+=n+t,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===gr:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ve(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw wu;const r=this.pos+n,i=this.bytes.subarray(r,r+t);return this.pos+=n+t,i}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ve(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),i=this.decodeBinary(t,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=jg(this.view,this.pos);return this.pos+=8,t}readI64(){const t=gu(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}function ap(e,t){return new ws(t).decode(e)}const fp="https://rpc.walletconnect.org/v1";function ys(e){const t=`Ethereum Signed Message:
${e.length}`,n=new TextEncoder().encode(t+e);return"0x"+Buffer.from(va(n)).toString("hex")}async function yu(e,t,n,r,i,o){switch(n.t){case"eip191":return await mu(e,t,n.s);case"eip1271":return await Eu(e,t,n.s,r,i,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}function mu(e,t,n){const r=t2(n);return sg({payload:ys(t),signature:r}).toLowerCase()===e.toLowerCase()}async function Eu(e,t,n,r,i,o){const s=Li(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const c="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",f=n.substring(2),u=(f.length/2).toString(16).padStart(64,"0"),d=(t.startsWith("0x")?t:ys(t)).substring(2),h=c+d+a+u+f,l=await fetch(`${o||fp}/?chainId=${r}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:up(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:h},"latest"]})}),{result:g}=await l.json();return g?g.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function up(){return Date.now()+Math.floor(Math.random()*1e3)}function lp(e){const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const i=1+r*64;if(n.length<i)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const o=Buffer.from(e,"base64").slice(1,65);return hr.encode(o)}function dp(e){const t=new Uint8Array(Buffer.from(e,"base64")),n=Array.from("TransactionData::").map(o=>o.charCodeAt(0)),r=new Uint8Array(n.length+t.length);r.set(n),r.set(t,n.length);const i=u2(r,{dkLen:32});return hr.encode(i)}function hp(e){const t=new Uint8Array(at(xu(e)));return hr.encode(t)}function xu(e){if(e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if(typeof e=="object"&&e!=null&&e.data)return new Uint8Array(Object.values(e.data));if(typeof e=="object"&&e)return new Uint8Array(Object.values(e));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function bp(e){const t=Buffer.from(e,"base64"),n=ap(t).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=ep(n),i=Buffer.from("TX"),o=Buffer.concat([i,Buffer.from(r)]),s=L1(o);return tg.encode(s).replace(/=+$/,"")}function ms(e){const t=[];let n=BigInt(e);for(;n>=BigInt(128);)t.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return t.push(Number(n)),Buffer.from(t)}function gp(e){const t=Buffer.from(e.signed.bodyBytes,"base64"),n=Buffer.from(e.signed.authInfoBytes,"base64"),r=Buffer.from(e.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(ms(t.length)),i.push(t),i.push(Buffer.from([18])),i.push(ms(n.length)),i.push(n),i.push(Buffer.from([26])),i.push(ms(r.length)),i.push(r);const o=Buffer.concat(i),s=at(o);return Buffer.from(s).toString("hex").toUpperCase()}function pp(e){var t,n;const r=[];try{if(typeof e=="string")return r.push(e),r;if(typeof e!="object")return r;e!=null&&e.id&&r.push(e.id);const i=(n=(t=e?.capabilities)==null?void 0:t.caip345)==null?void 0:n.transactionHashes;i&&r.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return r}var wp=Object.defineProperty,yp=Object.defineProperties,mp=Object.getOwnPropertyDescriptors,vu=Object.getOwnPropertySymbols,Ep=Object.prototype.hasOwnProperty,xp=Object.prototype.propertyIsEnumerable,Bu=(e,t,n)=>t in e?wp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Es=(e,t)=>{for(var n in t||(t={}))Ep.call(t,n)&&Bu(e,n,t[n]);if(vu)for(var n of vu(t))xp.call(t,n)&&Bu(e,n,t[n]);return e},Su=(e,t)=>yp(e,mp(t));const Au="did:pkh:",vp={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},Bp=e=>e?vp[e]||e:"",wr=e=>e?.split(":"),Du=e=>{const t=e&&wr(e);if(t)return e.includes(Au)?t[3]:t[1]},_u=e=>{const t=e&&wr(e);if(t)return e.includes(Au)?t[2]:t[0]},Iu=e=>{const t=e&&wr(e);if(t)return t[2]+":"+t[3]},xs=e=>{const t=e&&wr(e);if(t)return t.pop()};async function Sp(e){const{cacao:t,projectId:n}=e,{s:r,p:i}=t,o=Ou(i,i.iss),s=xs(i.iss);return await yu(s,o,r,Iu(i.iss),n)}const Ou=(e,t)=>{const n=_u(t);if(!n)throw new Error("Invalid issuer: "+t);const r=`${e.domain} wants you to sign in with your ${Bp(n)} account:`,i=xs(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,c=`Version: ${e.version}`,a=`Chain ID: ${Du(t)}`,f=`Nonce: ${e.nonce}`,u=`Issued At: ${e.iat}`,d=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,l=e.requestId?`Request ID: ${e.requestId}`:void 0,g=e.resources?`Resources:${e.resources.map(x=>`
- ${x}`).join("")}`:void 0,w=yi(e.resources);if(w){const x=Qt(w);o=Ss(o,x)}return[r,i,"",o,"",s,c,a,f,u,d,h,l,g].filter(x=>x!=null).join(`
`)};function Ap(e,t,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:e.domain,aud:e.aud,version:e.version,nonce:e.nonce,iat:e.iat,statement:e.statement,requestId:e.requestId,resources:e.resources,nbf:e.nbf,exp:e.exp},s:t}}function Dp(e){var t;const{authPayload:n,chains:r,methods:i}=e,o=n.statement||"";if(!(r!=null&&r.length))return n;const s=n.chains,c=to(s,r);if(!(c!=null&&c.length))throw new Error("No supported chains");const a=Uu(n.resources);if(!a)return n;ut(a);const f=Nu(a,"eip155");let u=n?.resources||[];if(f!=null&&f.length){const d=Tu(f),h=to(d,i);if(!(h!=null&&h.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(d)}, supported: ${JSON.stringify(i)}`);const l=vs("request",h,{chains:c}),g=Fu(a,"eip155",l);u=((t=n?.resources)==null?void 0:t.slice(0,-1))||[],u.push(wi(g))}return Su(Es({},n),{statement:Lu(o,yi(u)),chains:c,resources:n!=null&&n.resources||u.length>0?u:void 0})}function Uu(e){const t=yi(e);if(t&&Bs(t))return Qt(t)}function _p(e,t){var n;return(n=e?.att)==null?void 0:n.hasOwnProperty(t)}function Nu(e,t){var n,r;return(n=e?.att)!=null&&n[t]?Object.keys((r=e?.att)==null?void 0:r[t]):[]}function Ip(e){return e?.map(t=>Object.keys(t))||[]}function Tu(e){return e?.map(t=>{var n;return(n=t.split("/"))==null?void 0:n[1]})||[]}function Cu(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function Ru(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function ut(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(n=>{const r=e.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(i=>{const o=r[i];if(!Array.isArray(o))throw new Error(`Ability limits ${i} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);o.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${s}`)})})})}function $u(e,t,n,r={}){return n?.sort((i,o)=>i.localeCompare(o)),{att:{[e]:vs(t,n,r)}}}function Fu(e,t,n){var r;e.att[t]=Es({},n);const i=(r=Object.keys(e.att))==null?void 0:r.sort((s,c)=>s.localeCompare(c)),o={att:{}};return i.reduce((s,c)=>(s.att[c]=e.att[c],s),o)}function vs(e,t,n={}){t=t?.sort((i,o)=>i.localeCompare(o));const r=t.map(i=>({[`${e}/${i}`]:[n]}));return Object.assign({},...r)}function wi(e){return ut(e),`urn:recap:${Cu(e).replace(/=/g,"")}`}function Qt(e){const t=Ru(e.replace("urn:recap:",""));return ut(t),t}function Op(e,t,n){const r=$u(e,t,n);return wi(r)}function Bs(e){return e&&e.includes("urn:recap:")}function Up(e,t){const n=Qt(e),r=Qt(t),i=Pu(n,r);return wi(i)}function Pu(e,t){ut(e),ut(t);const n=Object.keys(e.att).concat(Object.keys(t.att)).sort((i,o)=>i.localeCompare(o)),r={att:{}};return n.forEach(i=>{var o,s;Object.keys(((o=e.att)==null?void 0:o[i])||{}).concat(Object.keys(((s=t.att)==null?void 0:s[i])||{})).sort((c,a)=>c.localeCompare(a)).forEach(c=>{var a,f;r.att[i]=Su(Es({},r.att[i]),{[c]:((a=e.att[i])==null?void 0:a[c])||((f=t.att[i])==null?void 0:f[c])})})}),r}function Ss(e="",t){ut(t);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(n))return e;const r=[];let i=0;Object.keys(t.att).forEach(c=>{const a=Object.keys(t.att[c]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));a.sort((d,h)=>d.action.localeCompare(h.action));const f={};a.forEach(d=>{f[d.ability]||(f[d.ability]=[]),f[d.ability].push(d.action)});const u=Object.keys(f).map(d=>(i++,`(${i}) '${d}': '${f[d].join("', '")}' for '${c}'.`));r.push(u.join(", ").replace(".,","."))});const o=r.join(" "),s=`${n}${o}`;return`${e?e+" ":""}${s}`}function Np(e){var t;const n=Qt(e);ut(n);const r=(t=n.att)==null?void 0:t.eip155;return r?Object.keys(r).map(i=>i.split("/")[1]):[]}function Tp(e){const t=Qt(e);ut(t);const n=[];return Object.values(t.att).forEach(r=>{Object.values(r).forEach(i=>{var o;(o=i?.[0])!=null&&o.chains&&n.push(i[0].chains)})}),[...new Set(n.flat())]}function Lu(e,t){if(!t)return e;const n=Qt(t);return ut(n),Ss(e,n)}function yi(e){if(!e)return;const t=e?.[e.length-1];return Bs(t)?t:void 0}const ku=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),Cp=ku("expand 16-byte k"),Rp=ku("expand 32-byte k"),$p=qe(Cp),Fp=qe(Rp);function ne(e,t){return e<<t|e>>>32-t}function As(e){return e.byteOffset%4===0}const mi=64,Pp=16,Mu=2**32-1,ju=new Uint32Array;function Lp(e,t,n,r,i,o,s,c){const a=i.length,f=new Uint8Array(mi),u=qe(f),d=As(i)&&As(o),h=d?qe(i):ju,l=d?qe(o):ju;for(let g=0;g<a;s++){if(e(t,n,r,u,s,c),s>=Mu)throw new Error("arx: counter overflow");const w=Math.min(mi,a-g);if(d&&w===mi){const x=g/4;if(g%4!==0)throw new Error("arx: invalid block position");for(let I=0,$;I<Pp;I++)$=x+I,l[$]=h[$]^u[I];g+=mi;continue}for(let x=0,I;x<w;x++)I=g+x,o[I]=i[I]^f[x];g+=w}}function kp(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:o,rounds:s}=ug({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return fs(i),fs(s),as(o),as(n),(c,a,f,u,d=0)=>{ye(c),ye(a),ye(f);const h=f.length;if(u===void 0&&(u=new Uint8Array(h)),ye(u),fs(d),d<0||d>=Mu)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const l=[];let g=c.length,w,x;if(g===32)l.push(w=bi(c)),x=Fp;else if(g===16&&n)w=new Uint8Array(32),w.set(c),w.set(c,16),x=$p,l.push(w);else throw new Error(`arx: invalid 32-byte key, got length=${g}`);As(a)||l.push(a=bi(a));const I=qe(w);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(x,I,qe(a.subarray(0,16)),I),a=a.subarray(16)}const $=16-i;if($!==a.length)throw new Error(`arx: nonce must be ${$} or 16 bytes`);if($!==12){const E=new Uint8Array(12);E.set(a,o?0:12-a.length),a=E,l.push(a)}const B=qe(a);return Lp(e,x,I,B,f,u,d,s),_t(...l),u}}const me=(e,t)=>e[t++]&255|(e[t++]&255)<<8;class Mp{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=Jt(t),ye(t,32);const n=me(t,0),r=me(t,2),i=me(t,4),o=me(t,6),s=me(t,8),c=me(t,10),a=me(t,12),f=me(t,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|o<<9)&8191,this.r[4]=(o>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|c<<2)&8191,this.r[7]=(c>>>11|a<<5)&8065,this.r[8]=(a>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=me(t,16+2*u)}process(t,n,r=!1){const i=r?0:2048,{h:o,r:s}=this,c=s[0],a=s[1],f=s[2],u=s[3],d=s[4],h=s[5],l=s[6],g=s[7],w=s[8],x=s[9],I=me(t,n+0),$=me(t,n+2),B=me(t,n+4),E=me(t,n+6),U=me(t,n+8),T=me(t,n+10),P=me(t,n+12),L=me(t,n+14);let R=o[0]+(I&8191),q=o[1]+((I>>>13|$<<3)&8191),z=o[2]+(($>>>10|B<<6)&8191),m=o[3]+((B>>>7|E<<9)&8191),b=o[4]+((E>>>4|U<<12)&8191),v=o[5]+(U>>>1&8191),p=o[6]+((U>>>14|T<<2)&8191),y=o[7]+((T>>>11|P<<5)&8191),S=o[8]+((P>>>8|L<<8)&8191),D=o[9]+(L>>>5|i),_=0,O=_+R*c+q*(5*x)+z*(5*w)+m*(5*g)+b*(5*l);_=O>>>13,O&=8191,O+=v*(5*h)+p*(5*d)+y*(5*u)+S*(5*f)+D*(5*a),_+=O>>>13,O&=8191;let C=_+R*a+q*c+z*(5*x)+m*(5*w)+b*(5*g);_=C>>>13,C&=8191,C+=v*(5*l)+p*(5*h)+y*(5*d)+S*(5*u)+D*(5*f),_+=C>>>13,C&=8191;let M=_+R*f+q*a+z*c+m*(5*x)+b*(5*w);_=M>>>13,M&=8191,M+=v*(5*g)+p*(5*l)+y*(5*h)+S*(5*d)+D*(5*u),_+=M>>>13,M&=8191;let N=_+R*u+q*f+z*a+m*c+b*(5*x);_=N>>>13,N&=8191,N+=v*(5*w)+p*(5*g)+y*(5*l)+S*(5*h)+D*(5*d),_+=N>>>13,N&=8191;let k=_+R*d+q*u+z*f+m*a+b*c;_=k>>>13,k&=8191,k+=v*(5*x)+p*(5*w)+y*(5*g)+S*(5*l)+D*(5*h),_+=k>>>13,k&=8191;let F=_+R*h+q*d+z*u+m*f+b*a;_=F>>>13,F&=8191,F+=v*c+p*(5*x)+y*(5*w)+S*(5*g)+D*(5*l),_+=F>>>13,F&=8191;let j=_+R*l+q*h+z*d+m*u+b*f;_=j>>>13,j&=8191,j+=v*a+p*c+y*(5*x)+S*(5*w)+D*(5*g),_+=j>>>13,j&=8191;let H=_+R*g+q*l+z*h+m*d+b*u;_=H>>>13,H&=8191,H+=v*f+p*a+y*c+S*(5*x)+D*(5*w),_+=H>>>13,H&=8191;let Z=_+R*w+q*g+z*l+m*h+b*d;_=Z>>>13,Z&=8191,Z+=v*u+p*f+y*a+S*c+D*(5*x),_+=Z>>>13,Z&=8191;let K=_+R*x+q*w+z*g+m*l+b*h;_=K>>>13,K&=8191,K+=v*d+p*u+y*f+S*a+D*c,_+=K>>>13,K&=8191,_=(_<<2)+_|0,_=_+O|0,O=_&8191,_=_>>>13,C+=_,o[0]=O,o[1]=C,o[2]=M,o[3]=N,o[4]=k,o[5]=F,o[6]=j,o[7]=H,o[8]=Z,o[9]=K}finalize(){const{h:t,pad:n}=this,r=new Uint16Array(10);let i=t[1]>>>13;t[1]&=8191;for(let c=2;c<10;c++)t[c]+=i,i=t[c]>>>13,t[c]&=8191;t[0]+=i*5,i=t[0]>>>13,t[0]&=8191,t[1]+=i,i=t[1]>>>13,t[1]&=8191,t[2]+=i,r[0]=t[0]+5,i=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=t[c]+i,i=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(i^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)t[c]=t[c]&o|r[c];t[0]=(t[0]|t[1]<<13)&65535,t[1]=(t[1]>>>3|t[2]<<10)&65535,t[2]=(t[2]>>>6|t[3]<<7)&65535,t[3]=(t[3]>>>9|t[4]<<4)&65535,t[4]=(t[4]>>>12|t[5]<<1|t[6]<<14)&65535,t[5]=(t[6]>>>2|t[7]<<11)&65535,t[6]=(t[7]>>>5|t[8]<<8)&65535,t[7]=(t[8]>>>8|t[9]<<5)&65535;let s=t[0]+n[0];t[0]=s&65535;for(let c=1;c<8;c++)s=(t[c]+n[c]|0)+(s>>>16)|0,t[c]=s&65535;_t(r)}update(t){Mn(this),t=Jt(t),ye(t);const{buffer:n,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s===r){for(;r<=i-o;o+=r)this.process(t,o);continue}n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){_t(this.h,this.r,this.buffer,this.pad)}digestInto(t){Mn(this),us(t,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let s=0;s<8;s++)t[o++]=r[s]>>>0,t[o++]=r[s]>>>8;return t}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}}function jp(e){const t=(r,i)=>e(i).update(Jt(r)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=r=>e(r),t}const zp=jp(e=>new Mp(e));function Hp(e,t,n,r,i,o=20){let s=e[0],c=e[1],a=e[2],f=e[3],u=t[0],d=t[1],h=t[2],l=t[3],g=t[4],w=t[5],x=t[6],I=t[7],$=i,B=n[0],E=n[1],U=n[2],T=s,P=c,L=a,R=f,q=u,z=d,m=h,b=l,v=g,p=w,y=x,S=I,D=$,_=B,O=E,C=U;for(let N=0;N<o;N+=2)T=T+q|0,D=ne(D^T,16),v=v+D|0,q=ne(q^v,12),T=T+q|0,D=ne(D^T,8),v=v+D|0,q=ne(q^v,7),P=P+z|0,_=ne(_^P,16),p=p+_|0,z=ne(z^p,12),P=P+z|0,_=ne(_^P,8),p=p+_|0,z=ne(z^p,7),L=L+m|0,O=ne(O^L,16),y=y+O|0,m=ne(m^y,12),L=L+m|0,O=ne(O^L,8),y=y+O|0,m=ne(m^y,7),R=R+b|0,C=ne(C^R,16),S=S+C|0,b=ne(b^S,12),R=R+b|0,C=ne(C^R,8),S=S+C|0,b=ne(b^S,7),T=T+z|0,C=ne(C^T,16),y=y+C|0,z=ne(z^y,12),T=T+z|0,C=ne(C^T,8),y=y+C|0,z=ne(z^y,7),P=P+m|0,D=ne(D^P,16),S=S+D|0,m=ne(m^S,12),P=P+m|0,D=ne(D^P,8),S=S+D|0,m=ne(m^S,7),L=L+b|0,_=ne(_^L,16),v=v+_|0,b=ne(b^v,12),L=L+b|0,_=ne(_^L,8),v=v+_|0,b=ne(b^v,7),R=R+q|0,O=ne(O^R,16),p=p+O|0,q=ne(q^p,12),R=R+q|0,O=ne(O^R,8),p=p+O|0,q=ne(q^p,7);let M=0;r[M++]=s+T|0,r[M++]=c+P|0,r[M++]=a+L|0,r[M++]=f+R|0,r[M++]=u+q|0,r[M++]=d+z|0,r[M++]=h+m|0,r[M++]=l+b|0,r[M++]=g+v|0,r[M++]=w+p|0,r[M++]=x+y|0,r[M++]=I+S|0,r[M++]=$+D|0,r[M++]=B+_|0,r[M++]=E+O|0,r[M++]=U+C|0}const qp=kp(Hp,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Vp=new Uint8Array(16),zu=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Vp.subarray(n))},Kp=new Uint8Array(32);function Hu(e,t,n,r,i){const o=e(t,n,Kp),s=zp.create(o);i&&zu(s,i),zu(s,r);const c=hg(r.length,i?i.length:0,!0);s.update(c);const a=s.digest();return _t(o,c),a}const qu=dg({blockSize:64,nonceLength:12,tagLength:16},(e=>(t,n,r)=>({encrypt(o,s){const c=o.length;s=su(c+16,s,!1),s.set(o);const a=s.subarray(0,-16);e(t,n,a,a,1);const f=Hu(e,t,n,a,r);return s.set(f,c),_t(f),s},decrypt(o,s){s=su(o.length-16,s,!1);const c=o.subarray(0,-16),a=o.subarray(-16),f=Hu(e,t,n,c,r);if(!lg(a,f))throw new Error("invalid tag");return s.set(o.subarray(0,-16)),e(t,n,s,s,1),_t(f),s}}))(qp));function Gp(e,t,n){return Pr(e),n===void 0&&(n=new Uint8Array(e.outputLen)),sr(e,nt(n),nt(t))}const Ds=Uint8Array.from([0]),Vu=Uint8Array.of();function Zp(e,t,n,r=32){Pr(e),st(r);const i=e.outputLen;if(r>255*i)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/i);n===void 0&&(n=Vu);const s=new Uint8Array(o*i),c=sr.create(e,t),a=c._cloneInto(),f=new Uint8Array(c.outputLen);for(let u=0;u<o;u++)Ds[0]=u+1,a.update(u===0?Vu:f).update(n).update(Ds).digestInto(f),s.set(f,i*u),c._cloneInto(a);return c.destroy(),a.destroy(),We(f,Ds),s.slice(0,r)}const Wp=(e,t,n,r,i)=>Zp(e,Gp(e,t,n),r,i);BigInt(0),BigInt(1),BigInt(2),BigInt(8);const yr=BigInt(0),jn=BigInt(1),Ei=BigInt(2);function Yp(e){return oi(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function Xp(e){const t=Yp(e),{P:n,type:r,adjustScalarBytes:i,powPminus2:o,randomBytes:s}=t,c=r==="x25519";if(!c&&r!=="x448")throw new Error("invalid type");const a=s||pt,f=c?255:448,u=c?32:56,d=BigInt(c?9:5),h=BigInt(c?121665:39081),l=c?Ei**BigInt(254):Ei**BigInt(447),g=c?BigInt(8)*Ei**BigInt(251)-jn:BigInt(4)*Ei**BigInt(445)-jn,w=l+g+jn,x=b=>je(b,n),I=$(d);function $(b){return qo(x(b),u)}function B(b){const v=_e("u coordinate",b,u);return c&&(v[31]&=127),x(ii(v))}function E(b){return ii(i(_e("scalar",b,u)))}function U(b,v){const p=L(B(v),E(b));if(p===yr)throw new Error("invalid private or public key received");return $(p)}function T(b){return U(b,I)}function P(b,v,p){const y=x(b*(v-p));return v=x(v-y),p=x(p+y),{x_2:v,x_3:p}}function L(b,v){Ko("u",b,yr,n),Ko("scalar",v,l,w);const p=v,y=b;let S=jn,D=yr,_=b,O=jn,C=yr;for(let N=BigInt(f-1);N>=yr;N--){const k=p>>N&jn;C^=k,{x_2:S,x_3:_}=P(C,S,_),{x_2:D,x_3:O}=P(C,D,O),C=k;const F=S+D,j=x(F*F),H=S-D,Z=x(H*H),K=j-Z,W=_+O,Q=_-O,ee=x(Q*F),ie=x(W*H),ae=ee+ie,fe=ee-ie;_=x(ae*ae),O=x(y*x(fe*fe)),S=x(j*Z),D=x(K*(j+x(h*K)))}({x_2:S,x_3:_}=P(C,S,_)),{x_2:D,x_3:O}=P(C,D,O);const M=o(D);return x(S*M)}const R={secretKey:u,publicKey:u,seed:u},q=(b=a(u))=>(tt(b,R.seed),b);function z(b){const v=q(b);return{secretKey:v,publicKey:T(v)}}return{keygen:z,getSharedSecret:(b,v)=>U(b,v),getPublicKey:b=>T(b),scalarMult:U,scalarMultBase:T,utils:{randomSecretKey:q,randomPrivateKey:q},GuBytes:I.slice(),lengths:R}}const Jp=BigInt(1),Ku=BigInt(2),Qp=BigInt(3),ew=BigInt(5),tw=BigInt(8),Gu=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),nw={p:Gu,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:tw,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function rw(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=Gu,c=e*e%o*e%o,a=ue(c,Ku,o)*c%o,f=ue(a,Jp,o)*e%o,u=ue(f,ew,o)*f%o,d=ue(u,t,o)*u%o,h=ue(d,n,o)*d%o,l=ue(h,r,o)*h%o,g=ue(l,i,o)*l%o,w=ue(g,i,o)*l%o,x=ue(w,t,o)*u%o;return{pow_p_5_8:ue(x,Ku,o)*e%o,b2:c}}function iw(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const ow=St(nw.p,{isLE:!0}),_s=(()=>{const e=ow.ORDER;return Xp({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=rw(t);return je(ue(n,Qp,e)*r,e)},adjustScalarBytes:iw})})(),Zu={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Wu={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Yu={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},sw=St(Zu.p),cw=St(Wu.p),aw=St(Yu.p),fw=ai({...Zu,Fp:sw,lowS:!1},at);ai({...Wu,Fp:cw,lowS:!1},_a),ai({...Yu,Fp:aw,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Da);const uw=fw,lw=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),dw=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function hw(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return dw(e)}catch{return e}}function Xu(e){return typeof e=="string"?e:lw(e)||""}function bw(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ju(e,...t){if(!bw(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Qu(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function gw(e,t){Ju(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Is=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function pw(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function el(e){return typeof e=="string"&&(e=pw(e)),Ju(e),e}class ww{clone(){return this._cloneInto()}}function yw(e){const t=r=>e().update(el(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function mw(e=32){if(zn&&typeof zn.getRandomValues=="function")return zn.getRandomValues(new Uint8Array(e));if(zn&&typeof zn.randomBytes=="function")return zn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function Ew(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),c=Number(n&o),a=r?4:0,f=r?0:4;e.setUint32(t+a,s,r),e.setUint32(t+f,c,r)}class xw extends ww{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Is(this.buffer)}update(t){Qu(this);const{view:n,buffer:r,blockLen:i}=this;t=el(t);const o=t.length;for(let s=0;s<o;){const c=Math.min(i-this.pos,o-s);if(c===i){const a=Is(t);for(;i<=o-s;s+=i)this.process(a,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Qu(this),gw(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let d=s;d<i;d++)n[d]=0;Ew(r,i-8,BigInt(this.length*8),o),this.process(r,0);const c=Is(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=a/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)c.setUint32(4*d,u[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:s,pos:c}=this;return t.length=i,t.pos=c,t.finished=o,t.destroyed=s,i%n&&t.buffer.set(r),t}}const xi=BigInt(2**32-1),Os=BigInt(32);function tl(e,t=!1){return t?{h:Number(e&xi),l:Number(e>>Os&xi)}:{h:Number(e>>Os&xi)|0,l:Number(e&xi)|0}}function vw(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=tl(e[i],t);[n[i],r[i]]=[o,s]}return[n,r]}const Bw=(e,t)=>BigInt(e>>>0)<<Os|BigInt(t>>>0),Sw=(e,t,n)=>e>>>n,Aw=(e,t,n)=>e<<32-n|t>>>n,Dw=(e,t,n)=>e>>>n|t<<32-n,_w=(e,t,n)=>e<<32-n|t>>>n,Iw=(e,t,n)=>e<<64-n|t>>>n-32,Ow=(e,t,n)=>e>>>n-32|t<<64-n,Uw=(e,t)=>t,Nw=(e,t)=>e,Tw=(e,t,n)=>e<<n|t>>>32-n,Cw=(e,t,n)=>t<<n|e>>>32-n,Rw=(e,t,n)=>t<<n-32|e>>>64-n,$w=(e,t,n)=>e<<n-32|t>>>64-n;function Fw(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}const Pw=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Lw=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,kw=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Mw=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,jw=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),zw=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0,J={fromBig:tl,split:vw,toBig:Bw,shrSH:Sw,shrSL:Aw,rotrSH:Dw,rotrSL:_w,rotrBH:Iw,rotrBL:Ow,rotr32H:Uw,rotr32L:Nw,rotlSH:Tw,rotlSL:Cw,rotlBH:Rw,rotlBL:$w,add:Fw,add3L:Pw,add3H:Lw,add4L:kw,add4H:Mw,add5H:zw,add5L:jw},[Hw,qw]=J.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),en=new Uint32Array(80),tn=new Uint32Array(80);class Vw extends xw{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:i,Ch:o,Cl:s,Dh:c,Dl:a,Eh:f,El:u,Fh:d,Fl:h,Gh:l,Gl:g,Hh:w,Hl:x}=this;return[t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x]}set(t,n,r,i,o,s,c,a,f,u,d,h,l,g,w,x){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=c|0,this.Dl=a|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=l|0,this.Gl=g|0,this.Hh=w|0,this.Hl=x|0}process(t,n){for(let B=0;B<16;B++,n+=4)en[B]=t.getUint32(n),tn[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const E=en[B-15]|0,U=tn[B-15]|0,T=J.rotrSH(E,U,1)^J.rotrSH(E,U,8)^J.shrSH(E,U,7),P=J.rotrSL(E,U,1)^J.rotrSL(E,U,8)^J.shrSL(E,U,7),L=en[B-2]|0,R=tn[B-2]|0,q=J.rotrSH(L,R,19)^J.rotrBH(L,R,61)^J.shrSH(L,R,6),z=J.rotrSL(L,R,19)^J.rotrBL(L,R,61)^J.shrSL(L,R,6),m=J.add4L(P,z,tn[B-7],tn[B-16]),b=J.add4H(m,T,q,en[B-7],en[B-16]);en[B]=b|0,tn[B]=m|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:c,Cl:a,Dh:f,Dl:u,Eh:d,El:h,Fh:l,Fl:g,Gh:w,Gl:x,Hh:I,Hl:$}=this;for(let B=0;B<80;B++){const E=J.rotrSH(d,h,14)^J.rotrSH(d,h,18)^J.rotrBH(d,h,41),U=J.rotrSL(d,h,14)^J.rotrSL(d,h,18)^J.rotrBL(d,h,41),T=d&l^~d&w,P=h&g^~h&x,L=J.add5L($,U,P,qw[B],tn[B]),R=J.add5H(L,I,E,T,Hw[B],en[B]),q=L|0,z=J.rotrSH(r,i,28)^J.rotrBH(r,i,34)^J.rotrBH(r,i,39),m=J.rotrSL(r,i,28)^J.rotrBL(r,i,34)^J.rotrBL(r,i,39),b=r&o^r&c^o&c,v=i&s^i&a^s&a;I=w|0,$=x|0,w=l|0,x=g|0,l=d|0,g=h|0,{h:d,l:h}=J.add(f|0,u|0,R|0,q|0),f=c|0,u=a|0,c=o|0,a=s|0,o=r|0,s=i|0;const p=J.add3L(q,m,v);r=J.add3H(p,R,z,b),i=p|0}({h:r,l:i}=J.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=J.add(this.Bh|0,this.Bl|0,o|0,s|0),{h:c,l:a}=J.add(this.Ch|0,this.Cl|0,c|0,a|0),{h:f,l:u}=J.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l:h}=J.add(this.Eh|0,this.El|0,d|0,h|0),{h:l,l:g}=J.add(this.Fh|0,this.Fl|0,l|0,g|0),{h:w,l:x}=J.add(this.Gh|0,this.Gl|0,w|0,x|0),{h:I,l:$}=J.add(this.Hh|0,this.Hl|0,I|0,$|0),this.set(r,i,o,s,c,a,f,u,d,h,l,g,w,x,I,$)}roundClean(){en.fill(0),tn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Kw=yw(()=>new Vw);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Us=BigInt(0),nl=BigInt(1),Gw=BigInt(2);function Ns(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ts(e){if(!Ns(e))throw new Error("Uint8Array expected")}function Cs(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const Zw=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Rs(e){Ts(e);let t="";for(let n=0;n<e.length;n++)t+=Zw[e[n]];return t}function rl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Us:BigInt("0x"+e)}const Ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function il(e){if(e>=Ot._0&&e<=Ot._9)return e-Ot._0;if(e>=Ot.A&&e<=Ot.F)return e-(Ot.A-10);if(e>=Ot.a&&e<=Ot.f)return e-(Ot.a-10)}function ol(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const s=il(e.charCodeAt(o)),c=il(e.charCodeAt(o+1));if(s===void 0||c===void 0){const a=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}r[i]=s*16+c}return r}function Ww(e){return rl(Rs(e))}function vi(e){return Ts(e),rl(Rs(Uint8Array.from(e).reverse()))}function sl(e,t){return ol(e.toString(16).padStart(t*2,"0"))}function $s(e,t){return sl(e,t).reverse()}function Ut(e,t,n){let r;if(typeof t=="string")try{r=ol(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Ns(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function cl(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];Ts(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}const Fs=e=>typeof e=="bigint"&&Us<=e;function Yw(e,t,n){return Fs(e)&&Fs(t)&&Fs(n)&&t<=e&&e<n}function mr(e,t,n,r){if(!Yw(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Xw(e){let t;for(t=0;e>Us;e>>=nl,t+=1);return t}const Jw=e=>(Gw<<BigInt(e-1))-nl,Qw={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ns(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ps(e,t,n={}){const r=(i,o,s)=>{const c=Qw[o];if(typeof c!="function")throw new Error("invalid validator function");const a=e[i];if(!(s&&a===void 0)&&!c(a,e))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+a)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}function al(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const o=e(n,...r);return t.set(n,o),o}}const we=BigInt(0),de=BigInt(1),xn=BigInt(2),ey=BigInt(3),Ls=BigInt(4),fl=BigInt(5),ul=BigInt(8);function ge(e,t){const n=e%t;return n>=we?n:t+n}function ty(e,t,n){if(t<we)throw new Error("invalid exponent, negatives unsupported");if(n<=we)throw new Error("invalid modulus");if(n===de)return we;let r=de;for(;t>we;)t&de&&(r=r*e%n),e=e*e%n,t>>=de;return r}function lt(e,t,n){let r=e;for(;t-- >we;)r*=r,r%=n;return r}function ll(e,t){if(e===we)throw new Error("invert: expected non-zero number");if(t<=we)throw new Error("invert: expected positive modulus, got "+t);let n=ge(e,t),r=t,i=we,o=de;for(;n!==we;){const s=r/n,c=r%n,a=i-o*s;r=n,n=c,i=o,o=a}if(r!==de)throw new Error("invert: does not exist");return ge(i,t)}function ny(e){const t=(e-de)/xn;let n,r,i;for(n=e-de,r=0;n%xn===we;n/=xn,r++);for(i=xn;i<e&&ty(i,t,e)!==e-de;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(e+de)/Ls;return function(c,a){const f=c.pow(a,s);if(!c.eql(c.sqr(f),a))throw new Error("Cannot find square root");return f}}const o=(n+de)/xn;return function(s,c){if(s.pow(c,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let a=r,f=s.pow(s.mul(s.ONE,i),n),u=s.pow(c,o),d=s.pow(c,n);for(;!s.eql(d,s.ONE);){if(s.eql(d,s.ZERO))return s.ZERO;let h=1;for(let g=s.sqr(d);h<a&&!s.eql(g,s.ONE);h++)g=s.sqr(g);const l=s.pow(f,de<<BigInt(a-h-1));f=s.sqr(l),u=s.mul(u,l),d=s.mul(d,f),a=h}return u}}function ry(e){if(e%Ls===ey){const t=(e+de)/Ls;return function(n,r){const i=n.pow(r,t);if(!n.eql(n.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%ul===fl){const t=(e-fl)/ul;return function(n,r){const i=n.mul(r,xn),o=n.pow(i,t),s=n.mul(r,o),c=n.mul(n.mul(s,xn),o),a=n.mul(s,n.sub(c,n.ONE));if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}return ny(e)}const iy=(e,t)=>(ge(e,t)&de)===de,oy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sy(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=oy.reduce((r,i)=>(r[i]="function",r),t);return Ps(e,n)}function cy(e,t,n){if(n<we)throw new Error("invalid exponent, negatives unsupported");if(n===we)return e.ONE;if(n===de)return t;let r=e.ONE,i=t;for(;n>we;)n&de&&(r=e.mul(r,i)),i=e.sqr(i),n>>=de;return r}function ay(e,t){const n=new Array(t.length),r=t.reduce((o,s,c)=>e.is0(s)?o:(n[c]=o,e.mul(o,s)),e.ONE),i=e.inv(r);return t.reduceRight((o,s,c)=>e.is0(s)?o:(n[c]=e.mul(o,n[c]),e.mul(o,s)),i),n}function dl(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hl(e,t,n=!1,r={}){if(e<=we)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:o}=dl(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const c=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:o,MASK:Jw(i),ZERO:we,ONE:de,create:a=>ge(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return we<=a&&a<e},is0:a=>a===we,isOdd:a=>(a&de)===de,neg:a=>ge(-a,e),eql:(a,f)=>a===f,sqr:a=>ge(a*a,e),add:(a,f)=>ge(a+f,e),sub:(a,f)=>ge(a-f,e),mul:(a,f)=>ge(a*f,e),pow:(a,f)=>cy(c,a,f),div:(a,f)=>ge(a*ll(f,e),e),sqrN:a=>a*a,addN:(a,f)=>a+f,subN:(a,f)=>a-f,mulN:(a,f)=>a*f,inv:a=>ll(a,e),sqrt:r.sqrt||(a=>(s||(s=ry(e)),s(c,a))),invertBatch:a=>ay(c,a),cmov:(a,f,u)=>u?f:a,toBytes:a=>n?$s(a,o):sl(a,o),fromBytes:a=>{if(a.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+a.length);return n?vi(a):Ww(a)}});return Object.freeze(c)}const bl=BigInt(0),Bi=BigInt(1);function ks(e,t){const n=t.negate();return e?n:t}function gl(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ms(e,t){gl(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function fy(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function uy(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const js=new WeakMap,pl=new WeakMap;function zs(e){return pl.get(e)||1}function ly(e,t){return{constTimeNegate:ks,hasPrecomputes(n){return zs(n)!==1},unsafeLadder(n,r,i=e.ZERO){let o=n;for(;r>bl;)r&Bi&&(i=i.add(o)),o=o.double(),r>>=Bi;return i},precomputeWindow(n,r){const{windows:i,windowSize:o}=Ms(r,t),s=[];let c=n,a=c;for(let f=0;f<i;f++){a=c,s.push(a);for(let u=1;u<o;u++)a=a.add(c),s.push(a);c=a.double()}return s},wNAF(n,r,i){const{windows:o,windowSize:s}=Ms(n,t);let c=e.ZERO,a=e.BASE;const f=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<o;h++){const l=h*s;let g=Number(i&f);i>>=d,g>s&&(g-=u,i+=Bi);const w=l,x=l+Math.abs(g)-1,I=h%2!==0,$=g<0;g===0?a=a.add(ks(I,r[w])):c=c.add(ks($,r[x]))}return{p:c,f:a}},wNAFUnsafe(n,r,i,o=e.ZERO){const{windows:s,windowSize:c}=Ms(n,t),a=BigInt(2**n-1),f=2**n,u=BigInt(n);for(let d=0;d<s;d++){const h=d*c;if(i===bl)break;let l=Number(i&a);if(i>>=u,l>c&&(l-=f,i+=Bi),l===0)continue;let g=r[h+Math.abs(l)-1];l<0&&(g=g.negate()),o=o.add(g)}return o},getPrecomputes(n,r,i){let o=js.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&js.set(r,i(o))),o},wNAFCached(n,r,i){const o=zs(n);return this.wNAF(o,this.getPrecomputes(o,n,i),r)},wNAFCachedUnsafe(n,r,i,o){const s=zs(n);return s===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,n,i),r,o)},setWindowSize(n,r){gl(r,t),pl.set(n,r),js.delete(n)}}}function dy(e,t,n,r){if(fy(n,e),uy(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,o=Xw(BigInt(n.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(1<<s)-1,a=new Array(c+1).fill(i),f=Math.floor((t.BITS-1)/s)*s;let u=i;for(let d=f;d>=0;d-=s){a.fill(i);for(let l=0;l<r.length;l++){const g=r[l],w=Number(g>>BigInt(d)&BigInt(c));a[w]=a[w].add(n[l])}let h=i;for(let l=a.length-1,g=i;l>0;l--)g=g.add(a[l]),h=h.add(g);if(u=u.add(h),d!==0)for(let l=0;l<s;l++)u=u.double()}return u}function hy(e){return sy(e.Fp),Ps(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ot=BigInt(0),Me=BigInt(1),Si=BigInt(2),by=BigInt(8),gy={zip215:!0};function py(e){const t=hy(e);return Ps(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function wy(e){const t=py(e),{Fp:n,n:r,prehash:i,hash:o,randomBytes:s,nByteLength:c,h:a}=t,f=Si<<BigInt(c*8)-Me,u=n.create,d=hl(t.n,t.nBitLength),h=t.uvRatio||((p,y)=>{try{return{isValid:!0,value:n.sqrt(p*n.inv(y))}}catch{return{isValid:!1,value:ot}}}),l=t.adjustScalarBytes||(p=>p),g=t.domain||((p,y,S)=>{if(Cs("phflag",S),y.length||S)throw new Error("Contexts/pre-hash are not supported");return p});function w(p,y){mr("coordinate "+p,y,ot,f)}function x(p){if(!(p instanceof B))throw new Error("ExtendedPoint expected")}const I=al((p,y)=>{const{ex:S,ey:D,ez:_}=p,O=p.is0();y==null&&(y=O?by:n.inv(_));const C=u(S*y),M=u(D*y),N=u(_*y);if(O)return{x:ot,y:Me};if(N!==Me)throw new Error("invZ was invalid");return{x:C,y:M}}),$=al(p=>{const{a:y,d:S}=t;if(p.is0())throw new Error("bad point: ZERO");const{ex:D,ey:_,ez:O,et:C}=p,M=u(D*D),N=u(_*_),k=u(O*O),F=u(k*k),j=u(M*y),H=u(k*u(j+N)),Z=u(F+u(S*u(M*N)));if(H!==Z)throw new Error("bad point: equation left != right (1)");const K=u(D*_),W=u(O*C);if(K!==W)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(y,S,D,_){this.ex=y,this.ey=S,this.ez=D,this.et=_,w("x",y),w("y",S),w("z",D),w("t",_),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof B)throw new Error("extended point not allowed");const{x:S,y:D}=y||{};return w("x",S),w("y",D),new B(S,D,Me,u(S*D))}static normalizeZ(y){const S=n.invertBatch(y.map(D=>D.ez));return y.map((D,_)=>D.toAffine(S[_])).map(B.fromAffine)}static msm(y,S){return dy(B,d,y,S)}_setWindowSize(y){T.setWindowSize(this,y)}assertValidity(){$(this)}equals(y){x(y);const{ex:S,ey:D,ez:_}=this,{ex:O,ey:C,ez:M}=y,N=u(S*M),k=u(O*_),F=u(D*M),j=u(C*_);return N===k&&F===j}is0(){return this.equals(B.ZERO)}negate(){return new B(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:y}=t,{ex:S,ey:D,ez:_}=this,O=u(S*S),C=u(D*D),M=u(Si*u(_*_)),N=u(y*O),k=S+D,F=u(u(k*k)-O-C),j=N+C,H=j-M,Z=N-C,K=u(F*H),W=u(j*Z),Q=u(F*Z),ee=u(H*j);return new B(K,W,ee,Q)}add(y){x(y);const{a:S,d:D}=t,{ex:_,ey:O,ez:C,et:M}=this,{ex:N,ey:k,ez:F,et:j}=y;if(S===BigInt(-1)){const l0=u((O-_)*(k+N)),d0=u((O+_)*(k-N)),mc=u(d0-l0);if(mc===ot)return this.double();const h0=u(C*Si*j),b0=u(M*Si*F),g0=b0+h0,p0=d0+l0,w0=b0-h0,IE=u(g0*mc),OE=u(p0*w0),UE=u(g0*w0),NE=u(mc*p0);return new B(IE,OE,NE,UE)}const H=u(_*N),Z=u(O*k),K=u(M*D*j),W=u(C*F),Q=u((_+O)*(N+k)-H-Z),ee=W-K,ie=W+K,ae=u(Z-S*H),fe=u(Q*ee),Ct=u(ie*ae),Pi=u(Q*ae),_E=u(ee*ie);return new B(fe,Ct,_E,Pi)}subtract(y){return this.add(y.negate())}wNAF(y){return T.wNAFCached(this,y,B.normalizeZ)}multiply(y){const S=y;mr("scalar",S,Me,r);const{p:D,f:_}=this.wNAF(S);return B.normalizeZ([D,_])[0]}multiplyUnsafe(y,S=B.ZERO){const D=y;return mr("scalar",D,ot,r),D===ot?U:this.is0()||D===Me?this:T.wNAFCachedUnsafe(this,D,B.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(y){return I(this,y)}clearCofactor(){const{h:y}=t;return y===Me?this:this.multiplyUnsafe(y)}static fromHex(y,S=!1){const{d:D,a:_}=t,O=n.BYTES;y=Ut("pointHex",y,O),Cs("zip215",S);const C=y.slice(),M=y[O-1];C[O-1]=M&-129;const N=vi(C),k=S?f:n.ORDER;mr("pointHex.y",N,ot,k);const F=u(N*N),j=u(F-Me),H=u(D*F-_);let{isValid:Z,value:K}=h(j,H);if(!Z)throw new Error("Point.fromHex: invalid y coordinate");const W=(K&Me)===Me,Q=(M&128)!==0;if(!S&&K===ot&&Q)throw new Error("Point.fromHex: x=0 and x_0=1");return Q!==W&&(K=u(-K)),B.fromAffine({x:K,y:N})}static fromPrivateKey(y){return R(y).point}toRawBytes(){const{x:y,y:S}=this.toAffine(),D=$s(S,n.BYTES);return D[D.length-1]|=y&Me?128:0,D}toHex(){return Rs(this.toRawBytes())}}B.BASE=new B(t.Gx,t.Gy,Me,u(t.Gx*t.Gy)),B.ZERO=new B(ot,Me,Me,ot);const{BASE:E,ZERO:U}=B,T=ly(B,c*8);function P(p){return ge(p,r)}function L(p){return P(vi(p))}function R(p){const y=n.BYTES;p=Ut("private key",p,y);const S=Ut("hashed private key",o(p),2*y),D=l(S.slice(0,y)),_=S.slice(y,2*y),O=L(D),C=E.multiply(O),M=C.toRawBytes();return{head:D,prefix:_,scalar:O,point:C,pointBytes:M}}function q(p){return R(p).pointBytes}function z(p=new Uint8Array,...y){const S=cl(...y);return L(o(g(S,Ut("context",p),!!i)))}function m(p,y,S={}){p=Ut("message",p),i&&(p=i(p));const{prefix:D,scalar:_,pointBytes:O}=R(y),C=z(S.context,D,p),M=E.multiply(C).toRawBytes(),N=z(S.context,M,O,p),k=P(C+N*_);mr("signature.s",k,ot,r);const F=cl(M,$s(k,n.BYTES));return Ut("result",F,n.BYTES*2)}const b=gy;function v(p,y,S,D=b){const{context:_,zip215:O}=D,C=n.BYTES;p=Ut("signature",p,2*C),y=Ut("message",y),S=Ut("publicKey",S,C),O!==void 0&&Cs("zip215",O),i&&(y=i(y));const M=vi(p.slice(C,2*C));let N,k,F;try{N=B.fromHex(S,O),k=B.fromHex(p.slice(0,C),O),F=E.multiplyUnsafe(M)}catch{return!1}if(!O&&N.isSmallOrder())return!1;const j=z(_,k.toRawBytes(),N.toRawBytes(),y);return k.add(N.multiplyUnsafe(j)).subtract(F).clearCofactor().equals(B.ZERO)}return E._setWindowSize(8),{CURVE:t,getPublicKey:q,sign:m,verify:v,ExtendedPoint:B,utils:{getExtendedPublicKey:R,randomPrivateKey:()=>s(n.BYTES),precompute(p=8,y=B.BASE){return y._setWindowSize(p),y.multiply(BigInt(3)),y}}}}BigInt(0),BigInt(1);const Hs=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),wl=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const yy=BigInt(1),yl=BigInt(2);BigInt(3);const my=BigInt(5),Ey=BigInt(8);function xy(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=Hs,s=e*e%o*e%o,c=lt(s,yl,o)*s%o,a=lt(c,yy,o)*e%o,f=lt(a,my,o)*a%o,u=lt(f,t,o)*f%o,d=lt(u,n,o)*u%o,h=lt(d,r,o)*d%o,l=lt(h,i,o)*h%o,g=lt(l,i,o)*h%o,w=lt(g,t,o)*f%o;return{pow_p_5_8:lt(w,yl,o)*e%o,b2:s}}function vy(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function By(e,t){const n=Hs,r=ge(t*t*t,n),i=ge(r*r*t,n),o=xy(e*i).pow_p_5_8;let s=ge(e*r*o,n);const c=ge(t*s*s,n),a=s,f=ge(s*wl,n),u=c===e,d=c===ge(-e,n),h=c===ge(-e*wl,n);return u&&(s=a),(d||h)&&(s=f),iy(s,n)&&(s=ge(-s,n)),{isValid:u||d,value:s}}const Sy=hl(Hs,void 0,!0),Ay={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Sy,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ey,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Kw,randomBytes:mw,adjustScalarBytes:vy,uvRatio:By};wy(Ay);const ml=".",El="base64url",Dy="utf8",_y="utf8";function xl(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Iy(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?xl(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Oy(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),f=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,x=0,I=0,$=g.length;I!==$&&g[I]===0;)I++,w++;for(var B=($-I)*u+1>>>0,E=new Uint8Array(B);I!==$;){for(var U=g[I],T=0,P=B-1;(U!==0||T<x)&&P!==-1;P--,T++)U+=256*E[P]>>>0,E[P]=U%c>>>0,U=U/c>>>0;if(U!==0)throw new Error("Non-zero carry");x=T,I++}for(var L=B-x;L!==B&&E[L]===0;)L++;for(var R=a.repeat(w);L<B;++L)R+=e.charAt(E[L]);return R}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var x=0,I=0;g[w]===a;)x++,w++;for(var $=(g.length-w)*f+1>>>0,B=new Uint8Array($);g[w];){var E=n[g.charCodeAt(w)];if(E===255)return;for(var U=0,T=$-1;(E!==0||U<I)&&T!==-1;T--,U++)E+=c*B[T]>>>0,B[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");I=U,w++}if(g[w]!==" "){for(var P=$-I;P!==$&&B[P]===0;)P++;for(var L=new Uint8Array(x+($-P)),R=x;P!==$;)L[R++]=B[P++];return L}}}function l(g){var w=h(g);if(w)return w;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:l}}var Uy=Oy,Ny=Uy;const vl=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Ty=e=>new TextEncoder().encode(e),Cy=e=>new TextDecoder().decode(e);class Ry{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class $y{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Bl(this,t)}}class Fy{constructor(t){this.decoders=t}or(t){return Bl(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Bl=(e,t)=>new Fy({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Py{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Ry(t,n,r),this.decoder=new $y(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ai=({name:e,prefix:t,encode:n,decode:r})=>new Py(e,t,n,r),Er=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Ny(n,t);return Ai({prefix:e,name:t,encode:r,decode:o=>vl(i(o))})},Ly=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,f=0;for(let u=0;u<o;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|d,c+=n,c>=8&&(c-=8,s[f++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},ky=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},Ee=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Ai({prefix:t,name:e,encode(i){return ky(i,r,n)},decode(i){return Ly(i,r,n,e)}}),My=Ai({prefix:"\0",name:"identity",encode:e=>Cy(e),decode:e=>Ty(e)});var jy=Object.freeze({__proto__:null,identity:My});const zy=Ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Hy=Object.freeze({__proto__:null,base2:zy});const qy=Ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vy=Object.freeze({__proto__:null,base8:qy});const Ky=Er({prefix:"9",name:"base10",alphabet:"0123456789"});var Gy=Object.freeze({__proto__:null,base10:Ky});const Zy=Ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wy=Ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Yy=Object.freeze({__proto__:null,base16:Zy,base16upper:Wy});const Xy=Ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Jy=Ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qy=Ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),em=Ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tm=Ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nm=Ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),rm=Ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),im=Ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),om=Ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var sm=Object.freeze({__proto__:null,base32:Xy,base32upper:Jy,base32pad:Qy,base32padupper:em,base32hex:tm,base32hexupper:nm,base32hexpad:rm,base32hexpadupper:im,base32z:om});const cm=Er({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),am=Er({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var fm=Object.freeze({__proto__:null,base36:cm,base36upper:am});const um=Er({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lm=Er({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var dm=Object.freeze({__proto__:null,base58btc:um,base58flickr:lm});const hm=Ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bm=Ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gm=Ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pm=Ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wm=Object.freeze({__proto__:null,base64:hm,base64pad:bm,base64url:gm,base64urlpad:pm});const Sl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ym=Sl.reduce((e,t,n)=>(e[n]=t,e),[]),mm=Sl.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Em(e){return e.reduce((t,n)=>(t+=ym[n],t),"")}function xm(e){const t=[];for(const n of e){const r=mm[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const vm=Ai({prefix:"\u{1F680}",name:"base256emoji",encode:Em,decode:xm});var Bm=Object.freeze({__proto__:null,base256emoji:vm}),Sm=Dl,Al=128,Am=127,Dm=~Am,_m=Math.pow(2,31);function Dl(e,t,n){t=t||[],n=n||0;for(var r=n;e>=_m;)t[n++]=e&255|Al,e/=128;for(;e&Dm;)t[n++]=e&255|Al,e>>>=7;return t[n]=e|0,Dl.bytes=n-r+1,t}var Im=qs,Om=128,_l=127;function qs(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw qs.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&_l)<<i:(s&_l)*Math.pow(2,i),i+=7}while(s>=Om);return qs.bytes=o-r,n}var Um=Math.pow(2,7),Nm=Math.pow(2,14),Tm=Math.pow(2,21),Cm=Math.pow(2,28),Rm=Math.pow(2,35),$m=Math.pow(2,42),Fm=Math.pow(2,49),Pm=Math.pow(2,56),Lm=Math.pow(2,63),km=function(e){return e<Um?1:e<Nm?2:e<Tm?3:e<Cm?4:e<Rm?5:e<$m?6:e<Fm?7:e<Pm?8:e<Lm?9:10},Mm={encode:Sm,decode:Im,encodingLength:km},Il=Mm;const Ol=(e,t,n=0)=>(Il.encode(e,t,n),t),Ul=e=>Il.encodingLength(e),Vs=(e,t)=>{const n=t.byteLength,r=Ul(e),i=r+Ul(n),o=new Uint8Array(i+n);return Ol(e,o,0),Ol(n,o,r),o.set(t,i),new jm(e,n,t,o)};class jm{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Nl=({name:e,code:t,encode:n})=>new zm(e,t,n);class zm{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Vs(this.code,n):n.then(r=>Vs(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Tl=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Hm=Nl({name:"sha2-256",code:18,encode:Tl("SHA-256")}),qm=Nl({name:"sha2-512",code:19,encode:Tl("SHA-512")});var Vm=Object.freeze({__proto__:null,sha256:Hm,sha512:qm});const Cl=0,Km="identity",Rl=vl;var Gm=Object.freeze({__proto__:null,identity:{code:Cl,name:Km,encode:Rl,digest:e=>Vs(Cl,Rl(e))}});new TextEncoder,new TextDecoder;const $l={...jy,...Hy,...Vy,...Gy,...Yy,...sm,...fm,...dm,...wm,...Bm};({...Vm,...Gm});function Fl(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Pl=Fl("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ks=Fl("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Iy(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),Ll={utf8:Pl,"utf-8":Pl,hex:$l.base16,latin1:Ks,ascii:Ks,binary:Ks,...$l};function Zm(e,t="utf8"){const n=Ll[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}function Gs(e,t="utf8"){const n=Ll[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xl(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function kl(e){return hw(Zm(Gs(e,El),Dy))}function Wm(e){return Gs(e,El)}function Ym(e){const t=e.split(ml),n=kl(t[0]),r=kl(t[1]),i=Wm(t[2]),o=Gs(t.slice(0,2).join(ml),_y);return{header:n,payload:r,signature:i,data:o}}function Zs(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ml(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zs(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function xr(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));const n=Ml(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return Zs(n)}function Xm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(n[s]!==255)throw new TypeError(o+" is ambiguous");n[s]=i}var c=e.length,a=e.charAt(0),f=Math.log(c)/Math.log(256),u=Math.log(256)/Math.log(c);function d(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var w=0,x=0,I=0,$=g.length;I!==$&&g[I]===0;)I++,w++;for(var B=($-I)*u+1>>>0,E=new Uint8Array(B);I!==$;){for(var U=g[I],T=0,P=B-1;(U!==0||T<x)&&P!==-1;P--,T++)U+=256*E[P]>>>0,E[P]=U%c>>>0,U=U/c>>>0;if(U!==0)throw new Error("Non-zero carry");x=T,I++}for(var L=B-x;L!==B&&E[L]===0;)L++;for(var R=a.repeat(w);L<B;++L)R+=e.charAt(E[L]);return R}function h(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var w=0;if(g[w]!==" "){for(var x=0,I=0;g[w]===a;)x++,w++;for(var $=(g.length-w)*f+1>>>0,B=new Uint8Array($);g[w];){var E=n[g.charCodeAt(w)];if(E===255)return;for(var U=0,T=$-1;(E!==0||U<I)&&T!==-1;T--,U++)E+=c*B[T]>>>0,B[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");I=U,w++}if(g[w]!==" "){for(var P=$-I;P!==$&&B[P]===0;)P++;for(var L=new Uint8Array(x+($-P)),R=x;P!==$;)L[R++]=B[P++];return L}}}function l(g){var w=h(g);if(w)return w;throw new Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:h,decode:l}}var Jm=Xm,Qm=Jm;const jl=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},e3=e=>new TextEncoder().encode(e),t3=e=>new TextDecoder().decode(e);class n3{constructor(t,n,r){this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class r3{constructor(t,n,r){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return zl(this,t)}}class i3{constructor(t){this.decoders=t}or(t){return zl(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const zl=(e,t)=>new i3({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class o3{constructor(t,n,r,i){this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new n3(t,n,r),this.decoder=new r3(t,n,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Di=({name:e,prefix:t,encode:n,decode:r})=>new o3(e,t,n,r),vr=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:i}=Qm(n,t);return Di({prefix:e,name:t,encode:r,decode:o=>jl(i(o))})},s3=(e,t,n,r)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;const s=new Uint8Array(o*n/8|0);let c=0,a=0,f=0;for(let u=0;u<o;++u){const d=i[e[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);a=a<<n|d,c+=n,c>=8&&(c-=8,s[f++]=255&a>>c)}if(c>=n||255&a<<8-c)throw new SyntaxError("Unexpected end of data");return s},c3=(e,t,n)=>{const r=t[t.length-1]==="=",i=(1<<n)-1;let o="",s=0,c=0;for(let a=0;a<e.length;++a)for(c=c<<8|e[a],s+=8;s>n;)s-=n,o+=t[i&c>>s];if(s&&(o+=t[i&c<<n-s]),r)for(;o.length*n&7;)o+="=";return o},xe=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Di({prefix:t,name:e,encode(i){return c3(i,r,n)},decode(i){return s3(i,r,n,e)}}),a3=Di({prefix:"\0",name:"identity",encode:e=>t3(e),decode:e=>e3(e)});var f3=Object.freeze({__proto__:null,identity:a3});const u3=xe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var l3=Object.freeze({__proto__:null,base2:u3});const d3=xe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var h3=Object.freeze({__proto__:null,base8:d3});const b3=vr({prefix:"9",name:"base10",alphabet:"0123456789"});var g3=Object.freeze({__proto__:null,base10:b3});const p3=xe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w3=xe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var y3=Object.freeze({__proto__:null,base16:p3,base16upper:w3});const m3=xe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),E3=xe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),x3=xe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),v3=xe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),B3=xe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),S3=xe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),A3=xe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),D3=xe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_3=xe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var I3=Object.freeze({__proto__:null,base32:m3,base32upper:E3,base32pad:x3,base32padupper:v3,base32hex:B3,base32hexupper:S3,base32hexpad:A3,base32hexpadupper:D3,base32z:_3});const O3=vr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),U3=vr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var N3=Object.freeze({__proto__:null,base36:O3,base36upper:U3});const T3=vr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),C3=vr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var R3=Object.freeze({__proto__:null,base58btc:T3,base58flickr:C3});const $3=xe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),F3=xe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),P3=xe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),L3=xe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var k3=Object.freeze({__proto__:null,base64:$3,base64pad:F3,base64url:P3,base64urlpad:L3});const Hl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),M3=Hl.reduce((e,t,n)=>(e[n]=t,e),[]),j3=Hl.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function z3(e){return e.reduce((t,n)=>(t+=M3[n],t),"")}function H3(e){const t=[];for(const n of e){const r=j3[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(r)}return new Uint8Array(t)}const q3=Di({prefix:"\u{1F680}",name:"base256emoji",encode:z3,decode:H3});var V3=Object.freeze({__proto__:null,base256emoji:q3}),K3=Vl,ql=128,G3=127,Z3=~G3,W3=Math.pow(2,31);function Vl(e,t,n){t=t||[],n=n||0;for(var r=n;e>=W3;)t[n++]=e&255|ql,e/=128;for(;e&Z3;)t[n++]=e&255|ql,e>>>=7;return t[n]=e|0,Vl.bytes=n-r+1,t}var Y3=Ws,X3=128,Kl=127;function Ws(e,r){var n=0,r=r||0,i=0,o=r,s,c=e.length;do{if(o>=c)throw Ws.bytes=0,new RangeError("Could not decode varint");s=e[o++],n+=i<28?(s&Kl)<<i:(s&Kl)*Math.pow(2,i),i+=7}while(s>=X3);return Ws.bytes=o-r,n}var J3=Math.pow(2,7),Q3=Math.pow(2,14),e8=Math.pow(2,21),t8=Math.pow(2,28),n8=Math.pow(2,35),r8=Math.pow(2,42),i8=Math.pow(2,49),o8=Math.pow(2,56),s8=Math.pow(2,63),c8=function(e){return e<J3?1:e<Q3?2:e<e8?3:e<t8?4:e<n8?5:e<r8?6:e<i8?7:e<o8?8:e<s8?9:10},a8={encode:K3,decode:Y3,encodingLength:c8},Gl=a8;const Zl=(e,t,n=0)=>(Gl.encode(e,t,n),t),Wl=e=>Gl.encodingLength(e),Ys=(e,t)=>{const n=t.byteLength,r=Wl(e),i=r+Wl(n),o=new Uint8Array(i+n);return Zl(e,o,0),Zl(n,o,r),o.set(t,i),new f8(e,n,t,o)};class f8{constructor(t,n,r,i){this.code=t,this.size=n,this.digest=r,this.bytes=i}}const Yl=({name:e,code:t,encode:n})=>new u8(e,t,n);class u8{constructor(t,n,r){this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Ys(this.code,n):n.then(r=>Ys(this.code,r))}else throw Error("Unknown type, must be binary type")}}const Xl=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),l8=Yl({name:"sha2-256",code:18,encode:Xl("SHA-256")}),d8=Yl({name:"sha2-512",code:19,encode:Xl("SHA-512")});var h8=Object.freeze({__proto__:null,sha256:l8,sha512:d8});const Jl=0,b8="identity",Ql=jl;var g8=Object.freeze({__proto__:null,identity:{code:Jl,name:b8,encode:Ql,digest:e=>Ys(Jl,Ql(e))}});new TextEncoder,new TextDecoder;const ed={...f3,...l3,...h3,...g3,...y3,...I3,...N3,...R3,...k3,...V3};({...h8,...g8});function td(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const nd=td("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Xs=td("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=Ml(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),rd={utf8:nd,"utf-8":nd,hex:ed.base16,latin1:Xs,ascii:Xs,binary:Xs,...ed};function Qe(e,t="utf8"){const n=rd[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zs(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Ke(e,t="utf8"){const n=rd[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}const Js="base10",Fe="base16",Hn="base64pad",_i="base64url",qn="utf8",Qs=0,Vn=1,Br=2,p8=0,id=1,Sr=12,ec=32;function w8(){const e=_s.utils.randomPrivateKey(),t=_s.getPublicKey(e);return{privateKey:Ke(e,Fe),publicKey:Ke(t,Fe)}}function y8(){const e=pt(ec);return Ke(e,Fe)}function m8(e,t){const n=_s.getSharedSecret(Qe(e,Fe),Qe(t,Fe)),r=Wp(Mr,n,void 0,void 0,ec);return Ke(r,Fe)}function E8(e){const t=Mr(Qe(e,Fe));return Ke(t,Fe)}function x8(e){const t=Mr(Qe(e,qn));return Ke(t,Fe)}function tc(e){return Qe(`${e}`,Js)}function vn(e){return Number(Ke(e,Js))}function od(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function sd(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=(4-t.length%4)%4;return t+"=".repeat(n)}function v8(e){const t=tc(typeof e.type<"u"?e.type:Qs);if(vn(t)===Vn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Qe(e.senderPublicKey,Fe):void 0,r=typeof e.iv<"u"?Qe(e.iv,Fe):pt(Sr),i=Qe(e.symKey,Fe),o=qu(i,r).encrypt(Qe(e.message,qn)),s=nc({type:t,sealed:o,iv:r,senderPublicKey:n});return e.encoding===_i?od(s):s}function B8(e){const t=Qe(e.symKey,Fe),{sealed:n,iv:r}=Ii({encoded:e.encoded,encoding:e.encoding}),i=qu(t,r).decrypt(n);if(i===null)throw new Error("Failed to decrypt");return Ke(i,qn)}function S8(e,t){const n=tc(Br),r=pt(Sr),i=Qe(e,qn),o=nc({type:n,sealed:i,iv:r});return t===_i?od(o):o}function A8(e,t){const{sealed:n}=Ii({encoded:e,encoding:t});return Ke(n,qn)}function nc(e){if(vn(e.type)===Br)return Ke(xr([e.type,e.sealed]),Hn);if(vn(e.type)===Vn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ke(xr([e.type,e.senderPublicKey,e.iv,e.sealed]),Hn)}return Ke(xr([e.type,e.iv,e.sealed]),Hn)}function Ii(e){const t=(e.encoding||Hn)===_i?sd(e.encoded):e.encoded,n=Qe(t,Hn),r=n.slice(p8,id),i=id;if(vn(r)===Vn){const a=i+ec,f=a+Sr,u=n.slice(i,a),d=n.slice(a,f),h=n.slice(f);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(vn(r)===Br){const a=n.slice(i),f=pt(Sr);return{type:r,sealed:a,iv:f}}const o=i+Sr,s=n.slice(i,o),c=n.slice(o);return{type:r,sealed:c,iv:s}}function D8(e,t){const n=Ii({encoded:e,encoding:t?.encoding});return cd({type:vn(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ke(n.senderPublicKey,Fe):void 0,receiverPublicKey:t?.receiverPublicKey})}function cd(e){const t=e?.type||Qs;if(t===Vn){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function _8(e){return e.type===Vn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function I8(e){return e.type===Br}function ad(e){const t=Buffer.from(e.x,"base64"),n=Buffer.from(e.y,"base64");return xr([new Uint8Array([4]),t,n])}function O8(e,t){const[n,r,i]=e.split("."),o=Buffer.from(sd(i),"base64");if(o.length!==64)throw new Error("Invalid signature length");const s=o.slice(0,32),c=o.slice(32,64),a=`${n}.${r}`,f=Mr(a),u=ad(t);if(!uw.verify(xr([s,c]),f,u))throw new Error("Invalid signature");return Ym(e).payload}const U8={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},fd="irn";function N8(e){return e?.relay||{protocol:fd}}function T8(e){const t=U8[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var C8=Object.defineProperty,R8=Object.defineProperties,$8=Object.getOwnPropertyDescriptors,ud=Object.getOwnPropertySymbols,F8=Object.prototype.hasOwnProperty,P8=Object.prototype.propertyIsEnumerable,ld=(e,t,n)=>t in e?C8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rc=(e,t)=>{for(var n in t||(t={}))F8.call(t,n)&&ld(e,n,t[n]);if(ud)for(var n of ud(t))P8.call(t,n)&&ld(e,n,t[n]);return e},L8=(e,t)=>R8(e,$8(t));function dd(e,t="-"){const n={},r="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(r)){const o=i.replace(r,""),s=e[i];n[o]=s}}),n}function k8(e){if(!e.includes("wc:")){const f=no(e);f!=null&&f.includes("wc:")&&(e=f)}e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,t),i=e.substring(t+1,n).split("@"),o=typeof n<"u"?e.substring(n):"",s=new URLSearchParams(o),c=Object.fromEntries(s.entries()),a=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:r,topic:hd(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:dd(c),methods:a,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function hd(e){return e.startsWith("//")?e.substring(2):e}function bd(e,t="-"){const n="relay",r={};return Object.keys(e).forEach(i=>{const o=i,s=n+t+o;e[o]&&(r[s]=e[o])}),r}function M8(e){const t=new URLSearchParams,n=rc(rc(L8(rc({},bd(e.relay)),{symKey:e.symKey}),e.expiryTimestamp&&{expiryTimestamp:e.expiryTimestamp.toString()}),e.methods&&{methods:e.methods.join(",")});return Object.entries(n).sort(([r],[i])=>r.localeCompare(i)).forEach(([r,i])=>{i!==void 0&&t.append(r,String(i))}),`${e.protocol}:${e.topic}@${e.version}?${t}`}function j8(e,t,n){return`${e}?wc_ev=${n}&topic=${t}`}var z8=Object.defineProperty,H8=Object.defineProperties,q8=Object.getOwnPropertyDescriptors,gd=Object.getOwnPropertySymbols,V8=Object.prototype.hasOwnProperty,K8=Object.prototype.propertyIsEnumerable,pd=(e,t,n)=>t in e?z8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G8=(e,t)=>{for(var n in t||(t={}))V8.call(t,n)&&pd(e,n,t[n]);if(gd)for(var n of gd(t))K8.call(t,n)&&pd(e,n,t[n]);return e},Z8=(e,t)=>H8(e,q8(t));function Bn(e){const t=[];return e.forEach(n=>{const[r,i]=n.split(":");t.push(`${r}:${i}`)}),t}function wd(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Bn(n.accounts))}),[...new Set(t)]}function W8(e){const t=[];return Object.values(e).forEach(n=>{t.push(...n.methods)}),[...new Set(t)]}function Y8(e){const t=[];return Object.values(e).forEach(n=>{t.push(...n.events)}),[...new Set(t)]}function yd(e,t){const n=[];return Object.values(e).forEach(r=>{Bn(r.accounts).includes(t)&&n.push(...r.methods)}),n}function md(e,t){const n=[];return Object.values(e).forEach(r=>{Bn(r.accounts).includes(t)&&n.push(...r.events)}),n}function X8(e,t){const n=Ud(e,t);if(n)throw new Error(n.message);const r={};for(const[i,o]of Object.entries(e))r[i]={methods:o.methods,events:o.events,chains:o.accounts.map(s=>`${s.split(":")[0]}:${s.split(":")[1]}`)};return r}function J8(e){var t;const{proposal:{requiredNamespaces:n,optionalNamespaces:r={}},supportedNamespaces:i}=e,o=Ar(n),s=Ar(r),c={};Object.keys(i).forEach(u=>{const d=i[u].chains,h=i[u].methods,l=i[u].events,g=i[u].accounts;d.forEach(w=>{if(!g.some(x=>x.includes(w)))throw new Error(`No accounts provided for chain ${w} in namespace ${u}`)}),c[u]={chains:d,methods:h,events:l,accounts:g}});const a=Td(n,c,"approve()");if(a)throw new Error(a.message);const f={};if(!Object.keys(n).length&&!Object.keys(r).length)return c;Object.keys(o).forEach(u=>{const d=i[u].chains.filter(w=>{var x,I;return(I=(x=o[u])==null?void 0:x.chains)==null?void 0:I.includes(w)}),h=i[u].methods.filter(w=>{var x,I;return(I=(x=o[u])==null?void 0:x.methods)==null?void 0:I.includes(w)}),l=i[u].events.filter(w=>{var x,I;return(I=(x=o[u])==null?void 0:x.events)==null?void 0:I.includes(w)}),g=d.map(w=>i[u].accounts.filter(x=>x.includes(`${w}:`))).flat();f[u]={chains:d,methods:h,events:l,accounts:g}}),Object.keys(s).forEach(u=>{var d,h,l,g,w,x;if(!i[u])return;const I=(h=(d=s[u])==null?void 0:d.chains)==null?void 0:h.filter(U=>i[u].chains.includes(U)),$=i[u].methods.filter(U=>{var T,P;return(P=(T=s[u])==null?void 0:T.methods)==null?void 0:P.includes(U)}),B=i[u].events.filter(U=>{var T,P;return(P=(T=s[u])==null?void 0:T.events)==null?void 0:P.includes(U)}),E=I?.map(U=>i[u].accounts.filter(T=>T.includes(`${U}:`))).flat();f[u]={chains:Ze((l=f[u])==null?void 0:l.chains,I),methods:Ze((g=f[u])==null?void 0:g.methods,$),events:Ze((w=f[u])==null?void 0:w.events,B),accounts:Ze((x=f[u])==null?void 0:x.accounts,E)}});for(const[u,d]of Object.entries(f))(d.accounts.length===0||((t=d?.chains)==null?void 0:t.length)===0)&&delete f[u];return f}function ic(e){return e.includes(":")}function Ed(e){return ic(e)?e.split(":")[0]:e}function Ar(e){var t,n,r;const i={};if(!Oi(e))return i;for(const[o,s]of Object.entries(e)){const c=ic(o)?[o]:s.chains,a=s.methods||[],f=s.events||[],u=Ed(o);i[u]=Z8(G8({},i[u]),{chains:Ze(c,(t=i[u])==null?void 0:t.chains),methods:Ze(a,(n=i[u])==null?void 0:n.methods),events:Ze(f,(r=i[u])==null?void 0:r.events)})}return i}function xd(e){const t={};return e?.forEach(n=>{var r;const[i,o]=n.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(n),(r=t[i].chains)==null||r.push(`${i}:${o}`)}),t}function Q8(e,t){t=t.map(r=>r.replace("did:pkh:",""));const n=xd(t);for(const[r,i]of Object.entries(n))i.methods?i.methods=Ze(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return n}function e6(e,t){var n,r,i,o,s,c;const a=Ar(e),f=Ar(t),u={},d=Object.keys(a).concat(Object.keys(f));for(const h of d)u[h]={chains:Ze((n=a[h])==null?void 0:n.chains,(r=f[h])==null?void 0:r.chains),methods:Ze((i=a[h])==null?void 0:i.methods,(o=f[h])==null?void 0:o.methods),events:Ze((s=a[h])==null?void 0:s.events,(c=f[h])==null?void 0:c.events)};return u}const vd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Bd={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Nt(e,t){const{message:n,code:r}=Bd[e];return{message:t?`${n} ${t}`:n,code:r}}function Sn(e,t){const{message:n,code:r}=vd[e];return{message:t?`${n} ${t}`:n,code:r}}function Dr(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Oi(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function nn(e){return typeof e>"u"}function Ge(e,t){return t&&nn(e)?!0:typeof e=="string"&&!!e.trim().length}function Ui(e,t){return t&&nn(e)?!0:typeof e=="number"&&!isNaN(e)}function t6(e,t){const{requiredNamespaces:n}=t,r=Object.keys(e.namespaces),i=Object.keys(n);let o=!0;return Ft(i,r)?(r.forEach(s=>{const{accounts:c,methods:a,events:f}=e.namespaces[s],u=Bn(c),d=n[s];(!Ft(Tr(s,d),u)||!Ft(d.methods,a)||!Ft(d.events,f))&&(o=!1)}),o):!1}function _r(e){return Ge(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Sd(e){if(Ge(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&_r(n)}}return!1}function n6(e){function t(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Ge(e,!1)){if(t(e))return!0;const n=no(e);return t(n)}}catch{}return!1}function r6(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function i6(e){return e?.topic}function o6(e,t){let n=null;return Ge(e?.publicKey,!1)||(n=Nt("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function oc(e){let t=!0;return Dr(e)?e.length&&(t=e.every(n=>Ge(n,!1))):t=!1,t}function Ad(e,t,n){let r=null;return Dr(t)&&t.length?t.forEach(i=>{r||_r(i)||(r=Sn("UNSUPPORTED_CHAINS",`${n}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):_r(e)||(r=Sn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Dd(e,t,n){let r=null;return Object.entries(e).forEach(([i,o])=>{if(r)return;const s=Ad(i,Tr(i,o),`${t} ${n}`);s&&(r=s)}),r}function _d(e,t){let n=null;return Dr(e)?e.forEach(r=>{n||Sd(r)||(n=Sn("UNSUPPORTED_ACCOUNTS",`${t}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Sn("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Id(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=_d(r?.accounts,`${t} namespace`);i&&(n=i)}),n}function Od(e,t){let n=null;return oc(e?.methods)?oc(e?.events)||(n=Sn("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Sn("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function sc(e,t){let n=null;return Object.values(e).forEach(r=>{if(n)return;const i=Od(r,`${t}, namespace`);i&&(n=i)}),n}function s6(e,t,n){let r=null;if(e&&Oi(e)){const i=sc(e,t);i&&(r=i);const o=Dd(e,t,n);o&&(r=o)}else r=Nt("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return r}function Ud(e,t){let n=null;if(e&&Oi(e)){const r=sc(e,t);r&&(n=r);const i=Id(e,t);i&&(n=i)}else n=Nt("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Nd(e){return Ge(e.protocol,!0)}function c6(e,t){let n=!1;return t&&!e?n=!0:e&&Dr(e)&&e.length&&e.forEach(r=>{n=Nd(r)}),n}function a6(e){return typeof e=="number"}function f6(e){return typeof e<"u"&&typeof e!==null}function u6(e){return!(!e||typeof e!="object"||!e.code||!Ui(e.code,!1)||!e.message||!Ge(e.message,!1))}function l6(e){return!(nn(e)||!Ge(e.method,!1))}function d6(e){return!(nn(e)||nn(e.result)&&nn(e.error)||!Ui(e.id,!1)||!Ge(e.jsonrpc,!1))}function h6(e){return!(nn(e)||!Ge(e.name,!1))}function b6(e,t){return!(!_r(t)||!wd(e).includes(t))}function g6(e,t,n){return Ge(n,!1)?yd(e,t).includes(n):!1}function p6(e,t,n){return Ge(n,!1)?md(e,t).includes(n):!1}function Td(e,t,n){let r=null;const i=w6(e),o=y6(t),s=Object.keys(i),c=Object.keys(o),a=Cd(Object.keys(e)),f=Cd(Object.keys(t)),u=a.filter(d=>!f.includes(d));return u.length&&(r=Nt("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(t).toString()}`)),Ft(s,c)||(r=Nt("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${c.toString()}`)),Object.keys(t).forEach(d=>{if(!d.includes(":")||r)return;const h=Bn(t[d].accounts);h.includes(d)||(r=Nt("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),s.forEach(d=>{r||(Ft(i[d].methods,o[d].methods)?Ft(i[d].events,o[d].events)||(r=Nt("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Nt("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function w6(e){const t={};return Object.keys(e).forEach(n=>{var r;n.includes(":")?t[n]=e[n]:(r=e[n].chains)==null||r.forEach(i=>{t[i]={methods:e[n].methods,events:e[n].events}})}),t}function Cd(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function y6(e){const t={};return Object.keys(e).forEach(n=>{if(n.includes(":"))t[n]=e[n];else{const r=Bn(e[n].accounts);r?.forEach(i=>{t[i]={accounts:e[n].accounts.filter(o=>o.includes(`${i}:`)),methods:e[n].methods,events:e[n].events}})}}),t}function m6(e,t){return Ui(e,!1)&&e<=t.max&&e>=t.min}function E6(){const e=hn();return new Promise(t=>{switch(e){case Ue.browser:t(Rd());break;case Ue.reactNative:t($d());break;case Ue.node:t(Fd());break;default:t(!0)}})}function Rd(){return On()&&navigator?.onLine}async function $d(){if($t()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e?.isConnected}return!0}function Fd(){return!0}function x6(e){switch(hn()){case Ue.browser:Pd(e);break;case Ue.reactNative:Ld(e);break;case Ue.node:break}}function Pd(e){!$t()&&On()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function Ld(e){$t()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}function v6(){var e;return On()&&In()?((e=In())==null?void 0:e.visibilityState)==="visible":!0}const cc={};class B6{static get(t){return cc[t]}static set(t,n){cc[t]=n}static delete(t){delete cc[t]}}const S6="Input must be an string, Buffer or Uint8Array";function A6(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(S6);return t}function D6(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function Ni(e){return(4294967296+e).toString(16).substring(1)}function _6(e,t,n){let r=`
`+e+" = ";for(let i=0;i<t.length;i+=2){if(n===32)r+=Ni(t[i]).toUpperCase(),r+=" ",r+=Ni(t[i+1]).toUpperCase();else if(n===64)r+=Ni(t[i+1]).toUpperCase(),r+=Ni(t[i]).toUpperCase();else throw new Error("Invalid size "+n);i%6===4?r+=`
`+new Array(e.length+4).join(" "):i<t.length-2&&(r+=" ")}console.log(r)}function I6(e,t,n){let r=new Date().getTime();const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=s%256;const o=new Date().getTime();console.log("Generated random input in "+(o-r)+"ms"),r=o;for(let s=0;s<n;s++){const c=e(i),a=new Date().getTime(),f=a-r;r=a,console.log("Hashed in "+f+"ms: "+c.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(f/1e3)*100)/100+" MB PER SECOND")}}var kd={normalizeInput:A6,toHex:D6,debugPrint:_6,testSpeed:I6};const Ti=kd;function Ci(e,t,n){const r=e[t]+e[n];let i=e[t+1]+e[n+1];r>=4294967296&&i++,e[t]=r,e[t+1]=i}function Md(e,t,n,r){let i=e[t]+n;n<0&&(i+=4294967296);let o=e[t+1]+r;i>=4294967296&&o++,e[t]=i,e[t+1]=o}function jd(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function rn(e,t,n,r,i,o){const s=Ir[i],c=Ir[i+1],a=Ir[o],f=Ir[o+1];Ci(X,e,t),Md(X,e,s,c);let u=X[r]^X[e],d=X[r+1]^X[e+1];X[r]=d,X[r+1]=u,Ci(X,n,r),u=X[t]^X[n],d=X[t+1]^X[n+1],X[t]=u>>>24^d<<8,X[t+1]=d>>>24^u<<8,Ci(X,e,t),Md(X,e,a,f),u=X[r]^X[e],d=X[r+1]^X[e+1],X[r]=u>>>16^d<<16,X[r+1]=d>>>16^u<<16,Ci(X,n,r),u=X[t]^X[n],d=X[t+1]^X[n+1],X[t]=d>>>31^u<<1,X[t+1]=u>>>31^d<<1}const zd=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),O6=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Ie=new Uint8Array(O6.map(function(e){return e*2})),X=new Uint32Array(32),Ir=new Uint32Array(32);function Hd(e,t){let n=0;for(n=0;n<16;n++)X[n]=e.h[n],X[n+16]=zd[n];for(X[24]=X[24]^e.t,X[25]=X[25]^e.t/4294967296,t&&(X[28]=~X[28],X[29]=~X[29]),n=0;n<32;n++)Ir[n]=jd(e.b,4*n);for(n=0;n<12;n++)rn(0,8,16,24,Ie[n*16+0],Ie[n*16+1]),rn(2,10,18,26,Ie[n*16+2],Ie[n*16+3]),rn(4,12,20,28,Ie[n*16+4],Ie[n*16+5]),rn(6,14,22,30,Ie[n*16+6],Ie[n*16+7]),rn(0,10,20,30,Ie[n*16+8],Ie[n*16+9]),rn(2,12,22,24,Ie[n*16+10],Ie[n*16+11]),rn(4,14,16,26,Ie[n*16+12],Ie[n*16+13]),rn(6,8,18,28,Ie[n*16+14],Ie[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^X[n]^X[n+16]}const on=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function qd(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};on.fill(0),on[0]=e,t&&(on[1]=t.length),on[2]=1,on[3]=1,n&&on.set(n,32),r&&on.set(r,48);for(let o=0;o<16;o++)i.h[o]=zd[o]^jd(on,o*4);return t&&(ac(i,t),i.c=128),i}function ac(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,Hd(e,!1),e.c=0),e.b[e.c++]=t[n]}function Vd(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;Hd(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function Kd(e,t,n,r,i){n=n||64,e=Ti.normalizeInput(e),r&&(r=Ti.normalizeInput(r)),i&&(i=Ti.normalizeInput(i));const o=qd(n,t,r,i);return ac(o,e),Vd(o)}function U6(e,t,n,r,i){const o=Kd(e,t,n,r,i);return Ti.toHex(o)}var N6={blake2b:Kd,blake2bHex:U6,blake2bInit:qd,blake2bUpdate:ac,blake2bFinal:Vd};const Gd=kd;function T6(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function sn(e,t,n,r,i,o){re[e]=re[e]+re[t]+i,re[r]=Ri(re[r]^re[e],16),re[n]=re[n]+re[r],re[t]=Ri(re[t]^re[n],12),re[e]=re[e]+re[t]+o,re[r]=Ri(re[r]^re[e],8),re[n]=re[n]+re[r],re[t]=Ri(re[t]^re[n],7)}function Ri(e,t){return e>>>t^e<<32-t}const Zd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Oe=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),re=new Uint32Array(16),ve=new Uint32Array(16);function Wd(e,t){let n=0;for(n=0;n<8;n++)re[n]=e.h[n],re[n+8]=Zd[n];for(re[12]^=e.t,re[13]^=e.t/4294967296,t&&(re[14]=~re[14]),n=0;n<16;n++)ve[n]=T6(e.b,4*n);for(n=0;n<10;n++)sn(0,4,8,12,ve[Oe[n*16+0]],ve[Oe[n*16+1]]),sn(1,5,9,13,ve[Oe[n*16+2]],ve[Oe[n*16+3]]),sn(2,6,10,14,ve[Oe[n*16+4]],ve[Oe[n*16+5]]),sn(3,7,11,15,ve[Oe[n*16+6]],ve[Oe[n*16+7]]),sn(0,5,10,15,ve[Oe[n*16+8]],ve[Oe[n*16+9]]),sn(1,6,11,12,ve[Oe[n*16+10]],ve[Oe[n*16+11]]),sn(2,7,8,13,ve[Oe[n*16+12]],ve[Oe[n*16+13]]),sn(3,4,9,14,ve[Oe[n*16+14]],ve[Oe[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=re[n]^re[n+8]}function Yd(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(Zd),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(fc(r,t),r.c=64),r}function fc(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,Wd(e,!1),e.c=0),e.b[e.c++]=t[n]}function Xd(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;Wd(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function Jd(e,t,n){n=n||32,e=Gd.normalizeInput(e);const r=Yd(n,t);return fc(r,e),Xd(r)}function C6(e,t,n){const r=Jd(e,t,n);return Gd.toHex(r)}var R6={blake2s:Jd,blake2sHex:C6,blake2sInit:Yd,blake2sUpdate:fc,blake2sFinal:Xd};const Or=N6,Ur=R6;var $6={blake2b:Or.blake2b,blake2bHex:Or.blake2bHex,blake2bInit:Or.blake2bInit,blake2bUpdate:Or.blake2bUpdate,blake2bFinal:Or.blake2bFinal,blake2s:Ur.blake2s,blake2sHex:Ur.blake2sHex,blake2sInit:Ur.blake2sInit,blake2sUpdate:Ur.blake2sUpdate,blake2sFinal:Ur.blake2sFinal};function Qd(e){const t=hr.decode(e);if(t.length<33)throw new Error("Too short to contain a public key");return t.slice(1,33)}function e0({publicKey:e,signature:t,payload:n}){var r;const i=uc(n.method),o=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),s=P6(n.address),c=n.era==="00"?new Uint8Array([0]):uc(n.era);if(c.length!==1&&c.length!==2)throw new Error("Invalid era length");const a=parseInt(n.nonce,16),f=new Uint8Array([a&255,a>>8&255]),u=BigInt(`0x${F6(n.tip)}`),d=k6(u),h=new Uint8Array([0,...e,s,...t,...c,...f,...d,...i]),l=L6(h.length+1);return new Uint8Array([...l,o,...h])}function t0(e){const t=uc(e),n=$6.blake2b(t,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function uc(e){return new Uint8Array(e.replace(/^0x/,"").match(/.{1,2}/g).map(t=>parseInt(t,16)))}function F6(e){return e.startsWith("0x")?e.slice(2):e}function P6(e){const t=hr.decode(e)[0];return t===42?0:t===60?2:1}function L6(e){if(e<64)return new Uint8Array([e<<2]);if(e<16384){const t=e<<2|1;return new Uint8Array([t&255,t>>8&255])}else if(e<1<<30){const t=e<<2|2;return new Uint8Array([t&255,t>>8&255,t>>16&255,t>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function k6(e){if(e<BigInt(1)<<BigInt(6))return new Uint8Array([Number(e<<BigInt(2))]);if(e<BigInt(1)<<BigInt(14)){const t=e<<BigInt(2)|BigInt(1);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255))])}else if(e<BigInt(1)<<BigInt(30)){const t=e<<BigInt(2)|BigInt(2);return new Uint8Array([Number(t&BigInt(255)),Number(t>>BigInt(8)&BigInt(255)),Number(t>>BigInt(16)&BigInt(255)),Number(t>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function M6(e){const t=Uint8Array.from(Buffer.from(e.signature,"hex")),n=Qd(e.transaction.address),r=e0({publicKey:n,signature:t,payload:e.transaction}),i=Buffer.from(r).toString("hex");return t0(i)}var dt={exports:{}};function j6(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var z6=H6;function H6(e,t,n){var r=n&&n.stringify||j6,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var s=new Array(o);s[0]=r(e);for(var c=1;c<o;c++)s[c]=r(t[c]);return s.join(" ")}if(typeof e!="string")return e;var a=t.length;if(a===0)return e;for(var f="",u=1-i,d=-1,h=e&&e.length||0,l=0;l<h;){if(e.charCodeAt(l)===37&&l+1<h){switch(d=d>-1?d:0,e.charCodeAt(l+1)){case 100:case 102:if(u>=a||t[u]==null)break;d<l&&(f+=e.slice(d,l)),f+=Number(t[u]),d=l+2,l++;break;case 105:if(u>=a||t[u]==null)break;d<l&&(f+=e.slice(d,l)),f+=Math.floor(Number(t[u])),d=l+2,l++;break;case 79:case 111:case 106:if(u>=a||t[u]===void 0)break;d<l&&(f+=e.slice(d,l));var g=typeof t[u];if(g==="string"){f+="'"+t[u]+"'",d=l+2,l++;break}if(g==="function"){f+=t[u].name||"<anonymous>",d=l+2,l++;break}f+=r(t[u]),d=l+2,l++;break;case 115:if(u>=a)break;d<l&&(f+=e.slice(d,l)),f+=String(t[u]),d=l+2,l++;break;case 37:d<l&&(f+=e.slice(d,l)),f+="%",d=l+2,l++,u--;break}++u}++l}return d===-1?e:(d<h&&(f+=e.slice(d)),f)}const n0=z6;dt.exports=Tt;const Nr=iE().console||{},q6={mapHttpRequest:$i,mapHttpResponse:$i,wrapRequestSerializer:gc,wrapResponseSerializer:gc,wrapErrorSerializer:gc,req:$i,res:$i,err:i0,errWithCause:i0};function cn(e,t){return e==="silent"?1/0:t.levels.values[e]}const lc=Symbol("pino.logFuncs"),dc=Symbol("pino.hierarchy"),V6={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function r0(e,t){const n={logger:t,parent:e[dc]};t[dc]=n}function K6(e,t,n){const r={};t.forEach(i=>{r[i]=n[i]?n[i]:Nr[i]||Nr[V6[i]||"log"]||Kn}),e[lc]=r}function G6(e,t){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Tt(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||Nr;e.browser.write&&(e.browser.asObject=!0);const r=e.serializers||{},i=G6(e.browser.serialize,r);let o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);const s=Object.keys(e.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(s);typeof n=="function"&&c.forEach(function(w){n[w]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const a=e.level||"info",f=Object.create(n);f.log||(f.log=Kn),K6(f,c,n),r0({},f),Object.defineProperty(f,"levelVal",{get:d}),Object.defineProperty(f,"level",{get:h,set:l});const u={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:c,timestamp:tE(e),messageKey:e.messageKey||"msg",onChild:e.onChild||Kn};f.levels=Z6(e),f.level=a,f.isLevelEnabled=function(w){return this.levels.values[w]?this.levels.values[w]>=this.levels.values[this.level]:!1},f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=Kn,f.serializers=r,f._serialize=i,f._stdErrSerialize=o,f.child=function(...w){return g.call(this,u,...w)},t&&(f._logEvent=bc());function d(){return cn(this.level,this)}function h(){return this._level}function l(w){if(w!=="silent"&&!this.levels.values[w])throw Error("unknown level "+w);this._level=w,An(this,u,f,"error"),An(this,u,f,"fatal"),An(this,u,f,"warn"),An(this,u,f,"info"),An(this,u,f,"debug"),An(this,u,f,"trace"),s.forEach(x=>{An(this,u,f,x)})}function g(w,x,I){if(!x)throw new Error("missing bindings for child Pino");I=I||{},i&&x.serializers&&(I.serializers=x.serializers);const $=I.serializers;if(i&&$){var B=Object.assign({},r,$),E=e.browser.serialize===!0?Object.keys(B):i;delete x.serializers,hc([x],E,B,this._stdErrSerialize)}function U(P){this._childLevel=(P._childLevel|0)+1,this.bindings=x,B&&(this.serializers=B,this._serialize=E),t&&(this._logEvent=bc([].concat(P._logEvent.bindings,x)))}U.prototype=this;const T=new U(this);return r0(this,T),T.child=function(...P){return g.call(this,w,...P)},T.level=I.level||this.level,w.onChild(T),T}return f}function Z6(e){const t=e.customLevels||{},n=Object.assign({},Tt.levels.values,t),r=Object.assign({},Tt.levels.labels,W6(t));return{values:n,labels:r}}function W6(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}Tt.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Tt.stdSerializers=q6,Tt.stdTimeFunctions=Object.assign({},{nullTime:o0,epochTime:s0,unixTime:nE,isoTime:rE});function Y6(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[dc];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function An(e,t,n,r){if(Object.defineProperty(e,r,{value:cn(e.level,n)>cn(r,n)?Kn:n[lc][r],writable:!0,enumerable:!0,configurable:!0}),e[r]===Kn){if(!t.transmit)return;const o=t.transmit.level||e.level,s=cn(o,n);if(cn(r,n)<s)return}e[r]=J6(e,t,n,r);const i=Y6(e);i.length!==0&&(e[r]=X6(i,e[r]))}function X6(e,t){return function(){return t.apply(this,[...e,...arguments])}}function J6(e,t,n,r){return function(i){return function(){const s=t.timestamp(),c=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Nr?Nr:this;for(var f=0;f<c.length;f++)c[f]=arguments[f];var u=!1;if(t.serialize&&(hc(c,this._serialize,this.serializers,this._stdErrSerialize),u=!0),t.asObject||t.formatters?i.call(a,...Q6(this,r,c,s,t)):i.apply(a,c),t.transmit){const d=t.transmit.level||e._level,h=cn(d,n),l=cn(r,n);if(l<h)return;eE(this,{ts:s,methodLevel:r,methodValue:l,transmitLevel:d,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:cn(e._level,n)},c,u)}}}(e[lc][r])}function Q6(e,t,n,r,i){const{level:o,log:s=d=>d}=i.formatters||{},c=n.slice();let a=c[0];const f={};let u=(e._childLevel|0)+1;if(u<1&&(u=1),r&&(f.time=r),o){const d=o(t,e.levels.values[t]);Object.assign(f,d)}else f.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(a!==null&&typeof a=="object")for(;u--&&typeof c[0]=="object";)Object.assign(f,c.shift());return[s(f),...c]}else{if(a!==null&&typeof a=="object"){for(;u--&&typeof c[0]=="object";)Object.assign(f,c.shift());a=c.length?n0(c.shift(),c):void 0}else typeof a=="string"&&(a=n0(c.shift(),c));return a!==void 0&&(f[i.messageKey]=a),[s(f)]}}function hc(e,t,n,r){for(const i in e)if(r&&e[i]instanceof Error)e[i]=Tt.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(const o in e[i])t.indexOf(o)>-1&&o in n&&(e[i][o]=n[o](e[i][o]))}function eE(e,t,n,r=!1){const i=t.send,o=t.ts,s=t.methodLevel,c=t.methodValue,a=t.val,f=e._logEvent.bindings;r||hc(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=n.filter(function(u){return f.indexOf(u)===-1}),e._logEvent.level.label=s,e._logEvent.level.value=c,i(s,e._logEvent,a),e._logEvent=bc(f)}function bc(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function i0(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function tE(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?o0:s0}function $i(){return{}}function gc(e){return e}function Kn(){}function o0(){return!1}function s0(){return Date.now()}function nE(){return Math.round(Date.now()/1e3)}function rE(){return new Date(Date.now()).toISOString()}function iE(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}dt.exports.default=Tt,dt.exports.pino=Tt;const pc=1e3*1024;var oE=Object.defineProperty,sE=(e,t,n)=>t in e?oE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,an=(e,t,n)=>sE(e,typeof t!="symbol"?t+"":t,n);class cE{constructor(t){an(this,"nodeValue"),an(this,"sizeInBytes"),an(this,"next"),this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class c0{constructor(t){an(this,"lengthInNodes"),an(this,"sizeInBytes"),an(this,"head"),an(this,"tail"),an(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new cE(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}}var aE=Object.defineProperty,fE=(e,t,n)=>t in e?aE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fi=(e,t,n)=>fE(e,typeof t!="symbol"?t+"":t,n);class a0{constructor(t,n=pc){Fi(this,"logs"),Fi(this,"level"),Fi(this,"levelValue"),Fi(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=dt.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new c0(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===dt.exports.levels.values.error?console.error(t):n===dt.exports.levels.values.warn?console.warn(t):n===dt.exports.levels.values.debug?console.debug(t):n===dt.exports.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Xu({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new c0(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(Xu({extraMetadata:t})),new Blob(n,{type:"application/json"})}}var uE=Object.defineProperty,lE=(e,t,n)=>t in e?uE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dE=(e,t,n)=>lE(e,typeof t!="symbol"?t+"":t,n);class hE{constructor(t,n=pc){dE(this,"baseChunkLogger"),this.baseChunkLogger=new a0(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}}var bE=Object.defineProperty,gE=(e,t,n)=>t in e?bE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pE=(e,t,n)=>gE(e,typeof t!="symbol"?t+"":t,n);class wE{constructor(t,n=pc){pE(this,"baseChunkLogger"),this.baseChunkLogger=new a0(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var yE=Object.defineProperty,mE=Object.defineProperties,EE=Object.getOwnPropertyDescriptors,f0=Object.getOwnPropertySymbols,xE=Object.prototype.hasOwnProperty,vE=Object.prototype.propertyIsEnumerable,u0=(e,t,n)=>t in e?yE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wc=(e,t)=>{for(var n in t||(t={}))xE.call(t,n)&&u0(e,n,t[n]);if(f0)for(var n of f0(t))vE.call(t,n)&&u0(e,n,t[n]);return e},yc=(e,t)=>mE(e,EE(t));function BE(e){var t,n;const r=new hE((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:dt.exports(yc(wc({},e.opts),{level:"trace",browser:yc(wc({},(n=e.opts)==null?void 0:n.browser),{write:i=>r.write(i)})})),chunkLoggerController:r}}function SE(e){var t;const n=new wE((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:dt.exports(yc(wc({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function AE(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?BE(e):SE(e)}function DE({logger:e,name:t}){const n=typeof e=="string"?AE({opts:{level:e,name:t}}).logger:e;return n.level=typeof e=="string"?e:e.level,n}A.BASE10=Js,A.BASE16=Fe,A.BASE64=Hn,A.BASE64URL=_i,A.COLON=Ih,A.DEFAULT_DEPTH=Ji,A.EMPTY_SPACE=Rr,A.ENV_MAP=Ue,A.INTERNAL_ERRORS=Bd,A.LimitedSet=i1,A.MemoryStore=B6,A.ONE_THOUSAND=Oh,A.REACT_NATIVE_PRODUCT=Vc,A.RELAYER_DEFAULT_PROTOCOL=fd,A.SDK_ERRORS=vd,A.SDK_TYPE=Gc,A.SLASH=Kc,A.TYPE_0=Qs,A.TYPE_1=Vn,A.TYPE_2=Br,A.UTF8=qn,A.addResourceToRecap=Fu,A.addSignatureToExtrinsic=e0,A.appendToQueryString=Zc,A.assertType=Ph,A.assignAbilityToActions=vs,A.base64Decode=Ru,A.base64Encode=Cu,A.buildApprovedNamespaces=J8,A.buildAuthObject=Ap,A.buildNamespacesFromAuth=Q8,A.buildRecapStatement=Lu,A.buildSignedExtrinsicHash=M6,A.calcExpiry=Wh,A.capitalize=Hh,A.capitalizeWord=ta,A.createDelayedPromise=qh,A.createEncodedRecap=Op,A.createExpiringPromise=Vh,A.createLogger=DE,A.createRecap=$u,A.decodeRecap=Qt,A.decodeTypeByte=vn,A.decodeTypeTwoEnvelope=A8,A.decrypt=B8,A.deriveExtrinsicHash=t0,A.deriveSymKey=m8,A.deserialize=Ii,A.encodeRecap=wi,A.encodeTypeByte=tc,A.encodeTypeTwoEnvelope=S8,A.encrypt=v8,A.engineEvent=Xh,A.enumify=zh,A.extractSolanaTransactionId=lp,A.formatAccountId=xc,A.formatAccountWithChain=y0,A.formatChainId=Ec,A.formatDeeplinkUrl=na,A.formatExpirerTarget=eo,A.formatIdTarget=Gh,A.formatMessage=Ou,A.formatMessageContext=Lh,A.formatRelayParams=bd,A.formatRelayRpcUrl=$h,A.formatStatementFromRecap=Ss,A.formatTopicTarget=Kh,A.formatUA=Jc,A.formatUri=M8,A.fromBase64=no,A.generateKeyPair=w8,A.generateRandomBytes32=y8,A.getAccountsChains=Bn,A.getAccountsFromNamespaces=E0,A.getAddressFromAccount=vc,A.getAddressesFromAccounts=m0,A.getAlgorandTransactionId=bp,A.getAppId=Th,A.getAppMetadata=Wc,A.getBrowserOnlineStatus=Rd,A.getChainFromAccount=Bc,A.getChainsFromAccounts=Sc,A.getChainsFromNamespace=Tr,A.getChainsFromNamespaces=x0,A.getChainsFromRecap=Tp,A.getChainsFromRequiredNamespaces=v0,A.getCommonValuesInArrays=to,A.getCryptoKeyFromKeyData=ad,A.getDecodedRecapFromResources=Uu,A.getDeepLink=Qh,A.getDidAddress=xs,A.getDidAddressNamespace=_u,A.getDidAddressSegments=wr,A.getDidChainId=Du,A.getEnvironment=hn,A.getHttpUrl=Fh,A.getInternalError=Nt,A.getJavascriptID=Xc,A.getJavascriptOS=Yc,A.getLastItems=ea,A.getLinkModeURL=j8,A.getMethodsFromRecap=Np,A.getNamespacedDidChainId=Iu,A.getNamespacesChains=wd,A.getNamespacesEvents=Y8,A.getNamespacesEventsForChainId=md,A.getNamespacesFromAccounts=xd,A.getNamespacesMethods=W8,A.getNamespacesMethodsForChainId=yd,A.getNearTransactionIdFromSignedTransaction=hp,A.getNearUint8ArrayFromBytes=xu,A.getNodeOnlineStatus=Fd,A.getReCapActions=Tu,A.getReactNativeOnlineStatus=$d,A.getRecapAbilitiesFromResource=Ip,A.getRecapFromResources=yi,A.getRecapResource=Nu,A.getRelayClientMetadata=Rh,A.getRelayProtocolApi=T8,A.getRelayProtocolName=N8,A.getRequiredNamespacesFromNamespaces=X8,A.getSdkError=Sn,A.getSearchParamFromURL=e1,A.getSignDirectHash=gp,A.getSuiDigest=dp,A.getUniqueValues=Mi,A.getWalletSendCallsHashes=pp,A.handleDeeplinkRedirect=Jh,A.hasOverlap=Ft,A.hashEthereumMessage=ys,A.hashKey=E8,A.hashMessage=x8,A.isAndroid=Uh,A.isAppVisible=v6,A.isBrowser=On,A.isCaipNamespace=ic,A.isConformingNamespaces=Td,A.isExpired=Yh,A.isIframe=oa,A.isIos=Nh,A.isNode=Qi,A.isOnline=E6,A.isProposalStruct=r6,A.isReactNative=$t,A.isRecap=Bs,A.isSessionCompatible=t6,A.isSessionStruct=i6,A.isTelegram=ia,A.isTestRun=n1,A.isTypeOneEnvelope=_8,A.isTypeTwoEnvelope=I8,A.isUndefined=nn,A.isValidAccountId=Sd,A.isValidAccounts=_d,A.isValidActions=Od,A.isValidArray=Dr,A.isValidChainId=_r,A.isValidChains=Ad,A.isValidController=o6,A.isValidEip1271Signature=Eu,A.isValidEip191Signature=mu,A.isValidErrorReason=u6,A.isValidEvent=h6,A.isValidId=a6,A.isValidNamespaceAccounts=Id,A.isValidNamespaceActions=sc,A.isValidNamespaceChains=Dd,A.isValidNamespaceMethodsOrEvents=oc,A.isValidNamespaces=Ud,A.isValidNamespacesChainId=b6,A.isValidNamespacesEvent=p6,A.isValidNamespacesRequest=g6,A.isValidNumber=Ui,A.isValidObject=Oi,A.isValidParams=f6,A.isValidRecap=ut,A.isValidRelay=Nd,A.isValidRelays=c6,A.isValidRequest=l6,A.isValidRequestExpiry=m6,A.isValidRequiredNamespaces=s6,A.isValidResponse=d6,A.isValidString=Ge,A.isValidUrl=n6,A.mapEntries=jh,A.mapToObj=kh,A.mergeArrays=Ze,A.mergeEncodedRecaps=Up,A.mergeRecaps=Pu,A.mergeRequiredAndOptionalNamespaces=e6,A.normalizeNamespaces=Ar,A.objToMap=Mh,A.openDeeplink=ra,A.parseAccountId=ki,A.parseChainId=Li,A.parseContextNames=Qc,A.parseExpirerTarget=Zh,A.parseNamespaceKey=Ed,A.parseRelayParams=dd,A.parseTopic=hd,A.parseUri=k8,A.populateAppMetadata=Ch,A.populateAuthPayload=Dp,A.recapHasResource=_p,A.serialize=nc,A.sleep=r1,A.ss58AddressToPublicKey=Qd,A.subscribeToBrowserNetworkChange=Pd,A.subscribeToNetworkChange=x6,A.subscribeToReactNativeNetworkChange=Ld,A.toBase64=sa,A.uuidv4=t1,A.validateDecoding=D8,A.validateEncoding=cd,A.validateSignedCacao=Sp,A.verifyP256Jwt=O8,A.verifySignature=yu,Object.defineProperty(A,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
