# Quick Start: Expo Go Setup

This guide will help you quickly convert and run EchoID in Expo Go.

## Prerequisites

1. **Install Expo CLI**:
   ```bash
   npm install -g expo-cli
   ```

2. **Install Expo Go app** on your phone:
   - iOS: [App Store](https://apps.apple.com/app/expo-go/id982107779)
   - Android: [Google Play](https://play.google.com/store/apps/details?id=host.exp.exponent)

## Migration Steps

### 1. Backup Current Project
```bash
cd /Users/timiajeigbe/Documents/echoID/EchoID
git checkout -b backup-before-expo
git add -A && git commit -m "Backup before Expo migration"
```

### 2. Update package.json

Replace your `package.json` with the Expo version:

```bash
cp package-expo.json package.json
```

### 3. Install Expo Dependencies

```bash
npm install
```

This will install:
- `expo` (~52.0.0)
- `expo-secure-store` (replaces keychain/encrypted-storage)
- `expo-camera` (replaces react-native-vision-camera)
- `expo-av` (replaces react-native-audio-recorder-player)
- `expo-file-system` (replaces react-native-fs)
- `expo-location` (replaces react-native-geolocation-service)
- `expo-crypto` (replaces some crypto needs)

### 4. Update Code Imports

Run these find/replace operations:

```bash
# Replace crypto imports
find src -type f -name "*.ts" -o -name "*.tsx" | xargs sed -i '' 's|from '\''../crypto'\''|from '\''../crypto/expo-index'\''|g'
find src -type f -name "*.ts" -o -name "*.tsx" | xargs sed -i '' 's|from '\''\.\./crypto'\''|from '\''\.\./crypto/expo-index'\''|g'

# Replace auth imports
find src -type f -name "*.ts" -o -name "*.tsx" | xargs sed -i '' 's|from '\''\./auth'\''|from '\''\./auth-expo'\''|g'
find src -type f -name "*.ts" -o -name "*.tsx" | xargs sed -i '' 's|from '\''\.\./lib/auth'\''|from '\''\.\./lib/auth-expo'\''|g'
```

### 5. Update Component Files

I've created Expo-compatible versions that need to be manually updated:

- `src/components/SelfieCapture.tsx` → Use `expo-camera`
- `src/components/Recorder.tsx` → Use `expo-av`
- `src/components/QRScanner.tsx` → Use `expo-camera`
- `src/screens/Onboarding.tsx` → Use `expo-secure-store` instead of `react-native-keychain`
- `src/screens/Vault.tsx` → Use `expo-secure-store`

### 6. Remove Native Folders (Optional)

Expo manages native code automatically:

```bash
# These will be regenerated by Expo
rm -rf ios/ android/
```

### 7. Start Expo

```bash
npx expo start
```

This will:
1. Start Metro bundler
2. Generate QR code
3. Open Expo DevTools in browser

### 8. Run on Device

**Option A: Scan QR Code**
- Open Expo Go app on your phone
- Scan the QR code from terminal/browser

**Option B: Press key in terminal**
- Press `i` for iOS simulator
- Press `a` for Android emulator

## Limitations

⚠️ **Important**: Expo Go has limitations:

1. **No Apple Pay**: Custom native module not supported
2. **No Secure Enclave**: Uses software-based encryption (expo-secure-store)
3. **WalletConnect**: Should work, but may need testing

## For Production Features

If you need Apple Pay or hardware-backed Secure Enclave:

1. **Use EAS Build**:
   ```bash
   npm install -g eas-cli
   eas build:configure
   eas build --profile development --platform ios
   ```

2. **Create Development Build**:
   - Install the development build on your device
   - This allows custom native modules

## Troubleshooting

### Metro bundler errors
```bash
npx expo start --clear
```

### Module not found errors
```bash
rm -rf node_modules
npm install
```

### Clear Expo cache
```bash
npx expo start --clear
```

## Next Steps

1. ✅ Test account creation
2. ✅ Test onboarding flow
3. ✅ Test consent creation
4. ✅ Test WalletConnect integration

